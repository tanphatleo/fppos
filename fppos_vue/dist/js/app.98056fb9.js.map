{"version":3,"file":"js/app.98056fb9.js","mappings":"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","sources":["webpack://fppos_vue/./src/App.vue","webpack://fppos_vue/./src/components/LoadingOverlay.vue","webpack://fppos_vue/./src/components/LoadingOverlay.vue?68e9","webpack://fppos_vue/./src/App.vue?7ccd","webpack://fppos_vue/./src/views/Sale.vue","webpack://fppos_vue/./src/components/Sale/menu_toogle.vue","webpack://fppos_vue/./src/components/Sale/menu_toogle.vue?3590","webpack://fppos_vue/./src/components/Sale/AddCust.vue","webpack://fppos_vue/./src/components/Sale/AddCust.vue?dc58","webpack://fppos_vue/./src/components/Sale/Carts.vue","webpack://fppos_vue/./src/components/Sale/Carts.vue?a34a","webpack://fppos_vue/./src/components/Sale/ProfuctFilterCate.vue","webpack://fppos_vue/./src/components/Sale/ProfuctFilterCate.vue?e1e6","webpack://fppos_vue/./src/components/Sale/Surcharge.vue","webpack://fppos_vue/./src/components/Sale/Surcharge.vue?a959","webpack://fppos_vue/./src/components/Sale/PrintInvoice.vue","webpack://fppos_vue/./src/components/Sale/PrintInvoice.vue?9c92","webpack://fppos_vue/./src/components/Sale/Payment.vue","webpack://fppos_vue/./src/components/Sale/Payment.vue?f552","webpack://fppos_vue/./src/components/common/AlertModule.vue","webpack://fppos_vue/./src/components/common/AlertModule.vue?1473","webpack://fppos_vue/./src/components/Manage/AddEditTrans.vue","webpack://fppos_vue/./src/components/Manage/AddEditTrans.vue?9eed","webpack://fppos_vue/./src/views/Sale.vue?b13c","webpack://fppos_vue/./src/views/Manage.vue","webpack://fppos_vue/./src/components/Manage/Products.vue","webpack://fppos_vue/./src/store/index.js","webpack://fppos_vue/./src/components/Manage/AddEditProduct.vue","webpack://fppos_vue/./src/components/Manage/AddEditProduct.vue?e5d7","webpack://fppos_vue/./src/components/Manage/AddEditProductGroup.vue","webpack://fppos_vue/./src/components/Manage/AddEditProductGroup.vue?4b95","webpack://fppos_vue/./src/components/Manage/Products.vue?b5df","webpack://fppos_vue/./src/components/Manage/Customers.vue","webpack://fppos_vue/./src/components/Manage/AddEditCustomer.vue","webpack://fppos_vue/./src/components/Manage/AddEditCustomer.vue?7f01","webpack://fppos_vue/./src/components/Manage/Customers.vue?3d54","webpack://fppos_vue/./src/components/Manage/Invoices.vue","webpack://fppos_vue/./src/components/Manage/AddEditInvoices.vue","webpack://fppos_vue/./src/components/Manage/AddEditInvoices.vue?5617","webpack://fppos_vue/./src/components/Manage/AddEditSurcharges.vue","webpack://fppos_vue/./src/components/Manage/AddEditSurcharges.vue?7ab4","webpack://fppos_vue/./src/components/Manage/Invoices.vue?5bb6","webpack://fppos_vue/./src/components/Manage/Settings.vue","webpack://fppos_vue/./src/components/Manage/AddEditSettings.vue","webpack://fppos_vue/./src/components/Manage/AddEditSettings.vue?e72d","webpack://fppos_vue/./src/components/Manage/Settings.vue?3287","webpack://fppos_vue/./src/components/Manage/Trans.vue","webpack://fppos_vue/./src/components/Manage/AddEditAccounts.vue","webpack://fppos_vue/./src/components/Manage/AddEditAccounts.vue?5c22","webpack://fppos_vue/./src/components/Manage/AddEditTransactionType.vue","webpack://fppos_vue/./src/components/Manage/AddEditTransactionType.vue?bddb","webpack://fppos_vue/./src/components/Manage/Trans.vue?6cd3","webpack://fppos_vue/./src/components/Manage/Users.vue","webpack://fppos_vue/./src/components/Manage/AddEditUsers.vue","webpack://fppos_vue/./src/components/Manage/AddEditUsers.vue?3225","webpack://fppos_vue/./src/components/Manage/Users.vue?d50b","webpack://fppos_vue/./src/components/Manage/Purchases.vue","webpack://fppos_vue/./src/components/Manage/AddEditPurchase.vue","webpack://fppos_vue/./src/components/Manage/AddEditPurchase.vue?d3ae","webpack://fppos_vue/./src/components/Manage/Purchases.vue?9663","webpack://fppos_vue/./src/components/Manage/DateEndInventory.vue","webpack://fppos_vue/./src/components/Manage/EditChangesItems.vue","webpack://fppos_vue/./src/components/Manage/EditChangesItems.vue?ac5b","webpack://fppos_vue/./src/components/Manage/DateEndInventory.vue?2226","webpack://fppos_vue/./src/components/Manage/DateEndCashBalance.vue","webpack://fppos_vue/./src/components/Manage/DateEndCashBalance.vue?029e","webpack://fppos_vue/./src/views/Manage.vue?baee","webpack://fppos_vue/./src/views/SignIn.vue","webpack://fppos_vue/./src/views/SignIn.vue?093c","webpack://fppos_vue/./src/router/index.js","webpack://fppos_vue/./src/main.js","webpack://fppos_vue/webpack/bootstrap","webpack://fppos_vue/webpack/runtime/chunk loaded","webpack://fppos_vue/webpack/runtime/compat get default export","webpack://fppos_vue/webpack/runtime/define property getters","webpack://fppos_vue/webpack/runtime/ensure chunk","webpack://fppos_vue/webpack/runtime/get javascript chunk filename","webpack://fppos_vue/webpack/runtime/get mini-css chunk filename","webpack://fppos_vue/webpack/runtime/global","webpack://fppos_vue/webpack/runtime/hasOwnProperty shorthand","webpack://fppos_vue/webpack/runtime/load script","webpack://fppos_vue/webpack/runtime/make namespace object","webpack://fppos_vue/webpack/runtime/publicPath","webpack://fppos_vue/webpack/runtime/jsonp chunk loading","webpack://fppos_vue/webpack/startup"],"sourcesContent":["<template>\r\n  <LoadingOverlay v-if=\"store.getters.isLoading\" />\r\n  <router-view />\r\n</template>\r\n\r\n<script>\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport LoadingOverlay from './components/LoadingOverlay.vue';\r\n\r\n// Set the root URL for axios globally\r\n// axios.defaults.baseURL = 'https://fitpackvnapi.fitpack.io.vn/api/v1';\r\naxios.defaults.baseURL = 'https://fitpackhnapi.fitpack.io.vn/api/v1';\r\n// axios.defaults.baseURL = 'http://localhost:8000/api/v1';\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    LoadingOverlay,\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const router = useRouter();\r\n\r\n    const checkTokenValidity = async () => {\r\n      try {\r\n        const response = await axios.get('/who_i_am/');\r\n        // console.log('Token is valid:', response.data);\r\n\r\n        const userGroups_ = response.data.usergroups || [];\r\n        const isAdmin = userGroups_.includes('admin');\r\n        store.dispatch('setUserAdmin', isAdmin);\r\n        const isSuperadmin = userGroups_.includes('super_user');\r\n        // console.log('userGroups_:', userGroups_);\r\n        store.dispatch('setUserSuperadmin', isSuperadmin);\r\n        // console.log('setUserAdmin:', isAdmin);\r\n        // console.log('setUserSuperadmin:', isSuperadmin);\r\n        // console.log('User groups:');\r\n        store.dispatch('setUserName', response.data.username || '');\r\n        // console.log('setUserName:', response.data.username || '');\r\n\r\n      } catch (error) {\r\n        console.error('Invalid token:', error);\r\n        store.dispatch('removeToken'); // Clear token if invalid\r\n        router.push('/signin'); // Redirect to SignIn page\r\n      }\r\n    };\r\n\r\n    store.dispatch('checkAuthentication').then(() => {\r\n      if (store.getters.isAuthenticated) {\r\n        const token = store.getters.getToken;\r\n        // console.log('Existing token found:', token);\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`; // Set default token header\r\n        checkTokenValidity(); // Check token validity\r\n        store.commit('setLoading', false); \r\n      } else {\r\n        router.push('/signin'); // Redirect to SignIn page if not authenticated\r\n        store.commit('setLoading', false);\r\n      }\r\n    });\r\n\r\n    return {\r\n      store,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../node_modules/bulma/';\r\n\r\n:root {\r\n  --bulma-body-overflow-y: hidden !important;\r\n}\r\n\r\n$kv-primary: #0070F4;\r\n$size-sm: 4vh;\r\n$main-bg-color: azure;\r\n\r\n#app {\r\n  height: 100%;\r\n  max-height: 100%;\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: visible; /* Ensure no clipping */\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  background-color: $main-bg-color;\r\n  box-sizing: border-box;\r\n  // border: 3px solid purple; /* Debugging border */\r\n}\r\n</style>\r\n","<template>\r\n  <div v-if=\"isLoading\" class=\"loading-overlay\">\r\n    <div class=\"spinner\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'LoadingOverlay',\r\n  computed: {\r\n    ...mapGetters(['isLoading']),\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.loading-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.spinner {\r\n  width: 50px;\r\n  height: 50px;\r\n  border: 5px solid rgba(255, 255, 255, 0.3);\r\n  border-top: 5px solid white;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>","import { render } from \"./LoadingOverlay.vue?vue&type=template&id=14c58e71&scoped=true\"\nimport script from \"./LoadingOverlay.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingOverlay.vue?vue&type=script&lang=js\"\n\nimport \"./LoadingOverlay.vue?vue&type=style&index=0&id=14c58e71&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14c58e71\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=6d02b133\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6d02b133&lang=scss\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  \r\n  <div style=\"height: 100%; \" >\r\n    <div class=\"home-page \" style=\"height: 100%;\">\r\n      <div class=\"page-header\">\r\n        <div class=\"header-left\">\r\n          <div class=\"col-left-control\">\r\n            <div class=\"product-search\">\r\n              <i class=\"fas fa-search\"></i>\r\n              <input class=\"product-search-input c-input\" placeholder=\"Tm hng ha\" @focus=\"search_input_focus\" @blur=\"search_input_blur\" @input=\"search_input_change\"/>\r\n              <div class=\"place-holder\"> </div>\r\n              <div class=\"product-search-results\">\r\n                <ul v-for=\"product in filteredProducts\" \r\n                  :key=\"product.id\" >\r\n                  <li class=\"suggestions-item\" \r\n                    :data-product-id=\"product.id\"\r\n                    @mousedown=\"add_product(product)\">\r\n                    <div class=\"suggestions-item-info\"> \r\n                      <h5><b>{{ product.name }}</b></h5>\r\n                      <div class=\"number-blue\"> {{ formatPrice(product.price) }}</div>\r\n                    </div>\r\n                    <div class=\"suggestions-item-info\"> {{ product.code }}</div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div class=\"carts-tab\">\r\n              <ul class=\"pending-sales-list\">\r\n                <li \r\n                  v-for=\"(sale, index) in localPendingSales\" \r\n                  :key=\"sale.id\" \r\n                  :data-sale-id=\"sale.id\"\r\n                  class=\"pending-sales-item\"\r\n                  :class=\"{ 'selected': index === 0 }\"\r\n                  @click=\"select_pending_invoice(sale.id, $event)\"\r\n                >\r\n                    <h5> Ha n {{ sale.id }} </h5>\r\n                    <i class=\"fa fa-times\" @click=\"remove_pending_sale\"></i>\r\n                </li>\r\n                <li class=\"new_pending_sale pending-sales-item\" @click=\"add_new_pending_sale\">\r\n                  <h5> n mi </h5>\r\n                </li>\r\n                \r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div class=\"header-left-info\">\r\n          </div>\r\n        </div>\r\n        <div class=\"header-right\">\r\n          <div class=\"user-name\"> {{ this.branch }}</div>\r\n          <div class=\"user-name\"> {{ this.user }}</div>\r\n          <div style=\"text-align: center; margin: 1rem 0;\">\r\n        </div>\r\n          <div class=\"menu-toggle\"> \r\n            <menu_toggle @menu-action=\"handleMenuAction\"/>\r\n          </div>\r\n        </div>  \r\n      </div>\r\n      <div class=\"body-page\">\r\n        <div class=\"detail-box\">\r\n          <Carts :focus_invoice=\"focus_invoice\"\r\n          @update-invoice=\"handleUpdateItem\"\r\n          />\r\n        </div>\r\n        <div class=\"shortcut-box\">\r\n          <div class=\"shortcut-box-header\">\r\n            <div class=\"search_filter-control\">\r\n              <div class=\"customer-search\" v-bind:class=\"{ 'is-hidden': focus_invoice && focus_invoice.customer }\">\r\n                <i class=\"fas fa-search\"></i>\r\n                <input class=\"customer-search-input c-input\" placeholder=\"Tm khch hng\" @focus=\"search_input_focus\" @blur=\"search_input_cust_blur\" @input=\"search_input_change_cust\"/>\r\n                <i class=\"fas fa-plus add-cust\" @click=\"this.editOrNew = 'new'; isCustomerModalOpen = true; \"></i>\r\n                <div class=\"place-holder\"> </div>\r\n                <div class=\"customer-search-results is-hidden\">\r\n                  <ul v-for=\"customer in filteredCust\" \r\n                  :key=\"customer.id\" \r\n                  :id=\"'customer-' + customer.id\"\r\n                  @mousedown=\"select_focus_customer(customer)\"\r\n                  >\r\n                    <li class=\"suggestions-item\">\r\n                      <div class=\"suggestions-item-info\"> \r\n                        <h5><b>{{ customer.name }}</b></h5>\r\n                        <div class=\"number-blue\"> {{ customer.phone_number }}</div>\r\n                      </div>\r\n                      <div class=\"suggestions-item-info\"> {{ customer.code }}</div>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div class=\"customer-selected\" v-bind:class=\"{ 'is-hidden': !focus_invoice || !focus_invoice.customer }\">\r\n                <span class=\"customer-search-input c-input edit-cust\"\r\n                @click=\"this.editOrNew = 'edit'; isCustomerModalOpen = true; \"  \r\n                > {{ focus_invoice && focus_invoice.customer ? focus_invoice.customer.name : '' }} \r\n                </span>\r\n                <i class=\"fa fa-times add-cust\" @click=\"remove_focus_customer\"></i>\r\n                <div class=\"place-holder\"> </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"product-header-right\" @click=\"isFilterModalOpen = true\">\r\n              <i class=\"fas fa-list-ul no-select\"></i>\r\n            </div>\r\n          </div>\r\n          <div class=\"product-short-list\">\r\n            <div class=\"product-grid-container\">\r\n              <div class=\"product-list\">\r\n                <div\r\n                  v-for=\"product in products\" \r\n                  :key=\"product.id\" \r\n                  :data-product-id=\"product.id\"\r\n                  class=\"product-item is-hidden\"\r\n                  :class=\"{ 'is-not-hidden': (product.is_active) && (productGroupFilter.length === 0 || productGroupFilter.includes(product.productGroup)) && (searchQuery === '' || product.name.toLowerCase().includes(searchQuery) || product.code.toLowerCase().includes(searchQuery)) }\"\r\n                  @click=\"add_product(product)\"\r\n                >\r\n                  <div class=\"product-card-top\">  \r\n                    <i class=\"fas fa-image placeholder-icon\"></i>\r\n                  </div>\r\n\r\n                  <div class=\"product-card-bottom\">\r\n                    <h4 class=\"product-name \">{{ limit_text(product.name, 25) }}</h4>\r\n                    <h4 class=\"product-price no-select\">{{ formatPrice(product.price) }}</h4>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div class=\"payment-action no-select\">\r\n            <button class=\"payment-button\"\r\n                        :disabled=\"!focus_invoice.totalItems\"\r\n                        @click=\"openPaymentModal\">\r\n                          Thanh ton\r\n                        </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class=\"page-footer no-select\">\r\n      \r\n      </div>\r\n    </div>\r\n  </div>\r\n  <AddCust \r\n    v-if=\"isCustomerModalOpen\" \r\n    :current-branch=\"this.branch\"\r\n    :customer=\"focus_invoice.customer\"\r\n    :regionList=\"this.provinces\"\r\n    :wardList=\"this.wards\"\r\n    :type=\"this.editOrNew\"\r\n    @close=\"isCustomerModalOpen = false\" \r\n    @save=\"handleCustomerSave\"\r\n  />\r\n  <ProfuctFilterCate \r\n    v-if=\"isFilterModalOpen\" \r\n    :dataSource=\"this.productGroups\"\r\n    @update:visible=\"isFilterModalOpen = false\" \r\n    @apply=\"applyProductFilter\"\r\n  />\r\n\r\n  <Payment \r\n    v-if=\"isPaymentModalOpen\"\r\n    :visible=\"isPaymentModalOpen\"\r\n    :cart-data=\"this.focus_invoice\"\r\n    :channels=\"this.channels\"\r\n    :default-surcharges=\"this.defaultSurcharges\"\r\n    :bank-accounts=\"this.bankAccounts\"\r\n    :transport-companies=\"this.transportCompanies\"\r\n    @close=\"isPaymentModalOpen = false\"\r\n    @update-cart-data=\"handleUpdateItem\"\r\n    @complete-payment=\"handleCompletePayment\"\r\n  />\r\n\r\n  <AddEditTrans \r\n    v-if=\"showAddEditTrans\"\r\n    :item=\"selectedTransItem\"\r\n    :accounts=\"allAccounts\"\r\n    :transaction-types=\"transactionTypes\"\r\n    @close=\"showAddEditTrans = false\"\r\n    @saved=\"onTransSaved\"\r\n  />\r\n\r\n  <!-- Print Button -->\r\n  \r\n\r\n  \r\n\r\n</template>\r\n<script>\r\n// import { search } from 'core-js/fn/symbol';\r\nimport menu_toggle from '@/components/Sale/menu_toogle.vue';\r\nimport AddCust from '@/components/Sale/AddCust.vue';\r\nimport Carts from '@/components/Sale/Carts.vue';\r\nimport ProfuctFilterCate from '@/components/Sale/ProfuctFilterCate.vue';\r\nimport Payment from '@/components/Sale/Payment.vue';\r\nimport AlertModule from '@/components/common/AlertModule.vue';\r\nimport AddEditTrans from '@/components/Manage/AddEditTrans.vue';\r\n\r\nimport { createApp } from 'vue';\r\n\r\nimport axios from 'axios';\r\n\r\n  export default {\r\n    name: \"SaleView\",\r\n    components: {\r\n      menu_toggle,\r\n      AddCust,\r\n      Carts, \r\n      ProfuctFilterCate,\r\n      Payment,\r\n      AlertModule,\r\n      AddEditTrans\r\n    },\r\n    data() {\r\n      return {\r\n  \r\n        products: [],\r\n        filteredProducts: [], \r\n        localPendingSales: [], \r\n        branch: '',\r\n        isCustomerModalOpen: false, \r\n        isPaymentModalOpen: false,\r\n        focus_invoice: {},\r\n        isFilterModalOpen: false,\r\n        filteredCust: [],\r\n        provinces: [],\r\n        wards: [],\r\n        productGroupFilter: [],\r\n        editOrNew: 'new',\r\n        bankAccounts: [],\r\n        transportCompanies: [],\r\n        channels: [],\r\n        defaultSurcharges: [],\r\n        allAccounts: [],\r\n        transactionTypes: [],\r\n        showAddEditTrans: false,\r\n        selectedTransItem: {},\r\n        searchQuery: '',\r\n        sampleInvoice: {\r\n          id: 1,\r\n          total: 0,\r\n          totalItems: 0,\r\n          discount: 0,\r\n          finalTotal: 0,\r\n          note: '',\r\n          customer: null,\r\n          totalSurcharge: 0,\r\n          surcharges: [],\r\n          paymentMethod: 'cash',\r\n          paymentAccount: 1, // default to Cash account\r\n          chosenDiscountMethod: 'VND',\r\n          discountMethodValue: 0,\r\n          transportCompany: null,\r\n          amountPaidByCustomer: 0,\r\n          changeDue: 0,\r\n          amountPaidTransportCompany: 0,\r\n          chosenBankAccount: null,\r\n          items: [\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    \r\n    computed: {\r\n      user() {\r\n        return this.$store.getters.userName;\r\n      }\r\n    },\r\n    methods: {\r\n\r\n      handleMenuAction(action) {\r\n        switch (action) {\r\n          case 'viewReport':\r\n            this.$router.push('/manage');\r\n            break;\r\n          case 'receipt':\r\n            this.selectedTransItem = { debit_or_credit: 'DR' };\r\n            this.showAddEditTrans = true;\r\n            break;\r\n          case 'payment':\r\n            this.selectedTransItem = { debit_or_credit: 'CR' };\r\n            this.showAddEditTrans = true;\r\n            break;\r\n          case 'date_end_inventory':\r\n            this.$router.push('/manage?view=date_end_inventory');\r\n            break;\r\n          case 'date_end_cash_balance':\r\n            this.$router.push('/manage?view=date_end_cash_balance');\r\n            break;\r\n          default:\r\n            console.log('Unknown action:', action);\r\n        }\r\n      },\r\n\r\n      onTransSaved() {\r\n        this.showAddEditTrans = false;\r\n        this.triggerAlert(\"Lu giao dch thnh cng!\", 3000);\r\n      },\r\n\r\n      triggerAlert(message, duration=30000) {\r\n        const alertContainer = document.createElement('div');\r\n        document.body.appendChild(alertContainer);\r\n\r\n        const alertApp = createApp(AlertModule, { message, duration });\r\n        alertApp.mount(alertContainer);\r\n\r\n        // Remove the alert from DOM after it's closed\r\n        setTimeout(() => {\r\n          alertApp.unmount();\r\n          document.body.removeChild(alertContainer);\r\n        }, duration + 1000); // Extra second to ensure it's unmounted after duration\r\n      },\r\n      \r\n      async handleCompletePayment (payload) {\r\n        if (!this.isPaymentModalOpen) return;\r\n        console.log(\"Payment completed with payload:\", payload);\r\n        \r\n        // Clear the current focus invoice\r\n        // this.focus_invoice = null;\r\n\r\n        // Remove the paid invoice from localPendingSales\r\n        console.log(\"Pending sales before payment:\", this.localPendingSales);\r\n        console.log(\"Focus invoice before payment:\", this.focus_invoice);\r\n        console.log(\"Removing invoice with ID:\", this.focus_invoice.id);\r\n        setTimeout(() => {\r\n          \r\n        }, 10);\r\n        this.localPendingSales = this.localPendingSales.filter(sale => parseInt(sale.id) !== parseInt(this.focus_invoice.id));\r\n        console.log(\"Pending sales after removal:\", this.localPendingSales);\r\n        await this.$nextTick();\r\n        localStorage.setItem('pendingSales', JSON.stringify(this.localPendingSales));\r\n        \r\n        // this.focus_invoice = {};\r\n\r\n        // Update local storage\r\n        \r\n\r\n        // Select the first pending sale if available\r\n        if (this.localPendingSales.length > 0) {\r\n          this.select_pending_invoice(this.localPendingSales[0].id, null);\r\n        } else {\r\n          // If no pending sales left, create a new one\r\n          this.add_new_pending_sale();\r\n          localStorage.setItem('pendingSales', JSON.stringify(this.localPendingSales));\r\n          this.select_pending_invoice(this.localPendingSales[0].id, null);\r\n          this.focus_invoice = this.localPendingSales[0];\r\n        }\r\n        \r\n        console.log(\"Pending sales after payment:\", this.localPendingSales);\r\n        // close \r\n        this.isPaymentModalOpen = false;\r\n        \r\n        const mess_ = \"To ha n #\" + payload.code + \" thnh cng!\";\r\n        this.triggerAlert(mess_, 5000);\r\n        \r\n      },\r\n\r\n      openPaymentModal() {\r\n        this.focus_invoice = JSON.parse(JSON.stringify(this.focus_invoice));\r\n        this.isPaymentModalOpen = true;\r\n      },\r\n\r\n      limit_text(text, maxLength) {\r\n        if (text.length <= maxLength) {\r\n          return text;\r\n        }\r\n        return text.slice(0, maxLength) + '...';\r\n      },\r\n\r\n      select_focus_customer(customer) {\r\n        // console.log(\"Selected customer:\", customer);\r\n        this.focus_invoice.customer = customer;\r\n        this.handleUpdateItem(this.focus_invoice);\r\n        // clear search input\r\n        document.querySelector('.customer-search-input').value = '';\r\n      },\r\n\r\n      applyProductFilter(filterCriteria) {\r\n        // console.log(\"Applying product filter with criteria:\", filterCriteria);\r\n        // window.alert(\"Filter applied! (Functionality to be implemented)\");\r\n        // window.alert(JSON.stringify(filterCriteria));\r\n        this.productGroupFilter = filterCriteria;\r\n        // Implement filtering logic based on filterCriteria\r\n        // For example, filter by category, price range, etc.\r\n      },\r\n\r\n      formatPrice(value) {\r\n        return new Intl.NumberFormat('vi-VN').format(value);\r\n      },\r\n\r\n      search_input_focus(event) {\r\n        // console.log(\"Input focused\");\r\n        // console.log(event);\r\n        event.target.select();\r\n      },\r\n\r\n      search_input_blur(event) {\r\n        // console.log(\"Input blurred\");\r\n        // get element with class product-search-results and hide it\r\n        document.querySelector('.product-search-results').classList.add('is-hidden');\r\n        // console.log(event);\r\n      }, \r\n\r\n      async fetchSurcharges() {\r\n        try {\r\n          const response = await axios.get('/surcharges/');\r\n          this.defaultSurcharges = response.data.filter(surcharge => surcharge.is_active);\r\n          // console.log('Fetched surcharges:', this.defaultSurcharges);\r\n        } catch (error) {\r\n          console.error('Error fetching surcharges:', error);\r\n        }\r\n      },\r\n\r\n      async search_input_change_cust(event) {\r\n\r\n        document.querySelector('.customer-search-results').classList.remove('is-hidden');\r\n        const query = event.target.value.toLowerCase();\r\n\r\n        await axios.get('/search_customers/', {\r\n          params: {\r\n            query: query, \r\n            exclude: 'SP_'\r\n          }\r\n        }).then(response => {\r\n          this.filteredCust = response.data;\r\n        }).catch(error => {\r\n          console.error('Error searching customers:', error);\r\n        });\r\n\r\n\r\n        // window.alert(\"Searching for customer: \" + query);\r\n      //   this.filteredCust = [{\r\n      //     id: 1,\r\n      //     code: 'CUST001',\r\n      //     name: 'Nguyen Van A',\r\n      //     phone: '0909123456'\r\n      //   },\r\n      //   {\r\n      //     id: 2,\r\n      //     code: 'CUST002',\r\n      //     name: 'Tran Thi B',\r\n      //     phone: '0909876543'\r\n      //   },\r\n      //   {\r\n      //     id: 3,\r\n      //     code: 'CUST003',\r\n      //     name: 'Le Van C',\r\n      //     phone: '0912345678'\r\n      //   }\r\n      // ];\r\n      },\r\n\r\n      search_input_cust_blur(event) {\r\n        // console.log(\"Input blurred\");\r\n        // get element with class product-search-results and hide it\r\n        document.querySelector('.customer-search-results').classList.add('is-hidden');\r\n        // console.log(event);\r\n      },\r\n\r\n      search_input_change(event) {\r\n        // console.log(\"Input changed\");\r\n        // console.log(event);\r\n        document.querySelector('.product-search-results').classList.remove('is-hidden');\r\n        const query = event.target.value.toLowerCase();\r\n        this.searchQuery = query;\r\n        this.filteredProducts = this.products.filter(product => \r\n          product.name.toLowerCase().includes(query) || \r\n          product.code.toLowerCase().includes(query) \r\n        );\r\n      }, \r\n\r\n      async select_pending_invoice(id, event) {\r\n        // add selected to this li and remove from others\r\n        const items = document.querySelectorAll('.pending-sales-item');\r\n        items.forEach(item => {\r\n          item.classList.remove('selected');\r\n          // window.alert(\"Removed selected from item \" + item.getAttribute('data-sale-id'));\r\n        });\r\n        \r\n        // loop through add selected to data-sale-id = id\r\n        const targetItem = document.querySelector(`[data-sale-id=\"${id}\"]`);\r\n        // console.log(targetItem);\r\n        // window.alert(\"Selected invoice \" + id);\r\n        if (targetItem) {\r\n          targetItem.classList.add('selected');\r\n        }\r\n\r\n        // filter localPendingSales to get the one with id and assign to focus_invoice\r\n        // window.alert(\"Selected invoice \" + id);\r\n        this.focus_invoice = this.localPendingSales.find(sale => sale.id === id);\r\n        // console.log(\"Focus invoice set to:\", this.focus_invoice);\r\n        // window.alert(\"Focus invoice set to:\", this.focus_invoice);\r\n\r\n        // update local storage selected_invoice_id\r\n        localStorage.setItem('selected_invoice_id', id);\r\n\r\n        \r\n      }, \r\n\r\n      remove_pending_sale(event) {\r\n        event.stopPropagation(); // prevent triggering parent click event\r\n        // console.log(\"Remove pending sale\");\r\n        // console.log(event);\r\n        const index = Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode);\r\n        this.localPendingSales.splice(index, 1);\r\n        // update local storage\r\n\r\n        // check if localPendingSales is empty\r\n        if (this.localPendingSales.length === 0) {\r\n          this.focus_invoice = {};\r\n          localStorage.removeItem('selected_invoice_id');\r\n\r\n          // add a new pending sale\r\n          this.localPendingSales.push(this.sampleInvoice);\r\n          this.select_pending_invoice(this.localPendingSales[0].id, null);\r\n\r\n\r\n        } else {\r\n          // select first pending sale\r\n          this.select_pending_invoice(this.localPendingSales[0].id, null);\r\n        }\r\n\r\n        localStorage.setItem('pendingSales', JSON.stringify(this.localPendingSales));\r\n      },\r\n\r\n      async  add_new_pending_sale() {\r\n        // console.log(\"Add new pending sale\");\r\n        const newId = this.localPendingSales.length > 0 ? Math.max(...this.localPendingSales.map(sale => sale.id)) + 1 : 1;\r\n        // copy sampleInvoice and set id to newId\r\n        const newInvoice = JSON.parse(JSON.stringify(this.sampleInvoice));\r\n        newInvoice.id = newId;\r\n        // newInvoice.unique_code = 'INV-' + Date.now();\r\n\r\n        this.localPendingSales.push(newInvoice);\r\n\r\n        // update local storage\r\n        localStorage.setItem('pendingSales', JSON.stringify(this.localPendingSales));\r\n\r\n        // select the new pending sale\r\n        this.$nextTick(() => {\r\n          this.select_pending_invoice(newId, null);\r\n        });\r\n        // this.select_pending_invoice(newId, null);\r\n\r\n        // select the new pending sale\r\n        // this.focus_invoice = this.localPendingSales[this.localPendingSales.length - 1];\r\n\r\n      },\r\n\r\n      async handleUpdateItem(updatedInvoice) {\r\n\r\n        // console.log(\"Handling update for invoice:\", updatedInvoice);\r\n        // json partse object \r\n        // let parsed = JSON.stringify(updatedInvoice);\r\n\r\n        // window.alert(parsed);\r\n\r\n        // replace the invoice in localPendingSales with the updated one\r\n        const index = this.localPendingSales.findIndex(sale => sale.id === updatedInvoice.id);\r\n        if (index !== -1) {\r\n          this.localPendingSales.splice(index, 1, updatedInvoice);\r\n\r\n          // update local storage\r\n          localStorage.setItem('pendingSales', JSON.stringify(this.localPendingSales));\r\n          // console.log(\"Pending sales updated in local storage.\", this.localPendingSales);\r\n        }\r\n\r\n        // check if focus_invoice is the updated one, if so, update it\r\n        await this.select_pending_invoice(updatedInvoice.id, null);\r\n\r\n        // console.log(\"Updated invoice:\", this.focus_invoice);\r\n        // console.log(\"Item updated in cart\");\r\n        // Additional logic can be added here if needed\r\n        // console.log(this.localPendingSales);\r\n      },\r\n\r\n      async update_total_and_quantity() {\r\n        if (!this.focus_invoice || !Array.isArray(this.focus_invoice.items)) return;\r\n        let total = 0;\r\n        let totalItems = 0;\r\n        this.focus_invoice.items.forEach(item => {\r\n          total += (item.price || 0) * (item.quantity || 0);\r\n          totalItems += (item.quantity || 0);\r\n        });\r\n        this.focus_invoice.total = total;\r\n        this.focus_invoice.finalTotal = total - (this.focus_invoice.discount || 0) + (this.focus_invoice.totalSurcharge || 0);\r\n        this.focus_invoice.totalItems = totalItems;\r\n      },\r\n\r\n      remove_focus_customer() {\r\n        this.focus_invoice.customer = null;\r\n        this.handleUpdateItem(this.focus_invoice);\r\n      },\r\n\r\n      async add_product(product) {\r\n        // window.alert(\"Add product to cart\");\r\n        // console.log(product);\r\n        if (!product) return;\r\n        // Check if product already exists in cart\r\n        const existingItem = this.focus_invoice.items.find(item => item.code === product.code);\r\n        if (existingItem) {\r\n          existingItem.quantity += 1; // Increment quantity\r\n        } else {\r\n          this.focus_invoice.items.push({\r\n            code: product.code,\r\n            name: product.name,\r\n            price: product.price,\r\n            quantity: 1,\r\n            hasNote: false,\r\n            product_type: product.product_type,\r\n            package_details: product.package_details || null,\r\n            note: '',\r\n            isOpenPopover: false\r\n          });\r\n        }\r\n        await this.update_total_and_quantity();\r\n\r\n        await this.handleUpdateItem(this.focus_invoice);\r\n      },\r\n\r\n\r\n      async fetchProducts() {\r\n\r\n        try {\r\n          const response = await axios.get('/products/');\r\n          this.products = response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n          this.products = this.products.filter(product => product.is_active);\r\n\r\n        } catch (error) {\r\n          console.error('Error fetching products:', error);\r\n        }\r\n\r\n        \r\n      },\r\n\r\n      async fetchProductGroups() {\r\n        try {\r\n          const response = await axios.get('/productgroups/');\r\n          this.productGroups = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching product groups:', error);\r\n        }\r\n      },\r\n\r\n      async fetchLogicConfigs() {\r\n        // Fetch logic configurations from the backend\r\n        axios.get('/logicconfigs/')\r\n          .then(response => {\r\n            // console.log('Logic configurations response:', response.data);\r\n            \r\n            for (const config of response.data) {\r\n              // console.log(`Processing config - Key: ${config.key}, Value: ${JSON.parse(config.value)}`);\r\n              if (config.key === 'branch_name') {\r\n                this.branch = config.value;\r\n                // console.log('Branch name set to:', this.branch);\r\n              }\r\n\r\n              if (config.key === 'channels') {\r\n                this.channels = JSON.parse(config.value);\r\n                // console.log('Channels set to:', this.channels);\r\n              }\r\n\r\n              if (config.key === 'transportCompanies') {\r\n                this.transportCompanies = JSON.parse(config.value);\r\n                // console.log('Transport companies set to:', this.transportCompanies);\r\n              }\r\n\r\n              // Add more configuration keys as needed\r\n            }\r\n\r\n            // console.log('Fetched logic configurations:', this.logicConfigs);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error fetching logic configurations:', error);\r\n          });\r\n      },\r\n\r\n      async fetchProvincesWards() {\r\n      try {\r\n        const [provincesResponse, wardsResponse] = await Promise.all([\r\n          axios.get('/provinces/'),\r\n          axios.get('/wards/')\r\n        ]);\r\n        this.provinces = provincesResponse.data;\r\n        this.wards = wardsResponse.data;\r\n      } catch (error) {\r\n        console.error('Error fetching provinces or wards:', error);\r\n      }\r\n      }, \r\n\r\n      async fetchBankAccounts() {\r\n        try {\r\n          const response = await axios.get('/accounts/');\r\n          this.allAccounts = response.data.filter(account => account.is_active);\r\n          this.bankAccounts = this.allAccounts.filter(account => account.bank_name !== 'Cash');\r\n          // console.log('Fetched bank accounts:', this.bankAccounts);\r\n        } catch (error) {\r\n          console.error('Error fetching bank accounts:', error);\r\n        }\r\n      },\r\n\r\n      async fetchTransactionTypes() {\r\n        try {\r\n          const response = await axios.get('/transactiontypes/');\r\n          this.transactionTypes = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching transaction types:', error);\r\n        }\r\n      },\r\n\r\n\r\n    },\r\n    \r\n    created() {\r\n      // Simulate fetching products from an API\r\n      this.fetchProducts();\r\n      this.fetchProductGroups();\r\n      this.fetchLogicConfigs();\r\n      this.fetchProvincesWards() ;\r\n      this.fetchSurcharges();\r\n      this.fetchBankAccounts();\r\n      this.fetchTransactionTypes();\r\n\r\n      \r\n      // read pending sales from local storage\r\n      const pendingSales = localStorage.getItem('pendingSales');\r\n      if (pendingSales) {\r\n        this.localPendingSales = JSON.parse(pendingSales);\r\n        this.focus_invoice = this.localPendingSales[0];\r\n      } else {\r\n        // if no pending sales, create a new one\r\n        this.localPendingSales.push(this.sampleInvoice);\r\n        this.focus_invoice = this.localPendingSales[0];\r\n      }\r\n\r\n\r\n\r\n      // console.log(\"Pending Sales on created:\", this.localPendingSales);\r\n\r\n      \r\n\r\n    },\r\n\r\n    mounted() {\r\n      const localSelectedInvoiceId = localStorage.getItem('selected_invoice_id');\r\n      // window.alert(\"Loaded selected invoice ID: \" + localSelectedInvoiceId);\r\n      if (parseInt(localSelectedInvoiceId)) {\r\n        this.select_pending_invoice(parseInt(localSelectedInvoiceId), null);\r\n      } else {\r\n        this.focus_invoice = this.localPendingSales[0];\r\n      }\r\n\r\n      // this.focus_invoice = this.localPendingSales[0];\r\n      // console.log(\"Pending Sales Loaded:\", this.localPendingSales);\r\n      // console.log(\"Focus Invoice:\", this.focus_invoice);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n$size-sm: 4vh;\r\n$main-bg-color: rgb(253, 253, 253);\r\n\r\n.no-select {\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n}\r\n\r\n\r\n.home-page {\r\n  height: 100%;\r\n  display: flex ;\r\n  flex-direction: column;\r\n  background-color: $main-bg-color;\r\n\r\n  .page-header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    height: max($size-sm, 3rem);\r\n    background-color: $kv-primary;\r\n\r\n    .header-left {\r\n      display: flex;\r\n      flex-direction: row;\r\n      flex-grow: 4;\r\n      \r\n      .col-left-control {\r\n        display: flex;\r\n\r\n        .product-search {\r\n          // background-color: white;\r\n            min-width: 30rem;\r\n            position: relative;\r\n            height: 100%;\r\n            padding: 0.4rem 0 0.4rem 0.4rem;\r\n            flex-grow: 1;\r\n            display: flex;\r\n            max-width: 15vw;\r\n        }\r\n        .product-search > .place-holder {\r\n          min-width: 3rem;\r\n        }\r\n\r\n        \r\n        .product-search > input {\r\n          width: 100%;\r\n          height: 100%;\r\n          border: none;\r\n          border-radius: 0.3rem;\r\n          font-size: 1rem;\r\n          box-shadow: 0 0 0 0;\r\n          outline: none;\r\n          width: 100%;\r\n          \r\n        }\r\n\r\n        .product-search > i {\r\n          position: absolute;\r\n          left: 1rem;\r\n          z-index: 1;\r\n          color: gray;\r\n          \r\n          // Vertical Centering Logic\r\n          top: 50%;\r\n          transform: translateY(-50%); \r\n          \r\n          // Ensure the icon has a consistent width for horizontal centering\r\n          width: 1.5rem; \r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n\r\n        .carts-tab {\r\n          flex: 1;\r\n          max-width: 70vw;\r\n\r\n          .pending-sales-list {\r\n            display: flex ;\r\n            flex-direction: row;\r\n            padding: 0.3rem 0 0 0 ;\r\n            height: 100%;\r\n            user-select: none;           /* Modern browsers */\r\n            -webkit-user-select: none;   /* Safari */\r\n            -moz-user-select: none;      /* Firefox */\r\n            -ms-user-select: none;       /* Legacy IE */\r\n          }\r\n          .pending-sales-item:hover {\r\n            background-color: rgba(0, 0, 0, 0.285);\r\n            cursor: pointer;\r\n          }\r\n\r\n          .new_pending_sale > h5 {\r\n            padding-right: 0.4rem ;\r\n          }\r\n\r\n          .pending-sales-item {\r\n            border-left: rgba(0, 0, 0, 0.256) 0.7px solid;\r\n            border-radius: 0.3rem 0.3rem 0rem 0rem;\r\n            // margin-right: 0.5rem ;\r\n            padding-left: 0.75rem ;\r\n            padding-right: 0.55rem ;\r\n            display: flex;\r\n            height: 100%;\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);\r\n            // box-shadow: 1em 1em 2em rgba(0, 0, 0, 0.1);\r\n            // max-width: 10rem;\r\n\r\n            h5 {\r\n              margin: 0;              /* Remove default browser margin that pushes text down */\r\n              line-height: 1;         /* Ensures the text box is only as tall as the font */\r\n              font-size: 1rem;\r\n              display: flex;          /* Sometimes helps icons center better */\r\n              align-items: center;\r\n              color: white;\r\n            }\r\n\r\n            i {\r\n              cursor: pointer;\r\n              display: flex;          /* Sometimes helps icons center better */\r\n              align-items: center;\r\n              text-align: center;\r\n              color: white;\r\n              margin-left: 0.8rem;\r\n              // margin-left: 1rem;\r\n            }\r\n\r\n            i:hover {\r\n              color: red!important;\r\n              // background-color: red!important;\r\n            }\r\n          }\r\n\r\n          .pending-sales-item.selected {\r\n            background-color: $main-bg-color;\r\n            \r\n\r\n            h5 {\r\n              font-weight: bold;\r\n              color: black;\r\n            };\r\n\r\n            i {\r\n              color: black;\r\n            }\r\n          } \r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    .header-right {\r\n      display: flex;\r\n      flex-direction: row;\r\n      flex-grow: 1;\r\n      min-width: 15vw;\r\n      justify-content: flex-end;\r\n\r\n      .menu-toggle{\r\n        // menu-toggle\r\n          padding: 0.4rem 1.2rem 0.4rem 0.4rem;\r\n          display: flex;\r\n          align-items: center;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  .body-page{\r\n    flex: 1;\r\n    // background-color: red;\r\n    display: flex ;\r\n    flex-direction: row;\r\n    min-height: 0;\r\n    overflow: hidden;\r\n\r\n    .detail-box {\r\n      flex: 1;\r\n      // background-color: rgba(128, 128, 128, 1);\r\n      \r\n      margin: 0.3rem;\r\n      border-radius: 0.3rem;\r\n      height: calc(100% - 0.6rem); // Account for margin (0.3 top + 0.3 bottom)\r\n    }\r\n\r\n    .shortcut-box {\r\n      min-width: 30rem;\r\n      width: 35rem;\r\n      // flex: 1;\r\n      background-color: $main-bg-color;\r\n      margin: 0.3rem;\r\n      border-radius: 0.3rem;\r\n      height: calc(100% - 0.6rem); // Account for margin\r\n      // Flex column to stack Header -> List -> Footer\r\n      display: flex;\r\n      flex-direction: column;\r\n      \r\n      // Stop this specific box from pushing boundaries\r\n      overflow: hidden; \r\n      // height: 100%;\r\n\r\n      .shortcut-box-header {\r\n        flex-shrink: 0; // 1. Never shrink the header\r\n        \r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: space-between;\r\n        margin-top: 0.3rem;\r\n        margin-left: 0.3rem;\r\n        padding: 0rem 0.4rem 0 7px;\r\n        // border-bottom: 1px solid lightgray;\r\n        \r\n        .search_filter-control{\r\n          // margin-left: 1rem;\r\n          display: flex;\r\n          flex-direction: row;\r\n          height: 2.5rem;\r\n          \r\n          width: 70%;\r\n\r\n          .customer-search {\r\n              // display: none !important;\r\n            // background-color: white;\r\n              // min-width: 20rem;\r\n              // width: 70%;\r\n              position: relative;\r\n              height: 100%;\r\n              padding: 0.2rem 0 0.2rem 0.2rem;\r\n              flex-grow: 1;\r\n              display: flex;\r\n              // max-width: 15vw;\r\n\r\n              input {\r\n                width: 100%;\r\n                height: 100%;\r\n                border: 1px solid gray;\r\n                border-radius: 0.3rem;\r\n                font-size: 1rem;\r\n                box-shadow: 0 0 0 0;\r\n                outline: none;\r\n                width: 100%;\r\n                \r\n              }\r\n\r\n              i.fa-search {\r\n                position: absolute;\r\n                left: 1rem;\r\n                z-index: 1;\r\n                color: gray;\r\n                \r\n                // Vertical Centering Logic\r\n                top: 50%;\r\n                transform: translateY(-50%); \r\n                \r\n                // Ensure the icon has a consistent width for horizontal centering\r\n                width: 1.5rem; \r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n              }\r\n\r\n              i.fa-plus {\r\n                position: absolute;\r\n                right: 1rem;\r\n                z-index: 1;\r\n                color: $kv-primary;\r\n                \r\n                // Vertical Centering Logic\r\n                top: 50%;\r\n                transform: translateY(-50%); \r\n                \r\n                // Ensure the icon has a consistent width for horizontal centering\r\n                width: 1.5rem; \r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                cursor: pointer;\r\n              }\r\n\r\n              .customer-search-results {\r\n                position: absolute;\r\n                max-height: 50vh;\r\n                height: auto;\r\n                top: 100%;\r\n                left: 0;\r\n                right: 0;\r\n                background-color: white;\r\n                border: 1px solid #ccc;\r\n                border-radius: 0.3rem;\r\n                overflow-y: auto;\r\n                z-index: 10;\r\n                box-shadow: 0 4px 8px rgba(0,0,0,0.1);\r\n                margin-top: 0.2rem;\r\n                margin-left: 0.2rem;\r\n                padding-top: 0.2rem;\r\n\r\n                &.is-hidden {\r\n                  display: none;\r\n                }\r\n\r\n                .suggestions-item {\r\n                  padding: 0.5rem 1rem;\r\n                  cursor: pointer;\r\n\r\n                  &:hover {\r\n                    background-color: #f0f0f0;\r\n                  }\r\n\r\n                  .suggestions-item-info {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                  }\r\n                }\r\n              }\r\n          }\r\n\r\n          .customer-selected {\r\n            position: relative;\r\n            height: 100%;\r\n            padding: 0.2rem 0 0.2rem 0.2rem;\r\n            flex-grow: 1;\r\n            display: flex;\r\n\r\n            span {\r\n              text-align: left;\r\n              border: 1px solid gray;\r\n              // outline: none;\r\n              background-color: rgba(gray, 0.1);\r\n              border-radius: 0.3rem;\r\n              width: 100%;\r\n              height: 100%;\r\n              font-size: 1rem;\r\n              color: $kv-primary;\r\n              font-weight: bold;\r\n              display: flex;\r\n              align-items: center;\r\n\r\n            }\r\n\r\n            i.fa-times {\r\n                position: absolute;\r\n                right: 1rem;\r\n                z-index: 1;\r\n                color: $kv-primary;\r\n                \r\n                // Vertical Centering Logic\r\n                top: 50%;\r\n                transform: translateY(-50%); \r\n                \r\n                // Ensure the icon has a consistent width for horizontal centering\r\n                width: 1.5rem; \r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                cursor: pointer;\r\n              }\r\n              \r\n          }\r\n          \r\n\r\n        }\r\n\r\n        .product-header-right {\r\n          display: flex;       // 2. Make this a flex container\r\n          align-items: center; // 3. Vertically center items inside this container\r\n          height: 100%;\r\n          i {\r\n            // Removed absolute positioning logic\r\n            z-index: 1;\r\n            color: $kv-primary;\r\n            width: 1.5rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            cursor: pointer;\r\n            \r\n            // Optional: Add margin if you want spacing from the edge\r\n            margin-right: 1rem;\r\n          }\r\n        }\r\n      }\r\n\r\n      .product-short-list {\r\n        // 2. Grow to fill space between Header and Payment\r\n        flex: 1; \r\n        \r\n        // 3. Create a boundary context for the absolute child\r\n        position: relative; \r\n        \r\n        // 4. Ensure it doesn't bleed out\r\n        overflow: hidden; \r\n\r\n        // background-color: rgb(168, 94, 94);\r\n        margin: 0.3rem;\r\n        border-radius: 0.3rem;\r\n\r\n        .product-grid-container {\r\n\r\n          // 5. THE FIX: Detach from flow and force-fit to parent edges\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          \r\n          // 6. Scroll happens here\r\n          overflow-y: auto; \r\n          \r\n          padding: 10px;\r\n\r\n          .product-list {\r\n            display: grid;\r\n            /* Auto-fill columns, min 140px wide */\r\n            grid-template-columns: repeat(auto-fill, minmax(10rem, 1fr));\r\n            gap: 10px;\r\n            padding-bottom: 10px;\r\n            min-height: 0;\r\n\r\n            // Add padding at bottom so last items aren't cut off by scrollbar\r\n            padding-bottom: 10px;\r\n\r\n            /* Alternate placeholder colors for product cards */\r\n            .product-item:nth-child(7n+1) .placeholder-icon { color: rgba(255,44,82,0.6); }\r\n            .product-item:nth-child(7n+2) .placeholder-icon { color: rgba(255,186,7,0.6); }\r\n            .product-item:nth-child(7n+3) .placeholder-icon { color: rgba(76,176,80,0.6); }\r\n            .product-item:nth-child(7n+4) .placeholder-icon { color: rgba(33,183,192,0.6); }\r\n            .product-item:nth-child(7n+5) .placeholder-icon { color: rgba(136,97,214,0.6); }\r\n            .product-item:nth-child(7n+6) .placeholder-icon { color: rgba(255,107,0,0.6); }\r\n            .product-item:nth-child(7n)   .placeholder-icon { color: rgba(35,127,205,0.6); }\r\n            \r\n\r\n            .product-item.is-not-hidden {\r\n              display: flex !important;\r\n            }\r\n\r\n            .product-item {\r\n              background: white;\r\n              border: 1px solid #ddd;\r\n              border-radius: 4px;\r\n              cursor: pointer;\r\n              overflow: hidden;\r\n              transition: all 0.2s ease;\r\n              display: flex;\r\n              flex-direction: row;\r\n              height: 5rem;\r\n\r\n              .product-card-top {\r\n                // height: 3rem;\r\n                position: relative;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                background-color: #eee;\r\n              }\r\n\r\n              .product-card-bottom {\r\n                padding: 8px;\r\n                text-align: center;\r\n                flex-grow: 1;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: start;\r\n                justify-content: space-around;\r\n\r\n                .product-name {\r\n                  margin: 0;\r\n                  font-size: 0.9rem;\r\n                  color: #333;\r\n                  line-height: 1.3;\r\n                  /* Limit to 2 lines */\r\n                  // display: -webkit-box;\r\n                  -webkit-line-clamp: 2;\r\n                  -webkit-box-orient: vertical;\r\n                  overflow: hidden;\r\n                  display: flex;\r\n                  align-items: start;\r\n                  justify-content: flex-end; /* Align text to the right */\r\n                  text-align: left;\r\n                }\r\n\r\n                .product-price {\r\n                  margin: 0;\r\n                  font-size: 14px;\r\n                  font-weight: bold;\r\n                  color: $kv-primary;\r\n                }\r\n              }\r\n\r\n              .placeholder-icon {\r\n                font-size: 2rem;\r\n                user-select: none;\r\n                -webkit-user-select: none;\r\n                -moz-user-select: none;\r\n                -ms-user-select: none;\r\n                /* Default color, will be overridden below */\r\n              }\r\n\r\n              \r\n            }\r\n\r\n            .product-item:hover {\r\n              box-shadow: 0 4px 10px rgba(0,0,0,0.15);\r\n              border-color: #0090da;\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        \r\n      }\r\n\r\n      .payment-action {\r\n        background-color: white;\r\n        margin: 0.3rem;\r\n        border-radius: 0.3rem;\r\n        flex-shrink: 0; // Prevent footer from shrinking\r\n        z-index: 2; // Ensure it stays on top visually\r\n\r\n        .payment-button {\r\n          width: 100%;\r\n          background-color: $kv-primary;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 0.3rem;\r\n          padding: 0.8rem 0;\r\n          font-size: 1.2rem;\r\n          font-weight: bold;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .payment-button:disabled {\r\n          background-color: gray;\r\n          cursor: not-allowed;\r\n        }\r\n      }\r\n      \r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\n.number-blue {\r\n  color: $kv-primary;\r\n  // text-decoration: solid;\r\n  font-weight: bold;\r\n}\r\n\r\n.c-input{\r\n  background-color: white;\r\n  color: black;\r\n  padding-left: 2.5rem;\r\n}\r\n\r\n.c-input.edit-cust{\r\n  cursor: pointer;\r\n}\r\n\r\n.suggestions-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0.5rem 1rem 0.5rem 1rem;\r\n  border-radius: 0.5rem;\r\n  margin: 0rem 0.2rem 0.3rem 0.2rem;\r\n}\r\n\r\n.suggestions-item:hover {\r\n  background-color: lightgray;\r\n  cursor: pointer;\r\n}\r\n\r\n.suggestions-item-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.product-search-results{\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 0;\r\n  width: 100%;\r\n  background-color: rgba($main-bg-color, 1);\r\n  z-index: 2;\r\n  border-radius: 0 0 0.3rem 0.3rem;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.514);\r\n  margin-left: 0.3rem;\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n\r\n.user-name{\r\n  margin-right: 2rem;\r\n  padding-right: 1rem;\r\n  color: white;\r\n  // font-weight: bold;\r\n  margin-right: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n    width: 0.4em;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n    -webkit-border-radius: 5px;\r\n    border-radius: 5px;\r\n}\r\n\r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 5px;\r\n    border-radius: 5px;\r\n    background: rgba(160, 160, 160, 0.463); \r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.352); \r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"menu-container\" >\r\n        <div :class=\"['dropdown', { 'is-active': isOpen }]\" v-click-outside=\"closeMenu\">\r\n        <div class=\"dropdown-trigger\">\r\n            <button class=\"button\" @click=\"isOpen = !isOpen\" aria-haspopup=\"true\">\r\n            <span class=\"icon\">\r\n                <i class=\"fas fa-bars\"></i>\r\n            </span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\r\n            <div class=\"dropdown-content\">\r\n            <a v-for=\"item in menuItems\" \r\n                :key=\"item.text\" \r\n                href=\"#\" \r\n                class=\"dropdown-item\"\r\n                @click.prevent=\"handleAction(item.action)\">\r\n                \r\n                <span class=\"icon-text\">\r\n                <span class=\"icon has-text-info\">\r\n                    <i :class=\"item.icon\"></i>\r\n                </span>\r\n                <span>{{ item.text }}</span>\r\n                </span>\r\n            </a>\r\n\r\n            <hr class=\"dropdown-divider\">\r\n\r\n            <a class=\"dropdown-item has-text-danger\" @click.prevent=\"logout\">\r\n                <span class=\"icon-text\">\r\n                <span class=\"icon\">\r\n                    <i class=\"fas fa-sign-out-alt\"></i>\r\n                </span>\r\n                <span>ng xut</span>\r\n                </span>\r\n            </a>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'menu_toggle',\r\n  props: {\r\n    msg: String\r\n  },\r\n  emits: ['menu-action'],\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      menuItems: [\r\n        { text: 'Qun l', icon: 'fas fa-chart-pie', action: 'viewReport' },\r\n        { text: 'Lp phiu thu', icon: 'fas fa-edit', action: 'receipt' },\r\n        { text: 'Lp phiu chi', icon: 'fas fa-edit', action: 'payment' },\r\n        { text: 'Cht hng', icon: 'fas fa-eye', action: 'date_end_inventory' },\r\n        { text: 'Cht tin', icon: 'fas fa-info-circle', action: 'date_end_cash_balance' }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    closeMenu() {\r\n      this.isOpen = false;\r\n    },\r\n    handleAction(action) {\r\n      console.log(\"Triggered:\", action);\r\n      this.$emit('menu-action', action);\r\n      this.isOpen = false; // Close after click\r\n    },\r\n    logout() {\r\n      this.$store.dispatch('removeToken'); // Clear token from Vuex store\r\n      this.$router.push('/signin'); // Redirect to SignIn page\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n    .menu-container {\r\n//   padding: 10px;\r\n    .dropdown {\r\n        padding: 0 0 0 0;\r\n    }\r\n    button {\r\n        padding: 0 0 0 0;\r\n        background-color: transparent;\r\n        border: none;\r\n    }\r\n\r\n    button:hover {\r\n        // background-color: transparent;\r\n        color: #000000;\r\n    }\r\n  .dropdown-menu {\r\n    min-width: 250px;\r\n    right: 0; // Align to the right like dropdown-menu-right\r\n    left: auto;\r\n  }\r\n\r\n  .dropdown-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0.6rem 1rem;\r\n    font-size: 0.95rem;\r\n\r\n    .icon {\r\n      margin-right: 15px;\r\n      width: 20px;\r\n      text-align: center;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: #f5f5f5;\r\n      color: #0070F4; // Your primary blue\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./menu_toogle.vue?vue&type=template&id=27724d1a&scoped=true\"\nimport script from \"./menu_toogle.vue?vue&type=script&lang=js\"\nexport * from \"./menu_toogle.vue?vue&type=script&lang=js\"\n\nimport \"./menu_toogle.vue?vue&type=style&index=0&id=27724d1a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-27724d1a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"modal-overlay\" @click=\"closeForm\">\r\n    <div class=\"customer-window\" @click.stop>\r\n      <div class=\"window-header \">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ props.customer ? 'Cp nht khch hng' : 'Thm khch hng' }}</span>\r\n          <span class=\"branch-info\"> Chi nhnh to: <span> {{ props.currentBranch }} </span></span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"closeForm\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li :class=\"{ active: activeTab === 'general' }\">\r\n              <a href=\"#\" @click.prevent=\"activeTab = 'general'\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div v-if=\"activeTab === 'general'\" class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">M khch hng</label>\r\n                  <input type=\"text\" v-model=\"form.code\" placeholder=\"M mc nh\" :disabled=\"type!=='new'\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"required no-select\">Tn khch hng</label>\r\n                  <input type=\"text\" v-model=\"form.name\" placeholder=\"Bt buc\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">in thoi</label>\r\n                  <input type=\"text\" v-model=\"form.phone_number\" placeholder=\"Bt buc\" @input=\"handlePhoneNumberInput\"/>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">a ch</label>\r\n                  <textarea v-model=\"form.address\" rows=\"2\" placeholder=\"S nh, ta nh, ng, ng\"></textarea>\r\n                </div>\r\n                \r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Khu vc</label>\r\n                  <div class=\"autocomplete-wrapper\">\r\n                    <input \r\n                      ref=\"locationInputRef\"\r\n                      type=\"text\" \r\n                      v-model=\"form.province_name\" \r\n                      placeholder=\"Chn Tnh/TP\"\r\n                      @focus=\"openDropdown('location')\"\r\n                      @input=\"openDropdown('location')\"\r\n                      @blur=\"handleBlur('location')\"\r\n                      @change=\"handleChangeLocation\"\r\n                    />\r\n                    \r\n                    <Teleport to=\"body\">\r\n                      <ul \r\n                        v-if=\"showLocationList && filteredRegions.length\" \r\n                        class=\"autocomplete-list\"\r\n                        :style=\"dropdownStyle\"\r\n                      >\r\n                        <li \r\n                          v-for=\"region in filteredRegions\" \r\n                          :key=\"region.id\"\r\n                          @mousedown.prevent=\"selectLocation(region)\"\r\n                        >\r\n                          {{ region.name }}\r\n                        </li>\r\n                      </ul>\r\n                    </Teleport>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Phng x</label>\r\n                  <div class=\"autocomplete-wrapper\">\r\n                    <input \r\n                      ref=\"wardInputRef\"\r\n                      type=\"text\" \r\n                      v-model=\"form.ward_name\" \r\n                      placeholder=\"Chn Phng/X\"\r\n                      :disabled=\"!form.province\"\r\n                      @focus=\"openDropdown('ward')\"\r\n                      @input=\"openDropdown('ward')\"\r\n                      @blur=\"handleBlur('ward')\"\r\n                    />\r\n\r\n                    <Teleport to=\"body\">\r\n                      <ul \r\n                        v-if=\"showWardList && filteredWards.length\" \r\n                        class=\"autocomplete-list\"\r\n                        :style=\"dropdownStyle\"\r\n                      >\r\n                        <li \r\n                          v-for=\"ward in filteredWards\" \r\n                          :key=\"ward.id\"\r\n                          @mousedown.prevent=\"selectWard(ward)\"\r\n                        >\r\n                          {{ ward.name }}\r\n                        </li>\r\n                      </ul>\r\n                    </Teleport>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div class=\"col-right\">\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Ngy sinh</label>\r\n                  <div class=\"row-inputs\">\r\n                    <input type=\"date\" v-model=\"form.birthdate\" class=\"input-date\" />\r\n                    <div class=\"gender-radios\">\r\n                      <label><input type=\"radio\" :value=\"true\" v-model=\"form.gender\" /> Nam</label>\r\n                      <label><input type=\"radio\" :value=\"false\" v-model=\"form.gender\" /> N</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Email</label>\r\n                  <input type=\"email\" v-model=\"form.email\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Facebook</label>\r\n                  <input type=\"text\" v-model=\"form.facebook\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Ghi ch</label>\r\n                  <textarea v-model=\"form.comments\" rows=\"3\"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button class=\"btn btn-outline\" @click=\"closeForm\">\r\n            <i class=\"icon-ban\"></i> B qua\r\n          </button>\r\n          <button class=\"btn btn-primary new-button\" @click=\"saveCustomer\" :disabled=\"!form.name.trim() || !form.phone_number.trim() || !form.address.trim() || !form.province_name.trim()\">\r\n            <i class=\"icon-save\"></i> Lu\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, defineProps, computed, nextTick, watch } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst activeTab = ref('general');\r\nconst emit = defineEmits(['close', 'saved']);\r\n\r\nconst props = defineProps({\r\n  currentBranch: {\r\n    type: String,\r\n    default: 'Chi nhnh Gia'\r\n  },\r\n  customer: {\r\n    type: Object,\r\n    default: null\r\n  }, \r\n  regionList: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  wardList: {\r\n    type: Array,\r\n    default: () => []\r\n  }, \r\n  type: {\r\n    type: String,\r\n    default: 'new' // or 'edit'\r\n  }\r\n});\r\n\r\n\r\n\r\nconst defaultForm = () => ({\r\n  code: '',\r\n  name: '',\r\n  phone_number: '',\r\n  address: '',\r\n  location: '', // region id\r\n  locationName: '', // region name for display\r\n  ward: null, // ward id\r\n  ward_name: '', // ward name for display\r\n  province: null,\r\n  province_name: '',\r\n  // group: '',\r\n  birthdate: '',\r\n  gender: true,\r\n  email: '',\r\n  facebook: '',\r\n  comments: ''\r\n});\r\n\r\nfunction handlePhoneNumberInput(event) {\r\n  let value = event.target.value;\r\n  // Allow numbers, +, -, (, )\r\n  form.phone_number = value.replace(/[^0-9+\\-()]/g, '');\r\n}\r\n\r\n\r\nconst form = reactive(defaultForm());\r\n\r\n// --- Autocomplete Logic ---\r\nconst showLocationList = ref(false);\r\nconst showWardList = ref(false);\r\n\r\n// Refs for the inputs so we can calculate position\r\nconst locationInputRef = ref(null);\r\nconst wardInputRef = ref(null);\r\n\r\n// Reactive style object for the dropdown\r\nconst dropdownStyle = reactive({\r\n  top: '0px',\r\n  left: '0px',\r\n  width: '0px',\r\n  display: 'block' // Required for teleport\r\n});\r\n\r\n// Calculate position based on the input element\r\nconst updateDropdownPosition = (inputElement) => {\r\n  if (!inputElement) return;\r\n  \r\n  const rect = inputElement.getBoundingClientRect();\r\n  dropdownStyle.top = `${rect.bottom + window.scrollY}px`; // Add scrollY for safety\r\n  dropdownStyle.left = `${rect.left + window.scrollX}px`;\r\n  dropdownStyle.width = `${rect.width}px`;\r\n};\r\n\r\nconst openDropdown = (type) => {\r\n  // Close others first\r\n  showLocationList.value = false;\r\n  showWardList.value = false;\r\n\r\n  nextTick(() => {\r\n    if (type === 'location') {\r\n      console.log('Opening location dropdown');\r\n      updateDropdownPosition(locationInputRef.value);\r\n      showLocationList.value = true;\r\n    } else if (type === 'ward') {\r\n      updateDropdownPosition(wardInputRef.value);\r\n      showWardList.value = true;\r\n    }\r\n  });\r\n};\r\n\r\n// --- Regions ---\r\nconst filteredRegions = computed(() => {\r\n  // console.log('Filtering regions with query:', form.province_name);\r\n  const query = form.province_name ? form.province_name.toLowerCase() : '';\r\n  // console.log('Filtering regions with query:', query);\r\n  // console.log('Total regions available:', props.regionList);\r\n  if (!query) return props.regionList || [];\r\n  return (props.regionList || []).filter(r => r.name.toLowerCase().includes(query));\r\n});\r\n\r\nfunction selectLocation(region) {\r\n  form.province = region.id;\r\n  form.province_name = region.name;\r\n  form.ward = null;\r\n  form.ward_name = '';\r\n  showLocationList.value = false;\r\n}\r\n\r\nfunction handleChangeLocation() {\r\n  // form.province_id = null;\r\n  form.ward_id = null;\r\n  form.ward = '';\r\n}\r\n\r\nconst filteredWards = computed(() => {\r\n  const queryWard = form.ward_name ? form.ward_name.toLowerCase() : '';\r\n  // console.log('Filtering wards with query:', queryWard);\r\n  // console.log('Total wards available:', props.wardList);\r\n  // console.log('Current selected province:', form.province);\r\n\r\n  let wardsToFilter = props.wardList || [];\r\n\r\n  // If a province is selected, filter by province first\r\n  if (form.province) {\r\n    wardsToFilter = wardsToFilter.filter(w => w.province === form.province);\r\n  }\r\n\r\n  // Always filter by the ward name query\r\n  return wardsToFilter.filter(w => w.name.toLowerCase().includes(queryWard));\r\n});\r\n\r\nfunction selectWard(ward) {\r\n  form.ward = ward.id;\r\n  form.ward_name = ward.name;\r\n  showWardList.value = false;\r\n}\r\n\r\n// --- UI Helpers ---\r\nfunction handleBlur(type) {\r\n  setTimeout(() => {\r\n    if (type === 'location') showLocationList.value = false;\r\n    if (type === 'ward') showWardList.value = false;\r\n  }, 200);\r\n}\r\n\r\n// --- Standard Actions ---\r\n\r\nconst saveCustomer = async () => {\r\n  //  check if old customer or new]\r\n  // send request to backend /customers/ \r\n\r\n  const customerData = { ...form };\r\n\r\n  // remove province_name and ward_name before sending\r\n  // customerData.address =  customerData.address + ', ' + customerData.ward_name + ', ' + customerData.province_name;\r\n  // delete customerData.province_name;\r\n  // delete customerData.ward_name;\r\n  \r\n  if (props.type === 'edit') {\r\n    // update \r\n    delete customerData.province_name;\r\n    delete customerData.ward_name;\r\n    await axios.put(`/customers/${props.customer.id}/`, customerData)\r\n      .then(response => {\r\n        console.log(\"Customer updated:\", response.data);\r\n        emit('saved', response.data);\r\n        emit('close');\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error updating customer:\", error);\r\n        window.alert(\"Li cp nht khch hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n      });\r\n  } else {\r\n    // create new\r\n    // customerData.address =  customerData.address + ', ' + customerData.ward_name + ', ' + customerData.province_name;\r\n    delete customerData.province_name;\r\n    delete customerData.ward_name;\r\n    await axios.post('/customers/', customerData)\r\n      .then(response => {\r\n        console.log(\"Customer created:\", response.data);\r\n        emit('saved', response.data);\r\n        emit('close');\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error creating customer:\", error);\r\n        window.alert(\"Li to khch hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n      });\r\n  }\r\n   \r\n\r\n};\r\n\r\nconst closeForm = () => {\r\n  emit('close');\r\n};\r\n\r\n// Ensure locationName is synced when editing\r\nonMounted(() => {\r\n  if (props.customer) {\r\n    Object.assign(form, defaultForm(), props.customer);\r\n    if (props.customer.province) {\r\n      const region = props.regionList.find(r => r.id === props.customer.province);\r\n      if (region) form.province_name = region.name;\r\n    }\r\n    if (props.customer.ward) {\r\n      const ward = props.wardList.find(w => w.id === props.customer.ward);\r\n      if (ward) form.ward_name = ward.name;\r\n    }\r\n  } else {\r\n    Object.assign(form, defaultForm());\r\n  }\r\n});\r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  $kv-primary: #0070F4;\r\n/* Reset & Layout */\r\n\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n\r\n.no-select {\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n\r\n}\r\n\r\ninput, textarea, select {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n\r\n\r\n$calendar-icon-url: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" viewBox=\"0 0 24 24\"><path fill=\"%23000\" d=\"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z\"/></svg>');\r\n\r\ninput[type=\"date\"] {\r\n  position: relative;\r\n  \r\n  &::-webkit-calendar-picker-indicator {\r\n    cursor: pointer;\r\n    \r\n    // 1. Hide the default native icon\r\n    background-image: none; \r\n    \r\n    // 2. Define the mask shape using the icon\r\n    -webkit-mask-image: $calendar-icon-url;\r\n    mask-image: $calendar-icon-url;\r\n    \r\n    -webkit-mask-repeat: no-repeat;\r\n    mask-repeat: no-repeat;\r\n    \r\n    -webkit-mask-position: center;\r\n    mask-position: center;\r\n    \r\n    -webkit-mask-size: 1rem;\r\n    mask-size: 1rem;\r\n\r\n    // 3. Set your specific color here!\r\n    background-color: black; \r\n    // font-size: 0.5rem;\r\n    \r\n    // Adjust size if needed\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0,0,0,0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.customer-window {\r\n  background: #fff;\r\n  width: 900px;\r\n  max-width: 95vw;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden; /* This no longer cuts off the dropdown */\r\n}\r\n\r\n/* Header */\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.branch-info {\r\n  font-weight: normal;\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n  margin-left: 10px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n/* Tabs */\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n}\r\n\r\n.tabs-nav li {\r\n  margin-right: 2px;\r\n}\r\n\r\n.tabs-nav a {\r\n  display: block;\r\n  padding: 10px 15px;\r\n  text-decoration: none;\r\n  color: #333;\r\n  border: 1px solid transparent;\r\n  border-bottom: none;\r\n  border-radius: 4px 4px 0 0;\r\n}\r\n\r\n.tabs-nav li.active a {\r\n  background: #fff;\r\n  border-color: #ddd;\r\n  border-bottom-color: #fff;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin-bottom: -1px;\r\n}\r\n\r\n/* Form Body */\r\n.form-body {\r\n  padding: 20px;\r\n  background: #fff;\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-layout {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.col-left, .col-right {\r\n  flex: 1;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n  -webkit-user-select: none; /* Safari */\r\n  -moz-user-select: none;    /* Firefox */\r\n  -ms-user-select: none;     /* IE10+/Edge */\r\n  user-select: none;   \r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.form-group input, \r\n.form-group select, \r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 6px 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.form-group input:focus, \r\n.form-group select:focus, \r\n.form-group textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\n/* AUTOCOMPLETE STYLES (UPDATED) */\r\n.autocomplete-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n/* This is now a GLOBAL class because of Teleport */\r\n.autocomplete-list {\r\n  position: fixed; /* Fixed to viewport */\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  z-index: 99999; /* Sit on top of everything */\r\n  box-shadow: 0 4px 10px rgba(0,0,0,0.2);\r\n  border-radius: 0 0 4px 4px;\r\n}\r\n\r\n.autocomplete-list li {\r\n  padding: 8px 10px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #eee;\r\n  font-size: 13px; /* Ensure font size matches */\r\n  color: #333;\r\n}\r\n\r\n.autocomplete-list li:hover {\r\n  background-color: #f0f8ff;\r\n  color: $kv-primary;\r\n}\r\n\r\n/* Specific Field Styles */\r\n.row-inputs {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  gap: 15px;\r\n}\r\n\r\n.input-date {\r\n  width: 140px !important;\r\n}\r\n\r\n.gender-radios {\r\n  display: flex;\r\n}\r\n\r\n.gender-radios label {\r\n  width: auto;\r\n  margin-right: 15px;\r\n  font-weight: normal;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.gender-radios label input {\r\n  margin-right: 5px;\r\n}\r\n\r\n/* Footer */\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color:   $kv-primary;\r\n  color: $kv-primary;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #0077b5;\r\n}\r\n</style>","import script from \"./AddCust.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddCust.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AddCust.vue?vue&type=style&index=0&id=fc3a5938&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fc3a5938\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"cart-products-component\">\r\n    <div class=\"welcome-page no-select\" v-if=\"!cartItems.length && !isRefund\">\r\n      <p>Cha c sn phm no trong gi hng</p>\r\n    </div>\r\n\r\n    <div class=\"carts-list no-select\" :class=\"{ 'show-duplicate-item': displayOptions.duplicateCartItem }\">\r\n      \r\n      <div \r\n        v-for=\"(item, index) in cartItems\" \r\n        :key=\"item.uuid\" \r\n        class=\"carts active\" \r\n        :class=\"{ 'carts-item-sortable': displayOptions.usingSortProduct }\"\r\n      >\r\n        <div class=\"carts-item\">\r\n          <div class=\"carts-left\">\r\n            <div class=\"cell-order\" v-if=\"displayOptions.numberOrder\">{{ index + 1 }}</div>\r\n            <div class=\"cell-actions carts-actions\">\r\n              <button class=\"btn-icon btn-icon-default\" @click=\"removeProduct(item)\" title=\"Xa hng ha\">\r\n                <i class=\"far fa-trash-alt\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"carts-content\">\r\n            <div class=\"carts-container\">\r\n              <div class=\"carts-content-info\">\r\n                <div class=\"carts-content-top\">\r\n                  <div class=\"cell-code\" v-if=\"displayOptions.code\">{{ item.code }}</div>\r\n                  <div class=\"cell-info\">\r\n                    <div class=\"info-content\">\r\n                      <span >{{ item.name }}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"cell-units\" v-if=\"item.units && item.units.length > 1\">\r\n                    <select v-model=\"item.selectedUnit\" @change=\"unitChanged(item)\" class=\"form-control\">\r\n                      <option v-for=\"u in item.units\" :key=\"u.id\" :value=\"u.id\">{{ u.name }}</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"carts-content-bottom\">\r\n                  <div class=\"cell-quantity\">\r\n                    <div class=\"quantity quantity-sm\">\r\n                      <button type=\"button\" class=\"btn-icon btn-icon-bg-default down\" @click=\"updateQuantity(item, -1)\">\r\n                        <i class=\"fas fa-minus\"></i>\r\n                      </button>\r\n                      <input \r\n                        type=\"number\" \r\n                        v-model.number=\"item.quantity\" \r\n                        class=\"form-control form-control-sm input-white\"\r\n                        @change=\"onQuantityChange(item)\"\r\n                      />\r\n                      <button type=\"button\" class=\"btn-icon btn-icon-bg-default up\" @click=\"updateQuantity(item, 1)\">\r\n                        <i class=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"cell-change-price\" v-if=\"displayOptions.price\">\r\n                    <button class=\"form-control form-control-sm text-right no-select\" >\r\n                      {{ formatPrice(item.price) }}\r\n                    </button>\r\n                    <span class=\"sub-label label-discount\" v-if=\"item.discount > 0\">\r\n                      - {{ formatPrice(item.discount) }}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div class=\"cell-change-price\" v-if=\"displayOptions.total\">\r\n                    <div class=\"cell-total text-right\">\r\n                      <span class=\"cart-price-new\">{{ formatPrice(item.quantity * item.price) }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"carts-secondary cell-secondary\" v-if=\"item.hasNote || item.note\">\r\n              <div class=\"carts-note\">\r\n                <textarea \r\n                  class=\"form-control form-control-custom\" \r\n                  v-model=\"item.note\" \r\n                  placeholder=\"Ghi ch...\" \r\n                  rows=\"1\"\r\n                  @change=\"emit('update-invoice', props.focus_invoice)\"\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"cell-actions carts-actions\">\r\n            <!-- <button class=\"btn-icon btn-icon-default\" @click=\"duplicateCartItem(item)\" v-if=\"displayOptions.duplicateCartItem\">\r\n              <i class=\"fas fa-plus\"></i>\r\n            </button> -->\r\n            <button class=\"btn-icon btn-icon-default btn-more\" @click=\"togglePopover(item)\">\r\n              <i class=\"fas fa-ellipsis-v\"></i>\r\n            </button>\r\n            \r\n            <div \r\n              class=\"popover-menu\" \r\n              v-if=\"item.isOpenPopover\" \r\n              v-click-outside=\"() => closePopover(item)\"\r\n              >\r\n              <a @click=\"removeProduct(item)\"><i class=\"far fa-trash-alt\"></i> Xa hng ha</a>\r\n              <a @click=\"toggleNote(item)\"><i class=\"fa-regular fa-note-sticky\"></i> Ghi ch</a>\r\n              <!-- <a @click=\"viewDetail(item)\"><i class=\"far fa-info-circle\"></i> Xem chi tit</a> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"carts-item row-serial-child\" v-if=\"item.isSerial\">\r\n          <div class=\"carts-left\"></div> <div class=\"carts-content\">\r\n             <div class=\"carts-container\">\r\n                <div class=\"cell-name\">\r\n                   <div class=\"tags-input-wrapper\">\r\n                      <span v-for=\"(serial, idx) in item.serials\" :key=\"idx\" class=\"tag\">\r\n                        {{ serial }} <span @click=\"removeSerial(item, idx)\"></span>\r\n                      </span>\r\n                      <input \r\n                        type=\"text\" \r\n                        placeholder=\"Nhp Serial/Imei\" \r\n                        @keydown.enter=\"addSerial(item, $event)\"\r\n                      />\r\n                   </div>\r\n                </div>\r\n             </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"carts-footer no-select\">\r\n      <div class=\"carts-footer-left\" v-if=\"!displayOptions.isOnlineMode\">\r\n        <textarea\r\n          class=\"form-control form-control-custom note-cart\"\r\n          v-model=\"props.focus_invoice.note\"\r\n          placeholder=\"Ghi ch n hng\"\r\n          maxlength=\"4000\"\r\n          tabindex=\"1500\"\r\n          style=\"height: 43px;\"\r\n        ></textarea>\r\n      </div>\r\n      <div class=\"cart-footer-right\" v-if=\"displayOptions.saleScreenMode === 2 && !isRefund && !displayOptions.isWarrantyCart && !displayOptions.isOnlineMode\">\r\n        <div class=\"form-group-inline form-group-row form-group-row-sm\">\r\n          <label class=\"col-form-label no-select\">Tng tin hng</label>\r\n          <div class=\"col-form-wrap d-flex\">\r\n            <span class=\"text-bg-default\" v-if=\"displayOptions.useTotalQuantity\">{{ props.focus_invoice.totalItems }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group-inline form-group-row-sm form-group-price\">\r\n          <div class=\"form-control-plaintext text-right font-size-medium has-currency font-bold \">\r\n            {{ formatPrice(props.focus_invoice.total) }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed } from 'vue';\r\n// --- Cart Note ---\r\nconst cartNote = ref(\"\");\r\n\r\n// --- Cart Total and Quantity ---\r\n\r\n\r\n// --- Display Options Extension (for demo) ---\r\nconst displayOptions = reactive({\r\n  numberOrder: true,\r\n  code: true,\r\n  price: true,\r\n  total: true,\r\n  duplicateCartItem: true,\r\n  // showCartItemNote: false,\r\n  usingSortProduct: false\r\n});\r\n// Add these to displayOptions or replace with real logic as needed\r\nif (!('isOnlineMode' in displayOptions)) displayOptions.isOnlineMode = false;\r\nif (!('saleScreenMode' in displayOptions)) displayOptions.saleScreenMode = 2;\r\nif (!('isWarrantyCart' in displayOptions)) displayOptions.isWarrantyCart = false;\r\nif (!('useTotalQuantity' in displayOptions)) displayOptions.useTotalQuantity = true;\r\n\r\n// --- Props & Emits ---\r\nconst emit = defineEmits(['update-invoice']);\r\n\r\nconst props = defineProps({\r\n  focus_invoice: {\r\n    type: Object,\r\n    required: true,\r\n    // In a real app, default data usually comes from the parent, \r\n    // but we keep the mock here for standalone visualization.\r\n    default: () => ({\r\n          id: 1,\r\n          total: 40000,\r\n          totalItems: 1,\r\n          discount: 0,\r\n          finalTotal: 40000,\r\n          items: [\r\n            {\r\n              uuid: '1',\r\n              code: 'FP0011',\r\n              name: 'c g Teriyaki 150g',\r\n              price: 40000,\r\n              quantity: 1,\r\n              onHand: 6,\r\n              ordered: 45,\r\n              hasNote: false,\r\n              units: [{id: 1, name: 'Gi'}],\r\n              productType: 2,\r\n              actualProducts: [\r\n                {\r\n                  code: 'FP0011',\r\n                  quantity: 1\r\n                }\r\n              ],\r\n              isSerial: false,\r\n              note: '',\r\n              isOpenPopover: false\r\n            }\r\n          ]\r\n        })\r\n  }\r\n\r\n});\r\n\r\n// --- Mock Data (Replace with your Store/Props) ---\r\n\r\nconst cartItems = computed(() => props.focus_invoice.items || []);\r\n\r\n\r\n\r\nconst isRefund = ref(false);\r\n\r\n// --- Methods ---\r\n\r\nconst update_total_and_quantity = () => {\r\n  let total = 0;\r\n  let totalItems = 0;\r\n  cartItems.value.forEach(item => {\r\n    total += item.price * item.quantity;\r\n    totalItems += item.quantity;\r\n  });\r\n  props.focus_invoice.total = total;\r\n  props.focus_invoice.finalTotal = total - props.focus_invoice.discount;\r\n  props.focus_invoice.totalItems = totalItems;\r\n  emit('update-invoice', props.focus_invoice); // Notify parent of total/quantity change\r\n};\r\n\r\nconst vClickOutside = {\r\n  mounted(el, binding) {\r\n    el.clickOutsideEvent = (event) => {\r\n      // Check if the click was outside the el and its children\r\n      if (!(el === event.target || el.contains(event.target))) {\r\n        binding.value(event);\r\n      }\r\n    };\r\n    \r\n    // CRITICAL FIX: Wait 0ms to let the current click event finish \r\n    // before starting to listen for outside clicks.\r\n    setTimeout(() => {\r\n      document.addEventListener('click', el.clickOutsideEvent);\r\n    }, 0);\r\n  },\r\n  unmounted(el) {\r\n    document.removeEventListener('click', el.clickOutsideEvent);\r\n  },\r\n};\r\n\r\nconst removeProduct = (item) => {\r\n  const index = props.focus_invoice.items.indexOf(item);\r\n  if (index > -1) {\r\n    props.focus_invoice.items.splice(index, 1);\r\n    update_total_and_quantity();\r\n  }\r\n};\r\n\r\nconst formatPrice = (val) => {\r\n  return new Intl.NumberFormat('vi-VN').format(val);\r\n};\r\n\r\nconst updateQuantity = (item, delta) => {\r\n  // 1. Ensure we are working with a Number, not a String\r\n  console.log('Button clicked', delta); // Check browser console\r\n  const currentQty = Number(item.quantity) || 0;\r\n  const newVal = currentQty + delta;\r\n\r\n  // 2. Only update if valid\r\n  if (newVal > 0) {\r\n    item.quantity = newVal;\r\n    \r\n    // update the item quantity in the cart\r\n\r\n    // 3. Trigger the emit you defined in defineEmits\r\n    // This tells the parent component that data changed\r\n    update_total_and_quantity();\r\n  }\r\n\r\n  // \r\n};\r\n\r\nconst onQuantityChange = (item) => {\r\n  // 1. Force conversion to number to prevent future string issues\r\n  let val = Number(item.quantity);\r\n  \r\n  // 2. Validation logic\r\n  if (isNaN(val) || val < 1) {\r\n    val = 1;\r\n  }\r\n  \r\n  item.quantity = val;\r\n  \r\n  update_total_and_quantity();\r\n};\r\n\r\n\r\nconst unitChanged = (item) => {\r\n  console.log('Unit changed', item.selectedUnit);\r\n};\r\n\r\n// Updated togglePopover\r\nconst togglePopover = (item) => {\r\n  // 1. Close ALL other popovers first\r\n  props.focus_invoice.items.forEach(i => {\r\n    if (i !== item) i.isOpenPopover = false;\r\n  });\r\n\r\n  // 2. Toggle the current one\r\n  item.isOpenPopover = !item.isOpenPopover;\r\n};\r\n\r\nconst closePopover = (item) => {\r\n  if (item.isOpenPopover) {\r\n    item.isOpenPopover = false;\r\n  }\r\n};\r\n\r\nconst toggleNote = (item) => {\r\n  // displayOptions.showCartItemNote = !displayOptions.showCartItemNote;\r\n  if (item.hasNote) {\r\n    item.note = '';\r\n  }\r\n\r\n  item.hasNote = !item.hasNote;\r\n  // item.note = item.note || '';\r\n  // item.isOpenPopover = false;\r\n  closePopover(item);\r\n  emit('update-invoice', props.focus_invoice); // Notify parent of change\r\n};\r\n\r\n// Serial Logic\r\nconst addSerial = (item, event) => {\r\n  const val = event.target.value.trim();\r\n  if (val) {\r\n    if (!item.serials) item.serials = [];\r\n    item.serials.push(val);\r\n    event.target.value = '';\r\n  }\r\n};\r\n\r\nconst removeSerial = (item, index) => {\r\n  item.serials.splice(index, 1);\r\n};\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$border-color: #e1e1e1;\r\n$primary-color: #0090da;\r\n.no-select {\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n}\r\n\r\n.cart-products-component {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.welcome-page {\r\n  padding: 20px;\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n.carts-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 1rem;\r\n\r\n  /* Hide scrollbar for Chrome, Safari and Opera */\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n  /* Hide scrollbar for IE, Edge and Firefox */\r\n  -ms-overflow-style: none;  /* IE and Edge */\r\n  scrollbar-width: none;  /* Firefox */\r\n}\r\n\r\n.font-bold {\r\n  font-weight: bold;\r\n}\r\n\r\n.input-white {\r\n  background-color: white !important;\r\n  color: black !important;\r\n}\r\n\r\n.carts {\r\n  border-bottom: 1px solid $border-color;\r\n  // background: #fff;\r\n  \r\n  &.active {\r\n    // background-color: #f0f9ff; // Active highlight\r\n  }\r\n}\r\n\r\n.carts-item {\r\n  display: flex;\r\n  padding: 0.5rem 0rem 0.5rem 0rem;\r\n  border-radius: 4px;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n.carts-item:hover {\r\n  // border-color: rgba(0, 145, 218, 0.304);\r\n  border: #0090da 1px solid;\r\n  // $primary-color with 5% opacity\r\n}\r\n\r\n/* Left Column (Order & Delete) */\r\n.carts-left {\r\n  width: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-right: 1px solid #eee;\r\n  margin-right: 10px;\r\n  padding-right: 5px;\r\n}\r\n\r\n.cell-order {\r\n  // font-size: 12px;\r\n  // color: #888;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n/* Middle Content */\r\n.carts-content {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n\r\n.carts-content-top {\r\n  display: flex;\r\n  // justify-content: space-between;\r\n  margin-bottom: 10px;\r\n  \r\n  .cell-code {\r\n    width: 7vw;\r\n    // font-weight: bold;\r\n    // color: #555;\r\n    margin-right: 10px;\r\n    font-size: 1rem;\r\n    display: flex;\r\n    align-items: start;\r\n  }\r\n  \r\n  .info-content {\r\n    // font-weight: 500;\r\n    color: #333;\r\n    \r\n    .btn-inventory {\r\n      color: $primary-color;\r\n      margin-left: 5px;\r\n      cursor: pointer;\r\n      border: none;\r\n      background: none;\r\n    }\r\n  }\r\n\r\n  .cell-info {\r\n    flex-grow: 6;\r\n    display: flex;\r\n    align-items: start;\r\n  }\r\n}\r\n\r\n.carts-content-bottom {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* Quantity Stepper */\r\n.quantity-sm {\r\n  display: flex;\r\n  align-items: center;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  \r\n  .btn-icon {\r\n    width: 24px;\r\n    height: 24px;\r\n    border: none;\r\n    background: #f5f5f5;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 10px;\r\n    \r\n    &:hover { background: #e0e0e0; }\r\n  }\r\n  \r\n  input {\r\n    width: 40px;\r\n    text-align: center;\r\n    border: none;\r\n    outline: none;\r\n    font-size: 13px;\r\n    padding: 2px;\r\n    /* Hide spin buttons */\r\n    -moz-appearance: textfield;\r\n    &::-webkit-inner-spin-button, &::-webkit-outer-spin-button { \r\n      -webkit-appearance: none; \r\n      margin: 0; \r\n    }\r\n  }\r\n}\r\n\r\n.cell-change-price button {\r\n  background: none;\r\n  border: none;\r\n  color: $primary-color;\r\n  font-weight: bold;\r\n  cursor: auto;\r\n}\r\n\r\n.cart-price-new {\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n/* Notes Area */\r\n.carts-note textarea {\r\n  width: 100%;\r\n  border: none;\r\n  border-bottom: 1px solid #eee;\r\n  resize: none;\r\n  // font-size: 12px;\r\n  padding: 1rem 0 0 0;\r\n  outline: none;\r\n  \r\n  &:focus { border-bottom-color: $primary-color; }\r\n}\r\n\r\n/* Right Actions */\r\n.carts-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  margin-left: 10px;\r\n  position: relative; // For popover positioning\r\n}\r\n\r\n.btn-icon-default {\r\n  background: none;\r\n  border: 1px solid transparent;\r\n  color: #666;\r\n  width: 28px; \r\n  height: 28px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: flex; \r\n  align-items: center; \r\n  justify-content: center;\r\n  \r\n  &:hover {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n  }\r\n}\r\n\r\n/* Popover Menu */\r\n.popover-menu {\r\n  position: absolute;\r\n  right: 0;\r\n  top: calc(100% - 2rem); // Move the menu up by 10px\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  box-shadow: 0 4px 10px rgba(0,0,0,0.1);\r\n  border-radius: 4px;\r\n  z-index: 100;\r\n  width: 150px;\r\n  \r\n  a {\r\n    display: block;\r\n    padding: 8px 10px;\r\n    font-size: 13px;\r\n    color: #333;\r\n    cursor: pointer;\r\n    \r\n    &:hover { background: #f5f5f5; color: $primary-color; }\r\n    i { margin-right: 5px; width: 15px; }\r\n  }\r\n}\r\n\r\n/* Tags Input (Serial) */\r\n.tags-input-wrapper {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 5px;\r\n  border: 1px solid #ddd;\r\n  padding: 5px;\r\n  border-radius: 4px;\r\n  background: #f9f9f9;\r\n  \r\n  .tag {\r\n    background: #e0e0e0;\r\n    padding: 2px 6px;\r\n    border-radius: 3px;\r\n    font-size: 12px;\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    span {\r\n      margin-left: 5px;\r\n      cursor: pointer;\r\n      color: #999;\r\n      &:hover { color: red; }\r\n    }\r\n  }\r\n  \r\n  input {\r\n    border: none;\r\n    outline: none;\r\n    background: transparent;\r\n    flex: 1;\r\n    min-width: 100px;\r\n    font-size: 12px;\r\n  }\r\n\r\n  \r\n}\r\n\r\n.carts-footer {\r\n    display: flex;\r\n    flex-direction: row;\r\n    // justify-content: space-between;\r\n    padding: 0.5rem 1rem 0.5rem 2rem;\r\n    border-top: 1px solid $border-color;\r\n    // background: #fafafa;\r\n\r\n      .carts-footer-left {\r\n        // flex: 4;\r\n        width: 70%;\r\n        padding-right: 2rem;\r\n        display: flex;\r\n        .note-cart {\r\n        width:100%;\r\n        height: 100%;\r\n        min-height: 40px;\r\n        border: 1px solid #e1e1e1;\r\n        border-radius: 6px;\r\n        padding: 10px 12px;\r\n        font-size: 15px;\r\n        background: #fafbfc;\r\n        resize: none;\r\n        box-sizing: border-box;\r\n        // flex: 1 1 auto;\r\n      }\r\n    }\r\n\r\n    .cart-footer-right {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n\r\n      .form-group-row {\r\n        margin-right: 15px;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex: 1;\r\n        justify-content: space-between;\r\n        padding-right: 2em;\r\n      }\r\n\r\n      .form-group-price {\r\n        .form-control-plaintext {\r\n          font-size: 18px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>","import script from \"./Carts.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Carts.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Carts.vue?vue&type=style&index=0&id=0679cb49&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0679cb49\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"product-filter-cate-component\">\r\n    <div v-if=\"visible\" class=\"float-overlay\" @mousedown.self=\"\"></div>\r\n\r\n    <transition name=\"slide-fade\">\r\n      <div v-if=\"visible\" class=\"float-nav\">\r\n        <div class=\"float-nav-content\">\r\n          \r\n          <h3 class=\"float-nav-title filter no-select\">\r\n            Lc theo nhm hng\r\n            <button tabindex=\"-1\" @click=\"close\" class=\"btn-icon btn-icon-default\">\r\n              <i class=\"fa fa-times\"></i>\r\n            </button>\r\n          </h3>\r\n\r\n          <div class=\"filter-header\">\r\n            <h4 class=\"filter-header-title no-select\"><span>Nhm hng</span></h4>\r\n            \r\n            <div class=\"filter-header-autocomplete\">\r\n              <div class=\"autocomplete\">\r\n                <i class=\"fa fa-search\"></i>\r\n                <input \r\n                  tabindex=\"-1\" \r\n                  type=\"text\" \r\n                  v-model=\"searchParam\" \r\n                  placeholder=\"Tm nhm hng\" \r\n                  class=\"form-control form-control-custom\"\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"scroll-content\">\r\n            <div class=\"kv-treeview k-widget k-treeview\" role=\"tree\">\r\n              <ul class=\"k-group k-treeview-lines\">\r\n                \r\n                <li role=\"treeitem\" class=\"k-first k-last\" aria-expanded=\"true\">\r\n                  <div class=\"k-top k-bot \">\r\n                    <span \r\n                      class=\"k-icon fixed-cate-align\" \r\n                      :class=\"isExpanded ? 'k-minus' : 'k-plus'\" \r\n                      @click=\"isExpanded = !isExpanded\"\r\n                      role=\"presentation\"\r\n                    ></span>\r\n                    \r\n                    <span class=\"k-checkbox-wrapper\" role=\"presentation\">\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        id=\"node-all\" \r\n                        class=\"k-checkbox\"\r\n                        :checked=\"isAllSelected\"\r\n                        :indeterminate=\"isIndeterminate\"\r\n                        @change=\"toggleAll\"\r\n                      >\r\n                      <label for=\"node-all\" class=\"k-checkbox-label\"></label>\r\n                    </span>\r\n                    \r\n                    <span class=\"k-in\"><span @click=\"onToggleAllClick\" class=\"cate-item no-select\">Tt c</span></span>\r\n                  </div>\r\n\r\n                  <ul class=\"k-group\" v-show=\"isExpanded\">\r\n                    <li \r\n                      v-for=\"(item, index) in filteredList\" \r\n                      :key=\"item.name\" \r\n                      role=\"treeitem\" \r\n                      class=\"k-item adjusted-k-item no-select\"\r\n                      :class=\"{ 'k-last': index === filteredList.length - 1 }\"\r\n                    >\r\n                    <div class=\"k-top k-bot fixed-cate-align\">\r\n                        <span class=\"k-icon fixed-cate-align\" ></span>\r\n                    </div>\r\n                      <div :class=\"index === filteredList.length - 1 ? 'k-bot' : 'k-mid'\">\r\n                        <span class=\"k-checkbox-wrapper\" role=\"presentation\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            :id=\"'node-' + item.name\" \r\n                            class=\"k-checkbox\"\r\n                            :value=\"item.name\"\r\n                            v-model=\"selectedIds\"\r\n                          >\r\n                          <label :for=\"'node-' + item.name\" class=\"k-checkbox-label\"></label>\r\n                        </span>\r\n                        <span class=\"k-in cate-item\" @click=\"toggleSelection(item.name)\">\r\n                          <span>{{ item.name }}</span>\r\n                        </span>\r\n                      </div>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n\r\n              </ul>\r\n            </div>\r\n\r\n            <div v-show=\"filteredList.length === 0\" class=\"not-found\" style=\"color: #a5a6ae; padding: 20px; text-align: center;\">\r\n              <i class=\"far fa-file-search\" style=\"font-size: 32px; display: block; margin-bottom: 10px;\"></i> \r\n              Khng c kt qu no c tm thy\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"group-buttons\">\r\n            <div class=\"group-buttons-left no-select\">\r\n              <div @click=\"clearFilter\" class=\"btn-remove-filter font-medium cursor-pointer\">\r\n                <i class=\"far fa-trash-alt\"></i> Xa chn tt c\r\n              </div>\r\n            </div>\r\n            <div class=\"group-buttons-right no-select\">\r\n              <div @click=\"close\" class=\"btn btn-outline-primary\">\r\n                B qua\r\n              </div>\r\n              <div @click=\"applyFilter\" class=\"btn btn-primary no-select\">\r\n                <button class=\"\">Xong</button> \r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue';\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  // Pass your category list here\r\n  dataSource: {\r\n    type: Array,\r\n    default: () => [\r\n    ]\r\n  },\r\n  // Pre-selected IDs\r\n  modelValue: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n});\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible', 'update:modelValue', 'apply']);\r\n\r\n// State\r\nconst searchParam = ref('');\r\nconst isExpanded = ref(true); // Default expand \"All\"\r\nconst selectedIds = ref([]);\r\n\r\n// Sync props with local state when modal opens\r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal) {\r\n    selectedIds.value = [...props.modelValue];\r\n    searchParam.value = '';\r\n  }\r\n});\r\n\r\n// Computed: Filter the list based on search\r\nconst filteredList = computed(() => {\r\n  if (!searchParam.value) return props.dataSource;\r\n  const lowerSearch = searchParam.value.toLowerCase();\r\n  return props.dataSource.filter(item => \r\n    item.name.toLowerCase().includes(lowerSearch)\r\n  );\r\n});\r\n\r\n// Computed: Checkbox \"All\" states\r\nconst isAllSelected = computed(() => {\r\n  return filteredList.value.length > 0 && selectedIds.value.length === filteredList.value.length;\r\n});\r\n\r\nconst isIndeterminate = computed(() => {\r\n  return selectedIds.value.length > 0 && selectedIds.value.length < filteredList.value.length;\r\n});\r\n\r\n// Actions\r\nconst toggleAll = (e) => {\r\n  if (e.target.checked) {\r\n    // Select all visible items\r\n    selectedIds.value = filteredList.value.map(item => item.name);\r\n  } else {\r\n    selectedIds.value = [];\r\n  }\r\n};\r\n\r\nconst onToggleAllClick = () => {\r\n  if (isAllSelected.value) {\r\n    selectedIds.value = [];\r\n  } else {\r\n    selectedIds.value = filteredList.value.map(item => item.name);\r\n  }\r\n};\r\n\r\nconst toggleSelection = (itemName) => {\r\n  const index = selectedIds.value.indexOf(itemName);\r\n  if (index > -1) {\r\n    selectedIds.value.splice(index, 1);\r\n  } else {\r\n    selectedIds.value.push(itemName);\r\n  }\r\n};\r\n\r\nconst clearFilter = () => {\r\n  selectedIds.value = [];\r\n};\r\n\r\nconst close = () => {\r\n  emit('update:visible', false);\r\n};\r\n\r\nconst applyFilter = () => {\r\n  emit('update:modelValue', selectedIds.value);\r\n  emit('apply', selectedIds.value);\r\n  close();\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/* Basic structural styles mimicking Kendo/Bootstrap \r\n   assuming global styles exist, but adding scoped overrides here \r\n*/\r\n\r\ninput {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n$kv-primary: #0070F4;\r\n\r\n.no-select {\r\n  -webkit-user-select: none; /* Safari */\r\n  -moz-user-select: none;    /* Firefox */\r\n  -ms-user-select: none;     /* IE10+/Edge */\r\n  user-select: none;         /* Standard */\r\n}\r\n\r\n.float-nav {\r\n  position: fixed;\r\n  border-radius: 0.5rem;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 30rem;\r\n  max-width: 100%;\r\n  background: #fff;\r\n  z-index: 1050;\r\n  box-shadow: -2px 0 5px rgba(0,0,0,0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.float-nav-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.float-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 1040;\r\n}\r\n\r\n.scroll-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n}\r\n\r\n/* Header Styles */\r\n.float-nav-title {\r\n  padding: 15px;\r\n  margin: 0;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.filter-header {\r\n  padding: 10px 15px;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.filter-header-title {\r\n  margin: 0 1rem 0 0.2rem;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 2rem;\r\n}\r\n\r\n.autocomplete {\r\n  position: relative;\r\n  display: flex;\r\n}\r\n\r\n.autocomplete input {\r\n  flex: 1 1 0%;\r\n  height: 2rem;\r\n  border-radius: 0.5rem;\r\n  border: 1px solid #ccc;\r\n  width: 100%;\r\n  min-width: 0;\r\n  box-sizing: border-box;\r\n  display: block;\r\n}\r\n\r\n.autocomplete i {\r\n  position: absolute;\r\n  flex:1;\r\n  left: 10px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #999;\r\n}\r\n\r\n.form-control-custom {\r\n  padding-left: 30px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Footer Buttons */\r\n.group-buttons {\r\n  padding: 15px;\r\n  border-top: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.group-buttons-right{\r\n    display: flex;\r\n}\r\n\r\n.group-buttons-right .btn {\r\n  margin-left: 10px;\r\n  padding: 0.5rem;\r\n  border-radius: 0.5rem;\r\n  min-width: 6rem;\r\n  width: 6rem;\r\n  /* border: 1px solid #000000; */\r\n}\r\n\r\n.btn-outline-primary{\r\n    border-color: $kv-primary;\r\n    border: 1px solid $kv-primary;\r\n    color: $kv-primary;\r\n    cursor: pointer;\r\n}\r\n\r\n.btn-primary{\r\n    background-color: $kv-primary;\r\n    border: 1px solid $kv-primary;\r\n    color: #ffffff;\r\n    cursor: pointer;\r\n}\r\n\r\n.cursor-pointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.cate-item {\r\n  cursor: pointer;\r\n}\r\n\r\n/* Minimal Kendo TreeView Imitation */\r\nul.k-group {\r\n  list-style: none;\r\n  padding-left: 16px;\r\n}\r\n\r\nul.k-treeview-lines {\r\n  padding-left: 0;\r\n}\r\n\r\n.k-item {\r\n  display: flex;\r\n}\r\n\r\n.k-top, .k-mid, .k-bot {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 4px 0;\r\n}\r\n\r\n.k-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n  margin-right: 5px;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n}\r\n/* You may need font-awesome or kendo icons for plus/minus */\r\n.k-plus::before { content: '+'; font-weight: bold; }\r\n.k-minus::before { content: '-'; font-weight: bold; }\r\n\r\n.k-checkbox-wrapper {\r\n  margin-right: 8px;\r\n}\r\n\r\n/* Transitions */\r\n.slide-fade-enter-active,\r\n.slide-fade-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(100%);\r\n  opacity: 0;\r\n}\r\n\r\n.fixed-cate-align {\r\n  width: 2rem;\r\n}\r\n\r\n.filter-header-autocomplete {\r\n  flex: 1;\r\n  height: 2rem;\r\n}\r\n\r\n\r\n</style>","import script from \"./ProfuctFilterCate.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProfuctFilterCate.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProfuctFilterCate.vue?vue&type=style&index=0&id=ac8f1de2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ac8f1de2\"]])\n\nexport default __exports__","\r\n\r\n<template>\r\n  <div v-if=\"visible\" class=\"modal-overlay-a\" @mousedown.self=\"onOverlayClick\" ref=\"overlayRef\">\r\n    <div class=\"modal-container\" ref=\"modalRef\">\r\n      <div class=\"modal-header\">\r\n        <h3 class=\"title\">Cc khon thu khc</h3>\r\n        <button @click=\"close\" class=\"close-btn\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"table-container\">\r\n          <table class=\"grid-blue\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"cell-checkbox\"></th>\r\n                <th class=\"cell-code\">M thu khc</th>\r\n                <th class=\"cell-name\">Loi thu</th>\r\n                <th class=\"cell-price text-right\">Mc thu</th>\r\n                <th class=\"cell-price text-right\">Thu trn ha n</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr class=\"tr-summary\">\r\n                <td colspan=\"4\" class=\"text-right font-bold\">Tng thu:</td>\r\n                <td class=\"text-right font-bold text-primary\">{{ formatCurrency(totalAmount) }}</td>\r\n              </tr>\r\n              <tr v-for=\"item in surchargeList\" :key=\"item.id\" :class=\"{ selected: item.selected }\">\r\n                <td class=\"cell-checkbox text-center\">\r\n                  <input \r\n                    type=\"checkbox\" \r\n                    v-model=\"item.selected\" \r\n                    class=\"form-check-input\"\r\n                  />\r\n                </td>\r\n                <td class=\"cell-code\">{{ item.code }}</td>\r\n                <td class=\"cell-name\">{{ item.description }}</td>\r\n                <td class=\"cell-price text-right\">\r\n                  <span v-if=\"item.value > 0\">{{ formatCurrency(item.amount) }}</span>\r\n                  <span v-else class=\"text-muted\">-</span>\r\n                </td>\r\n                <td class=\"cell-price\">\r\n                  <input \r\n                    type=\"number\" \r\n                    @focus=\"selectAll\"\r\n                    v-model=\"item.amount\"\r\n                    :disabled=\"!item.selected\"\r\n                    class=\"form-control-sm text-right no-arrow\"\r\n                  />\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue';\r\n// --- Refs for outside click ---\r\nconst overlayRef = ref(null);\r\nconst modalRef = ref(null);\r\n\r\nconst onOverlayClick = (e) => {\r\n  // Only emit close if click is outside modal-container\r\n  if (modalRef.value && !modalRef.value.contains(e.target)) {\r\n    close();\r\n  }\r\n};\r\n\r\n// --- Props & Emits ---\r\nconst props = defineProps({\r\n  visible: { type: Boolean, default: false },\r\n  // Allow passing existing surcharges from parent\r\n  items: { type: Array, default: () => [] },\r\n  defaultSurcharges: { type: Array, default: () => [] },\r\n  chosenSurcharges: { type: Array, default: () => [] }\r\n});\r\n\r\nconst emit = defineEmits(['close', 'update-surcharges']);\r\n\r\n// --- State ---\r\n// Default mock data based on your HTML snapshot\r\nconst defaultSurcharges = props.defaultSurcharges\r\n\r\nconst selectAll = (event) => {\r\n  event.target.select();\r\n};\r\n\r\n// deep copy to avoid mutating props directly\r\nconst surchargeList = ref(JSON.parse(JSON.stringify(defaultSurcharges)));\r\n\r\n// console.log(\"Updating surchargeList based on chosenSurcharges:\", props.chosenSurcharges);\r\n// check each surcharge in chosenSurcharges and update surchargeList accordingly\r\nif (props.chosenSurcharges && props.chosenSurcharges.length > 0) {\r\n    \r\n  props.chosenSurcharges.forEach(chosen => {\r\n    const match = surchargeList.value.find(s => s.id === chosen.id);\r\n    if (match) {\r\n      match.selected = chosen.selected;\r\n      match.amount = chosen.amount;\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// If props.items is provided (e.g., editing previously saved state), use it\r\nwatch(() => props.items, (newItems) => {\r\n  if (newItems && newItems.length > 0) {\r\n    surchargeList.value = JSON.parse(JSON.stringify(newItems));\r\n  }\r\n}, { immediate: true });\r\n\r\n// --- Computed ---\r\nconst totalAmount = computed(() => {\r\n  console.log(\"Calculating totalAmount from surchargeList:\", surchargeList.value);\r\n  return surchargeList.value.reduce((sum, item) => {\r\n    // if item.amount undefined or NaN, treat as 0\r\n    const amount = isNaN(Number(item.amount)) ? 0 : Number(item.amount);\r\n\r\n    return sum + (item.selected ? amount : 0);\r\n\r\n    // return item.selected ? sum + Number(item.amount) : sum;\r\n  }, 0);\r\n});\r\n\r\n// --- Formatting ---\r\nconst formatCurrency = (value) => {\r\n  return new Intl.NumberFormat('vi-VN').format(value);\r\n};\r\n\r\n// --- Actions ---\r\nconst toggleSelection = (item) => {\r\n  // Logic if needed when toggling\r\n};\r\n\r\n\r\n\r\nconst close = () => {\r\n    // console.log(\"Closing Surcharge Modal. Selected Surcharges:\", surchargeList.value.filter(s => s.selected));\r\n  emit('close', surchargeList.value.filter(s => s.selected));\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.no-arrow::-webkit-outer-spin-button,\r\n.no-arrow::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}    \r\n/* Modal Overlay */\r\n.modal-overlay-a {\r\n    position: fixed; top: 0; left: 0; width: 100%; height: 100%;\r\n    background: rgba(0,0,0,0.5); \r\n    z-index: 20000;\r\n  /* display: flex;  */\r\n}\r\n\r\n.modal-container {\r\n  position: absolute;\r\n  top: 20%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: white;\r\n  width: 60rem;\r\n  max-width: 95vw;\r\n  border-radius: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  display: flex; flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Header */\r\n.modal-header {\r\n  padding: 10px 15px; background: #007bff; color: white;\r\n  display: flex; justify-content: space-between; align-items: center;\r\n}\r\n.title { margin: 0; font-size: 1.1rem; font-weight: 500; }\r\n.close-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }\r\n\r\n/* Table Styling (Mimicking .grid-blue) */\r\n.table-container { padding: 0; max-height: 60vh; overflow-y: auto; }\r\n\r\n.grid-blue { width: 100%; border-collapse: collapse; font-size: 14px; }\r\n\r\n.grid-blue thead th {\r\n  background-color: #f0f3f5; color: #333; font-weight: 600;\r\n  padding: 8px 10px; border-bottom: 1px solid #ccc; border-right: 1px solid #e0e0e0;\r\n  text-align: left;\r\n}\r\n\r\n.grid-blue tbody td {\r\n  padding: 8px 10px; border-bottom: 1px solid #eee; border-right: 1px solid #eee;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* Column Widths */\r\n.cell-checkbox { width: 40px; }\r\n.cell-code { width: 150px; color: #0056b3; } /* Code often blue link color */\r\n.cell-price { width: 140px; }\r\n\r\n/* Interactive Elements */\r\n.tr-summary { background-color: #fffae6; } /* Highlight summary row slightly */\r\n.text-right { text-align: right; }\r\n.text-center { text-align: center; }\r\n.font-bold { font-weight: bold; }\r\n.text-primary { color: #007bff; }\r\n.text-muted { color: #999; }\r\n\r\n/* Input Styling */\r\n.form-control-sm {\r\n  width: 100%; padding: 4px 8px;\r\n  border: 1px solid #ccc; border-radius: 3px;\r\n  font-size: 14px;\r\n}\r\n.form-control-sm:focus { border-color: #007bff; outline: none; }\r\n.form-control-sm:disabled { background-color: #f9f9f9; color: #aaa; }\r\n\r\n.form-check-input {\r\n  width: 16px; height: 16px; cursor: pointer;\r\n}\r\n\r\n/* Footer */\r\n.modal-footer {\r\n  padding: 10px 15px; border-top: 1px solid #eee; background: #f9f9f9;\r\n  display: flex; justify-content: flex-end; gap: 10px;\r\n}\r\n.btn-primary { background: #007bff; color: white; border: none; padding: 6px 15px; border-radius: 3px; cursor: pointer; }\r\n.btn-secondary { background: #6c757d; color: white; border: none; padding: 6px 15px; border-radius: 3px; cursor: pointer; }\r\n</style>","import script from \"./Surcharge.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Surcharge.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Surcharge.vue?vue&type=style&index=0&id=7ab45bcc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7ab45bcc\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"receipt-container\">\r\n    <div class=\"receipt-body\" id=\"printable-area\">\r\n      \r\n      <div class=\"header\">\r\n        <img :src=\"logoUrl\" alt=\"Fitpack Logo\" class=\"fitpack-logo\" />\r\n        <h2> HA N\r\n          <span> {{ order.code }}</span></h2>\r\n        <span class=\"date\">{{ formatDate(order.date) }}</span>\r\n      </div>\r\n\r\n      <div class=\"divider\"></div>\r\n\r\n      <div class=\"customer-info\">\r\n        <p><strong>Khch hng:</strong> {{ order.customer_name + \" - \" + order.customer_phone_number }}</p>\r\n        <h3>{{ order.delivery_address }}</h3>\r\n\r\n        <p v-if=\"order.note\"><strong>Ghi ch:</strong> {{ order.note }}</p>\r\n      </div>\r\n\r\n      <div class=\"divider\"></div>\r\n\r\n      <table class=\"items-table\">\r\n        <thead style=\"background-color: white;\">\r\n          <tr style=\"background-color: white;\">\r\n            <th class=\"text-left\" style=\"background-color: white;\">Mn</th>\r\n            <th class=\"text-center\" style=\"background-color: white;\">SL</th>\r\n            <th class=\"text-right\" style=\"background-color: white;\">Thnh tin</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <template v-for=\"item in order.items\" :key=\"item.uuid\">\r\n            <tr class=\"item-row\">\r\n              <td class=\"item-name\">\r\n                {{ item.name }}\r\n                <div class=\"sku\">{{ formatCurrency(item.price) }}</div>\r\n              </td>\r\n              <td class=\"text-center\">{{ item.quantity }}</td>\r\n              <td class=\"text-right\">{{ formatCurrency(item.price * item.quantity) }}</td>\r\n            </tr>\r\n          </template>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div class=\"divider\"></div>\r\n\r\n      <div class=\"totals\">\r\n        <div class=\"row\">\r\n          <span>Tng tin hng:</span>\r\n          <span>{{ formatCurrency(order.total) }}</span>\r\n        </div>\r\n\r\n        <div class=\"row discount\" v-if=\"Number(order.discount) > 0\">\r\n          <span>Gim gi:</span>\r\n          <span>- {{ formatCurrency(order.discount) }}</span>\r\n        </div>\r\n\r\n        <div v-for=\"surcharge in order.surcharges\" :key=\"surcharge.id\" class=\"row\">\r\n          <span>{{ surcharge.description }}:</span>\r\n          <span>+ {{ formatCurrency(surcharge.amount) }}</span>\r\n        </div>\r\n\r\n        <div class=\"divider-dashed\"></div>\r\n\r\n        <div class=\"row final-total\">\r\n          <span>THNH TIN:</span>\r\n          <span>{{ formatCurrency(calculatedTotal) }}</span>\r\n        </div>\r\n        <div class=\"row final-total\">\r\n          <span> THANH TON:</span>\r\n          <span>{{ formatCurrency(order.amount_paid_by_customer) }}</span>\r\n        </div>\r\n        <div class=\"row final-total\">\r\n          <span>CN LI:</span>\r\n          <span>{{ formatCurrency(calculatedTotal - order.amount_paid_by_customer) }}</span>\r\n        </div>\r\n        <div class=\"row final-total\">\r\n          Thank you for shopping with us!\r\n        </div>\r\n      </div>\r\n      \r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\n\r\n// Import logo from assets\r\nimport logoUrl from '@/assets/logoFitpack.png';\r\n\r\n// Define props to accept the order JSON object\r\nconst props = defineProps({\r\n  order: {\r\n    type: Object,\r\n    required: true,\r\n    default: () => ({})\r\n  }\r\n});\r\n\r\n// Format Currency (VND)\r\nconst formatCurrency = (value) => {\r\n  return new Intl.NumberFormat('vi-VN', {\r\n    style: 'currency',\r\n    currency: 'VND',\r\n  }).format(value);\r\n};\r\n\r\n// Format Date\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\n// Calculate Grand Total (The JSON 'final_total' is 0, so we calculate manually)\r\nconst calculatedTotal = computed(() => {\r\n  const subtotal = Number(props.order.total) || 0;\r\n  const discount = Number(props.order.discount) || 0;\r\n  \r\n  // Sum active surcharges\r\n  const surchargeTotal = props.order.surcharges \r\n    ? props.order.surcharges.reduce((acc, curr) => acc + (curr.is_active ? curr.amount : 0), 0)\r\n    : 0;\r\n\r\n  return subtotal - discount + surchargeTotal;\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n  span , strong {\r\n    color: #000;\r\n  }\r\n/* Base Styles */\r\n.receipt-container {\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background: #fff;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  color: #000;\r\n  box-shadow: none;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n}\r\n.header h2 {\r\n  margin: 0 0 5px 0;\r\n  font-size: 1.2rem;\r\n  text-transform: uppercase;\r\n  color: #000;\r\n}\r\n.header p {\r\n  margin: 2px 0;\r\n  font-size: 0.9rem;\r\n  color: #000;\r\n}\r\n\r\n.divider {\r\n  border-bottom: 2px solid #000;\r\n  margin: 10px 0;\r\n}\r\n.divider-dashed {\r\n  border-bottom: 1px dashed #000;\r\n  margin: 10px 0;\r\n}\r\n\r\n.item-row{\r\n  /* 1st child */\r\n\r\n}\r\n\r\n.text-left { text-align: left; }\r\n.text-center { text-align: center; }\r\n.text-right { text-align: right; }\r\n\r\n/* Table Styles */\r\n.items-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 0.9rem;\r\n  color: #000;\r\n}\r\n.items-table th {\r\n  border-bottom: 1px solid #000;\r\n  padding-bottom: 5px;\r\n  color: #000;\r\n}\r\n.items-table td {\r\n  padding: 8px 0;\r\n  vertical-align: top;\r\n  color: #000;\r\n}\r\n\r\n.item-name {\r\n  font-weight: bold;\r\n  color: #000;\r\n  text-align: left;\r\n}\r\n.sku {\r\n  font-weight: normal;\r\n  font-size: 0.75rem;\r\n  color: #000;\r\n}\r\n\r\n/* Package/Combo Styles */\r\n.package-row td {\r\n  padding-top: 0;\r\n  padding-bottom: 10px;\r\n}\r\n.package-list {\r\n  margin: 0;\r\n  padding-left: 15px;\r\n  list-style: none;\r\n  font-size: 0.75rem;\r\n  color: #000;\r\n}\r\n.package-list li {\r\n  position: relative;\r\n  padding-left: 10px;\r\n  color: #000;\r\n}\r\n.package-list li::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: -5px;\r\n  color: #000;\r\n}\r\n.qty-badge {\r\n  font-weight: bold;\r\n  color: #000;\r\n}\r\n\r\n/* Totals Styles */\r\n.totals .row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n  color: #000;\r\n}\r\n.final-total {\r\n  font-weight: 900;\r\n  font-size: 1.2rem;\r\n  margin-top: 5px;\r\n  color: #000;\r\n}\r\n\r\n.footer {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n  font-size: 0.8rem;\r\n  font-style: italic;\r\n  color: #000;\r\n}\r\n\r\n/* Action Bar (Button) */\r\n\r\n.action-bar {\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n.btn-print {\r\n  background: #fff;\r\n  color: #000;\r\n  border: 1px solid #000;\r\n  padding: 10px 20px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n.btn-print:hover {\r\n  background: #eee;\r\n  color: #000;\r\n}\r\n\r\n</style>\r\n\r\n<style>\r\n  @media print {\r\n  body * {\r\n    visibility: hidden;\r\n  }\r\n  .receipt-container, .receipt-container * {\r\n    visibility: visible;\r\n  }\r\n  .receipt-container {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n    box-shadow: none;\r\n    max-width: 100%; /* Use full paper width */\r\n  }\r\n  .no-print {\r\n    display: none !important;\r\n  }\r\n}\r\n/* Logo style */\r\n.fitpack-logo {\r\n  display: block;\r\n  margin: 0 auto 10px auto;\r\n  max-width: 120px;\r\n  max-height: 60px;\r\n}\r\n</style>","import script from \"./PrintInvoice.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PrintInvoice.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PrintInvoice.vue?vue&type=style&index=0&id=3447db6a&scoped=true&lang=css\"\nimport \"./PrintInvoice.vue?vue&type=style&index=1&id=3447db6a&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3447db6a\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"visible\" class=\"modal-overlay\" @mousedown.self=\"close\">\r\n    <div class=\"modal-container\">\r\n\r\n      <div class=\"modal-body\">\r\n        \r\n        <div class=\"top-controls\">\r\n          \r\n            <div class=\"label-group\">\r\n                <div class=\"control-group\">\r\n\r\n                    <select v-model=\"selectedChannel\" class=\"form-select custom-select\">\r\n                    <option v-for=\"c in channels\" :key=\"c.name\" :value=\"c.name\">{{ c.name }}</option>\r\n                    </select>\r\n\r\n                </div>\r\n            \r\n                <div class=\"date-group\">\r\n                    <input type=\"date\" v-model=\"purchaseDate\" class=\"form-input date-input\" :disabled=\"!store.getters.userAdmin\" @click=\"openDatePicker($event)\" ref=\"dateInputRef\" :max=\"maxDate\" />\r\n                    <input type=\"time\" v-model=\"purchaseTime\" class=\"form-input time-input\" :disabled=\"!store.getters.userAdmin\" @click=\"openTimePicker($event)\" ref=\"timeInputRef\" />\r\n                </div>\r\n            </div>\r\n\r\n            \r\n            \r\n\r\n          <div class=\"close-btn-group\">\r\n            <button @click=\"close\" class=\"close-btn\">x</button>\r\n          </div>\r\n          \r\n        </div>\r\n\r\n        <div class=\"customer-info\">\r\n          <span class=\"customer-name font-bold\">{{ props.cartData?.customer?.name || 'Khch l' }}</span>\r\n          <span class=\"customer-name\"> {{ props.cartData?.customer?.address || '' }} </span>\r\n          \r\n          \r\n          <div v-if=\"props.cartData?.customer\" class=\"customer-stats\">\r\n            <span class=\"tag debt\" v-if=\"props.cartData.customer.debt\">\r\n              N: {{ formatCurrency(props.cartData.customer.debt) }}\r\n            </span>\r\n            <span class=\"tag points\" v-if=\"props.cartData.customer.points\">\r\n              im: {{ props.cartData.customer.points }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"payment-details\">\r\n          \r\n          <div class=\"row\">\r\n            <span class=\"row-label\">Tng tin hng</span>\r\n            <span class=\"side-info\"></span>\r\n            <div class=\"value-amt\">{{ formatCurrency(totalAmount) }}</div>\r\n          </div>\r\n\r\n          <div class=\"row\" >\r\n            <span class=\"row-label\">Gim gi</span>\r\n            <span class=\"side-info\"></span>\r\n            <div style=\"position:relative;\">\r\n                <input \r\n                type=\"text\" \r\n                v-model=\"discountMethodValueDisplay\" \r\n                @focus=\"selectAll\"\r\n                @keypress=\"onlyNumbersandPer\"\r\n                @change=\"checkAndUpdateDiscount\"\r\n                class=\"value-input font-bold text-right customer-payment-input\"\r\n                placeholder=\"0\"\r\n                />\r\n            </div>\r\n            \r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <span class=\"row-label\">Thu khc</span>\r\n            <span class=\"side-info\"></span>\r\n            <div style=\"position:relative;\">\r\n                <button class=\"value-amt\" @click=\"surchargesOpen=true\">{{ formatCurrency(totalSurcharge) }}</button>\r\n            </div>\r\n            \r\n          </div>\r\n\r\n          <hr class=\"divider\">\r\n\r\n          <div class=\"row highlight\">\r\n            <label class=\"font-bold\">Khch cn tr</label>\r\n            <div class=\"value font-bold text-primary\">{{ formatCurrency(finalTotal) }}</div>\r\n          </div>\r\n\r\n          <div class=\"row payment-input-row\">\r\n            <label class=\"font-bold\">Khch thanh ton</label>\r\n            <input \r\n                type=\"text\" \r\n                v-model=\"amountPaidDisplay\" \r\n                @focus=\"selectAll\"\r\n                @keypress=\"onlyNumbers\"\r\n                @change=\"handleUpdateAmountPaidCustomer\"\r\n                :disabled=\"paymentMethod=='receivable'\"\r\n                class=\"value-input font-bold text-right customer-payment-input\"\r\n                placeholder=\"0\"\r\n                />\r\n          </div>\r\n\r\n          <div class=\"row methods-row\">\r\n            <div class=\"radio-group\">\r\n              <label v-for=\"method in paymentMethods\" :key=\"method.value\" class=\"radio-label\">\r\n                <input \r\n                  type=\"radio\" \r\n                  :value=\"method.value\" \r\n                  v-model=\"paymentMethod\"\r\n                  @change=\"handlePaymentMethodChange\" \r\n                />\r\n                {{ method.label }}\r\n              </label>\r\n\r\n            </div>\r\n            <div v-if=\"paymentMethod === 'transfer'\" class=\"bank-holder\">\r\n              <select class=\"form-select custom-select\" v-model=\"paymentAccount\" @change=\"handleUpdatePaymentAccount\">\r\n                <option \r\n                  v-for=\"account in props.bankAccounts\" \r\n                  :key=\"account.id\" \r\n                  :value=\"account.id\"\r\n                  :selected=\"account.default\"\r\n                  :class=\"{ 'd-none': account.bank_name.toLowerCase().includes('cash') }\"\r\n                  >\r\n                    {{ account.bank_name  + ' - ' + account.account_number }}\r\n                </option>\r\n              </select>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\" v-if=\"changeDue > 0\">\r\n             <label>Tin tha tr khch</label>\r\n             <div class=\"value\">{{ formatCurrency(changeDue) }}</div>\r\n          </div>\r\n          <div class=\"row confirm-missing-payment\" v-else-if=\"changeDue < 0\">\r\n            <div class=\"confirm-missing-payment-row\">\r\n              <label class=\"text-danger\">Khch cn thiu</label>\r\n              <div class=\"value text-danger\">{{ formatCurrency(Math.abs(changeDue)) }}</div>\r\n            </div>\r\n             <div class=\"confirm-missing-payment-row-2\" v-if=\"paymentMethod!=='receivable'\">\r\n              <input type=\"checkbox\" v-model=\"confirm_miss_payment\" /> Xc nhn thanh ton thiu\r\n             </div>\r\n             \r\n          </div>\r\n\r\n          <hr class=\"divider\">\r\n\r\n          <div class=\"row\">\r\n            <label>n v vn chuyn</label>\r\n            <select \r\n            v-model=\"transportCompany\"\r\n            class=\"form-select custom-select transport-company-select\">\r\n              <option \r\n                v-for=\"company in props.transportCompanies\" \r\n                :key=\"company.id\" \r\n                :value=\"company\">\r\n                  {{ company.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <label for=\"\"> Ph ship mnh tr tin mt</label>\r\n            <input \r\n                v-model=\"amountPaidTransportCompanyDisplay\" \r\n                @focus=\"selectAll\"\r\n                @keypress=\"onlyNumbers\" \r\n                type=\"text\" class=\"value-input font-bold text-right transport-company-amount\" />\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <button class=\"btn-primary\" @click=\"handlePayment\" :disabled=\"(paymentMethod !== 'receivable' && amountPaidByCustomer < finalTotal && !confirm_miss_payment)\">Thanh ton</button>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <Surcharge \r\n    v-if=\"surchargesOpen\" \r\n    :visible=\"surchargesOpen\" \r\n    :default-surcharges=\"props.defaultSurcharges\"\r\n    :chosen-surcharges=\"props?.cartData?.surcharges || []\"\r\n    @close=\"handleUpdateSurcharges\" \r\n    />\r\n\r\n  <PrintInvoice \r\n    v-if=\"toPrint.id\"\r\n    :order=\"toPrint\" \r\n    :key=\"'print-invoice-' + toPrint.id + '-' + JSON.stringify(toPrint)\"\r\n  />\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch, onBeforeUnmount, nextTick } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport Surcharge from './Surcharge.vue';\r\nimport PrintInvoice from '@/components/Sale/PrintInvoice.vue';\r\n\r\nconst maxDate = computed(() => {\r\n  const today = new Date();\r\n  today.setDate(today.getDate()); // 30 days from now\r\n  return today.toISOString().split('T')[0];\r\n});\r\n\r\n\r\n// --- Props & Emits ---\r\nconst props = defineProps({\r\n  visible: { type: Boolean, default: false },\r\n  cartData: { type: Object, required: true }, // Expects { total: number, customer: object },\r\n  channels: { type: Array, default: () => [] },\r\n  defaultSurcharges: { type: Array, default: () => [] },\r\n  bankAccounts: { type: Array, default: () => [] },\r\n  transportCompanies: { type: Array, default: () => [] },\r\n  \r\n  // focusCustomer: { type: Object, default: null }\r\n});\r\n\r\nconst store = useStore();\r\nconst toPrint = ref({});\r\n\r\n// console.log(\"Payment Component Props:\", props);\r\n// console.log(\"Payment Component Props:\", props);\r\nconst emit = defineEmits(['close', 'complete-payment', 'update-cart-data']);\r\n\r\nconst onlyNumbersandPer = (event) => {\r\n  // Allow only numbers 0-9 and a single % at the end\r\n  const input = event.target.value;\r\n  const char = event.data || String.fromCharCode(event.which || event.keyCode);\r\n  // Allow navigation keys\r\n  if ([8, 9, 13, 27, 37, 39, 46].includes(event.keyCode)) return;\r\n\r\n  // If % is pressed\r\n  if (char === '%') {\r\n    // Only allow one % and only at the end\r\n    if (input.includes('%') || event.target.selectionStart !== input.length) {\r\n      event.preventDefault();\r\n    }\r\n    return;\r\n  }\r\n  // Allow numbers\r\n  if (/\\d/.test(char)) return;\r\n  // Block everything else\r\n  event.preventDefault();\r\n};\r\n\r\nconst handleUpdateSurcharges = (surcharges) => {\r\n    // Calculate total surcharge amount\r\n    // console.log(\" handleUpdateSurcharges Selected Surcharges:\", surcharges);\r\n    surchargesOpen.value = false;\r\n\r\n    totalSurcharge.value = surcharges.reduce((sum, s) => \r\n    sum + (isNaN(Number(s.amount)) ? 0 : Number(s.amount)), 0);\r\n\r\n    emit('update-cart-data', {\r\n        ...props.cartData,\r\n        surcharges: surcharges,\r\n        totalSurcharge: totalSurcharge.value\r\n    });\r\n};\r\n\r\n\r\nconst onlyNumbers = (event) => {\r\n  // Allow only numbers 0-9\r\n  const charCode = (event.which) ? event.which : event.keyCode;\r\n  if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nconst checkAndUpdateDiscount = (event) => {\r\n    // If input ends with %, treat as percentage\r\n    const input = discountMethodValueDisplay.value;\r\n    if (input.endsWith('%')) {\r\n        const percentStr = input.slice(0, -1).trim();\r\n        // console.log(\"Percentage discount detected:\", percentStr);\r\n        const percentValue = parseFloat(percentStr);\r\n        if (!isNaN(percentValue)) {\r\n            discountMethodValue.value = Math.round((percentValue / 100) * totalAmount.value);\r\n            discount.value = discountMethodValue.value;\r\n        } else {\r\n            discountMethodValue.value = 0;\r\n            discount.value = 0;\r\n        }\r\n    } else {\r\n        // Treat as fixed amount\r\n        const fixedValue = parseInt(input.replace(/\\D/g, ''), 10);\r\n        if (!isNaN(fixedValue)) {\r\n            discountMethodValue.value = fixedValue;\r\n            discount.value = discountMethodValue.value;\r\n        } else {\r\n            discountMethodValue.value = 0;\r\n            discount.value = 0;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    emit('update-cart-data', {\r\n        ...props.cartData,\r\n        discount: discountMethodValue.value,\r\n        discountMethodValue: discountMethodValue.value,\r\n        chosenDiscountMethod: 'VND'\r\n    });\r\n};\r\n\r\nconst handlePaymentMethodChange = () => {\r\n//   if method is 'receivable', set amountPaidByCustomer to 0 and disable input\r\n    if (paymentMethod.value === 'receivable') {\r\n        amountPaidByCustomer.value = 0;\r\n        confirm_miss_payment.value = false;\r\n\r\n        emit('update-cart-data', {\r\n        ...props.cartData,\r\n        amountPaidByCustomer: 0,\r\n        paymentMethod: paymentMethod.value,\r\n        paymentAccount: null\r\n        // return;\r\n    });\r\n    }\r\n\r\n    if (paymentMethod.value !== 'receivable' && amountPaidByCustomer.value !== finalTotal.value) {\r\n        amountPaidByCustomer.value = finalTotal.value;\r\n    }\r\n\r\n    if (paymentMethod.value === 'cash') {\r\n        paymentAccount.value = 1; // default to Cash account\r\n    }\r\n\r\n    if (paymentMethod.value === 'transfer') {\r\n        // Select first non-cash account\r\n        const nonCashAccount = props.bankAccounts.find(acc => !acc.bank_name.toLowerCase().includes('cash'));\r\n        if (nonCashAccount) {\r\n            paymentAccount.value = nonCashAccount.id;\r\n        }\r\n    }\r\n\r\n    emit('update-cart-data', {\r\n        ...props.cartData,\r\n        amountPaidByCustomer: amountPaidByCustomer.value,\r\n        paymentMethod: paymentMethod.value,\r\n        paymentAccount: paymentAccount.value\r\n    });\r\n};\r\n\r\nconst handleUpdatePaymentAccount = () => {\r\n    emit('update-cart-data', {\r\n        ...props.cartData,\r\n        paymentAccount: paymentAccount.value\r\n    });\r\n};\r\n\r\nconst amountPaidDisplay = computed({\r\n  get: () => {\r\n    // Show empty string if 0 to make typing easier, or keep 0 if preferred\r\n    if (amountPaidByCustomer.value === 0) return '0'; \r\n    \r\n    // Format with dots (e.g., 100000 -> \"100.000\")\r\n    return new Intl.NumberFormat('vi-VN').format(amountPaidByCustomer.value);\r\n  },\r\n\r\n  set: (newValue) => {\r\n    // 1. Remove any character that is NOT a digit (remove dots, spaces)\r\n    const sanitized = newValue.replace(/\\D/g, '');\r\n    \r\n    // 2. Convert back to number and update the real variable\r\n    amountPaidByCustomer.value = sanitized ? parseInt(sanitized, 10) : 0;\r\n  }\r\n});\r\n\r\nconst handleUpdateAmountPaidCustomer = () => {\r\n    emit('update-cart-data', {\r\n        ...props.cartData,\r\n        amountPaidByCustomer: amountPaidByCustomer.value\r\n    });\r\n};\r\n\r\n\r\nconst amountPaidTransportCompanyDisplay = computed({\r\n    get: () => {\r\n        if (amountPaidTransportCompany.value === 0) return '0';\r\n        return new Intl.NumberFormat('vi-VN').format(amountPaidTransportCompany.value);\r\n    },\r\n    set: (newValue) => {\r\n        const sanitized = newValue.replace(/\\D/g, '');\r\n        amountPaidTransportCompany.value = sanitized ? parseInt(sanitized, 10) : 0;\r\n    }\r\n});\r\n\r\nconst discountMethodValueDisplay = computed({\r\n    get: () => {\r\n        if (discountMethodValue.value === 0) return '0';\r\n\r\n        try {\r\n          if (discountMethodValue.value.endsWith('%')) {\r\n              return discountMethodValue.value;\r\n          }\r\n        } catch (e) {\r\n          // Not a string, proceed\r\n        }\r\n        \r\n        return new Intl.NumberFormat('vi-VN').format(discountMethodValue.value);\r\n    },\r\n    set: (newValue) => {\r\n      // allow only numbers and % at the end\r\n        const sanitized = newValue.replace(/[^\\d%]/g, '');\r\n        discountMethodValue.value = sanitized;\r\n    }\r\n});\r\n\r\n// Optional: Helper to select all text on click (UX best practice for POS)\r\nconst selectAll = (event) => {\r\n  event.target.select();\r\n};\r\n\r\nconst surchargesOpen = ref(false);\r\n// --- State ---\r\n// Dropdown Data (Mocking the options from your HTML)\r\n\r\nconst selectedSeller = ref(36934);\r\n\r\nconst channels = props.channels || [];\r\nconst selectedChannel = ref('');\r\n\r\n\r\nfunction getTodayDateStr() {\r\n  const d = new Date();\r\n  const month = (d.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = d.getDate().toString().padStart(2, '0');\r\n  return `${d.getFullYear()}-${month}-${day}`;\r\n}\r\nfunction getNowTimeStr() {\r\n  const d = new Date();\r\n  const hours = d.getHours().toString().padStart(2, '0');\r\n  const minutes = d.getMinutes().toString().padStart(2, '0');\r\n  return `${hours}:${minutes}`;\r\n}\r\n\r\nconst purchaseDate = ref(getTodayDateStr());\r\nconst purchaseTime = ref(getNowTimeStr());\r\n\r\nconst dateInputRef = ref(null);\r\nconst timeInputRef = ref(null);\r\n\r\nfunction openTimePicker(event) {\r\n  if (timeInputRef.value) {\r\n    if (typeof timeInputRef.value.showPicker === 'function') {\r\n      timeInputRef.value.showPicker();\r\n    } else {\r\n      timeInputRef.value.focus();\r\n      // Optionally, trigger a click event for browsers that require it\r\n      // timeInputRef.value.click();\r\n    }\r\n  }\r\n}\r\n\r\nfunction openDatePicker(event) {\r\n  // Always focus the input\r\n  if (dateInputRef.value) {\r\n    // Try to use showPicker if supported (Chrome, Edge, Opera)\r\n    if (typeof dateInputRef.value.showPicker === 'function') {\r\n      dateInputRef.value.showPicker();\r\n    } else {\r\n      // Fallback: focus and trigger click (for Firefox, Safari, etc.)\r\n      dateInputRef.value.focus();\r\n      // Optionally, trigger a click event for browsers that require it\r\n      // (Some browsers may ignore programmatic click for security reasons)\r\n      // dateInputRef.value.click();\r\n    }\r\n  }\r\n}\r\n\r\n// Financials\r\nconst confirm_miss_payment = ref(false);\r\nconst totalAmount = ref(0); // Will load from props\r\nconst discount = ref(0);\r\n// const surchargeAmount = ref(0);\r\nconst amountPaidByCustomer = ref(0); // \"Khch thanh ton\"\r\nconst amountPaidTransportCompany = ref(0); // \"Ph ship mnh tr\"\r\nconst discountMethodValue = ref(0);\r\nconst chosenDiscountMethod = ref('VND');\r\n\r\n// console.log(\"Initialized chosenDiscountMethod to:\", chosenDiscountMethod.value);\r\nconst totalSurcharge = ref(0);\r\nconst transportCompany = ref(null);\r\nconst paymentAccount = ref(1); // default to Cash account\r\n// const \r\n// Payment Methods\r\nconst paymentMethod = ref('cash'); // 'cash', 'card', 'transfer'\r\nconst paymentMethods = [\r\n  { value: 'cash', label: 'Tin mt' },\r\n  { value: 'transfer', label: 'Chuyn khon' },\r\n  { value: 'receivable', label: 'Cng N' }\r\n];\r\n// --- Computed Logic ---\r\n\r\n// 1. Calculate the final amount the customer needs to pay\r\nconst finalTotal = computed(() => {\r\n  return totalAmount.value - discount.value + totalSurcharge.value;\r\n});\r\n\r\n// 2. Calculate \"Tin tha\" (Change due) or \"Cn thiu\" (Remaining)\r\nconst changeDue = computed(() => {\r\n  return amountPaidByCustomer.value - finalTotal.value;\r\n});\r\n\r\n// 3. Helper to format currency (VND)\r\nconst formatCurrency = (value) => {\r\n  return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value);\r\n};\r\n\r\n// --- Lifecycle ---\r\n\r\nonMounted(() => {\r\n  // Initialize with data passed from parent\r\n  if (props.cartData) {\r\n    totalAmount.value = props.cartData.total ;\r\n     // Auto-fill full amount\r\n    discount.value = props.cartData.discount || 0;\r\n    // surchargeAmount.value = props.cartData.surcharge || 0;\r\n    discountMethodValue.value = props.cartData.discountMethodValue || 0;\r\n    chosenDiscountMethod.value = props.cartData.chosenDiscountMethod || 'VND';\r\n    selectedChannel.value = props.cartData.channel || (channels.length > 0 ? channels[0].name : '');\r\n    // console.log(\"current chosenDiscountMethod to:\", chosenDiscountMethod.value);\r\n    // console.log(\"current chosenDiscountValue to:\", discountMethodValue.value);\r\n\r\n    paymentMethod.value = props.cartData.paymentMethod || 'cash';\r\n    paymentAccount.value = props.cartData.paymentAccount || 1;\r\n    // console.log(\"props.cartData.transportCompany:\", props.cartData.transportCompany);\r\n    transportCompany.value = props.cartData.transportCompany || props.transportCompanies[0];\r\n    // console.log(\"props.transportCompanies:\", props.transportCompanies);\r\n    // console.log(\"Initialized transportCompany to:\", transportCompany.value);\r\n    amountPaidTransportCompany.value = props.cartData.amountPaidTransportCompany || 0;\r\n    totalSurcharge.value = props.cartData.surcharge || 0;\r\n    if (paymentMethod.value === 'receivable') {\r\n        amountPaidByCustomer.value = 0;\r\n    } else {\r\n    amountPaidByCustomer.value = props.cartData.amountPaidByCustomer || totalAmount.value - discount.value + totalSurcharge.value;\r\n    }\r\n  }\r\n  purchaseDate.value = getTodayDateStr();\r\n  purchaseTime.value = getNowTimeStr();\r\n});\r\n\r\nconst printInvoice = () => {\r\n      window.print();\r\n    };\r\n\r\n// --- Actions ---\r\nconst handlePayment = async () => {\r\n  const payload = props.cartData ? { ...props.cartData } : {};\r\n\r\n  if (paymentMethod.value === 'receivable') {\r\n    amountPaidByCustomer.value = 0;\r\n    paymentAccount.value = null;\r\n  } \r\n\r\n  if (paymentMethod.value === 'cash') {\r\n    paymentAccount.value = 1; // default to Cash account\r\n  }\r\n  \r\n  await axios.post('/invoices/', {\r\n    ...payload,\r\n    amount_paid_by_customer: amountPaidByCustomer.value,\r\n    amount_paid_transport_company: amountPaidTransportCompany.value,\r\n    surcharges: props.cartData.surcharges || [],\r\n    total_surcharge: totalSurcharge.value,\r\n    final_total: finalTotal.value,\r\n    payment_method: paymentMethod.value, \r\n    payment_account: paymentAccount.value,\r\n    channel: selectedChannel.value,\r\n    transport_company: transportCompany.value?.name || '',\r\n    amount_paid_transport_company: amountPaidTransportCompany.value,\r\n    date: purchaseDate.value,\r\n    time: purchaseTime.value,\r\n    delivery_address: props.cartData.customer ? props.cartData.customer.address : '',\r\n    customer: props.cartData.customer ? props.cartData.customer.id : 1,\r\n  }).then(async response => {\r\n    payload.paymentConfirmation = response.data;\r\n\r\n    toPrint.value = response.data;\r\n    await nextTick();\r\n    printInvoice();\r\n\r\n    emit('complete-payment', response.data);\r\n\r\n  }).catch(error => {\r\n    console.error(\"Error processing payment:\", error);\r\n    // Handle error (e.g., show notification)\r\n  });\r\n\r\n};\r\n\r\nconst close = () => {\r\n  emit('update-cart-data', {\r\n    ...props.cartData,\r\n    discount: discount.value,\r\n    amountPaidByCustomer: amountPaidByCustomer.value,\r\n    amountPaidTransportCompany: amountPaidTransportCompany.value,\r\n    paymentMethod: paymentMethod.value, \r\n    paymentAccount: paymentAccount.value,\r\n    selectedChannel: selectedChannel.value,\r\n    selectedSeller: selectedSeller.value,\r\n    transportCompany: transportCompany.value,\r\n    amountPaidTransportCompany: amountPaidTransportCompany.value,\r\n  });  \r\n\r\n  emit('close');\r\n};\r\n</script>\r\n\r\n\r\n\r\n<style scoped>\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  font-size: 1rem;\r\n}\r\n.bank-holder {\r\n    margin-top: 0.5rem;\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 0.5rem;\r\n    background-color: #f4f4f4;\r\n    border-radius: 0.5rem;\r\n\r\n    select {\r\n        flex: 1;\r\n        font-size: 1rem;\r\n    }\r\n\r\n}\r\n\r\n.transport-company-select {\r\n    font-size: 1rem;\r\n}\r\n/* Basic Styles to mimic the POS layout - Replace with Tailwind if preferred */\r\n.modal-overlay {\r\n  position: fixed; top: 0; left: 0; width: 100%; height: 100%;\r\n  background: rgba(0,0,0,0.5); z-index: 1000;\r\n  display: flex; justify-content: end;\r\n}\r\n\r\n.modal-container {\r\n  background: white; \r\n  width: 30rem; \r\n  border-radius: 1rem; \r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  display: flex; \r\n  flex-direction: column;\r\n}\r\n\r\n/* Header */\r\n.modal-header {\r\n  padding: 10px 15px; \r\n  \r\n  display: flex; justify-content: space-between; align-items: center;\r\n}\r\n/* .close-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; } */\r\n\r\n/* Body */\r\n.modal-body { \r\n    padding: 1.5rem; flex: 1; }\r\n\r\n\r\n/* Top Controls */\r\n.customer-info{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    margin-bottom: 1rem;\r\n\r\n    .customer-name {\r\n        font-size: 1rem;\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        text-align: left;\r\n    }\r\n\r\n}\r\n\r\n.confirm-missing-payment {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n\r\n    .confirm-missing-payment-row {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        width: 100%;\r\n    }\r\n\r\n    .confirm-missing-payment-row-2 {\r\n        input {\r\n            margin-right: 5px;\r\n        }\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.top-controls { \r\n    display: flex; \r\n    justify-content: space-between; \r\n    margin-bottom: 15px; \r\n    flex-wrap: wrap;\r\n    border-bottom: 2px dashed #acacac;\r\n\r\n    .control-group { \r\n        display: flex; \r\n        flex: 2    ;\r\n        margin-bottom: 0.5rem;\r\n    };\r\n    \r\n    .custom-select {\r\n        appearance: none;\r\n        -webkit-appearance: none;\r\n        -moz-appearance: none;\r\n        \r\n        /* 2. basic box styling */\r\n        padding: 8px 30px 8px 10px; /* Right padding creates space for the arrow */\r\n        border: 1px solid #ccc;\r\n        border-radius: 4px;\r\n        background-color: white;\r\n        cursor: pointer;\r\n        font-size: 14px;\r\n        \r\n        /* 3. Add custom arrow using an encoded SVG\r\n        /* This creates a small grey down triangle */\r\n        background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"%23333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"6 9 12 15 18 9\"/></svg>');\r\n        background-repeat: no-repeat;\r\n        background-position: right 8px center;\r\n        background-size: 16px;\r\n    };\r\n\r\n    .date-group { \r\n        display: flex; \r\n        flex: 2    ;\r\n        margin-bottom: 0.5rem;\r\n    };\r\n\r\n    .close-btn-group {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: flex-start;\r\n      flex: 1;\r\n    }\r\n    \r\n    button.close-btn {\r\n        color: black;\r\n        background-color: #f4f4f4;\r\n        /* width: 100px; */\r\n        /* flex: 1; */\r\n        padding: 0.5rem 0.5rem 0.5rem 0.5rem;\r\n        border-radius: 0.5rem;\r\n        margin-bottom: 3px;\r\n    }\r\n    button.close-btn:hover {\r\n        background-color: #b8b8b8;\r\n    }\r\n}\r\n/* no arrow */\r\ninput.customer-payment-input::-webkit-outer-spin-button,\r\ninput.customer-payment-input::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\ninput.customer-payment-input {\r\n    border-top: none;\r\n    border-left: none;\r\n    border-right: none;\r\n    width: 8rem;\r\n    font-size: 1rem;\r\n}\r\ninput.transport-company-amount {\r\n    border-top: none;\r\n    border-left: none;\r\n    border-right: none;\r\n    width: 8rem;\r\n    font-size: 1rem;\r\n}\r\ninput.transport-company-amount::-webkit-outer-spin-button,\r\ninput.transport-company-amount::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\n.form-select, .form-input { \r\n    padding: 1px; \r\n    border: 0px solid #ccc; \r\n    border-radius: 3px; \r\n    margin-right: 3px; }\r\n.date-input{\r\n    width: 8rem;\r\n}\r\n/* Payment Details Grid */\r\n.payment-details { display: flex; flex-direction: column; gap: 10px; }\r\n.row { \r\n    display: flex; justify-content: space-between; align-items: center; \r\n    .value-amt {\r\n        font-weight: bold;\r\n        font-size: 1.1rem;\r\n        width: 8rem;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n    }\r\n    button.value-amt {\r\n      border-bottom: 1px solid #ddd;\r\n      position: relative;\r\n    }\r\n\r\n    .popover-content {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 100%;\r\n      width: 20rem;\r\n      margin-right: 10px;\r\n      background: #fff;\r\n      border: 1px solid #ddd;\r\n      box-shadow: 0 5px 8px rgba(0,0,0,0.5);\r\n      padding: 10px;\r\n      min-width: 120px;\r\n      z-index: 10000;\r\n      border-radius: 4px;\r\n      /* display: block; */\r\n      display: flex;\r\n      flex-direction: row;\r\n\r\n      div {\r\n        margin-right: 8px;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n\r\n      input {\r\n        border-top: none;\r\n        border-left: none;\r\n        border-right: none;\r\n      }\r\n\r\n      input::-webkit-outer-spin-button,\r\n        input::-webkit-inner-spin-button {\r\n        -webkit-appearance: none;\r\n        margin: 0;\r\n        }\r\n        input[type=\"number\"] {\r\n        -moz-appearance: textfield;\r\n        }\r\n\r\n      button {\r\n        margin-left: 5px;\r\n        padding: 3px 8px;\r\n        border: 1px solid #ccc;\r\n        border-radius: 3px;\r\n        background: #f0f0f0;\r\n        cursor: pointer;\r\n      }\r\n\r\n      button.active {\r\n        background: #007bff !important;\r\n        color: #fff;\r\n        border-color: #007bff;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n.value-input { \r\n  text-align: right; border: 1px solid #ddd; padding: 5px; width: 120px;\r\n}\r\n\r\n.divider { border: 0; border-top: 2px dashed #a9a9a9; margin: 10px 0; background-color: transparent;}\r\n.text-primary { color: #007bff; font-size: 1.2rem; }\r\n.text-danger { color: #dc3545; }\r\n.font-bold { font-weight: bold; }\r\n.text-right { text-align: right; }\r\n\r\n/* Methods */\r\n.methods-row { \r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    /* justify-content: space-around;  */\r\n}\r\n.radio-group { display: flex; gap: 15px; }\r\n.radio-label { display: flex; align-items: center; gap: 5px; cursor: pointer; }\r\n\r\n/* Footer */\r\n.modal-footer {\r\n    border-radius: 1rem;\r\n    border-top: 1px solid #eee; background: #f9f9f9;\r\n    display: flex; gap: 10px;\r\n    padding: 0.1rem;\r\n    margin-bottom: 1rem;\r\n    margin-right: 1rem;\r\n    margin-left: 1rem;\r\n\r\n  button {\r\n    flex: 1;\r\n    padding: 0.8rem;\r\n    border-radius: 0.6rem;\r\n  }\r\n\r\n  button:disabled {\r\n    background: #ccc;\r\n    cursor: not-allowed;\r\n  }\r\n}\r\n.note-input { flex: 1; border: 1px solid #ccc; padding: 5px; resize: none; }\r\n.btn-primary {\r\n  background: #007bff; color: white; border: none; \r\n  padding: 0 30px; font-size: 1.1rem; cursor: pointer; border-radius: 4px;\r\n}\r\n.btn-primary:hover { background: #0069d9; }\r\n\r\n\r\n</style>","import script from \"./Payment.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Payment.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Payment.vue?vue&type=style&index=0&id=b7b90920&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b7b90920\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"visible\" class=\"alert-module\">\r\n    <span class=\"alert-message\">{{ message }}</span>\r\n    <span class=\"alert-close\" @click=\"close\">&times;</span>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onUnmounted } from 'vue';\r\n\r\nconst props = defineProps({\r\n  message: { type: String, required: true },\r\n  duration: { type: Number, default: 30000 }, // 30 seconds\r\n});\r\n\r\nconst visible = ref(true);\r\nlet timer = setTimeout(() => {\r\n  visible.value = false;\r\n}, props.duration);\r\n\r\nfunction close() {\r\n  visible.value = false;\r\n  clearTimeout(timer);\r\n}\r\n\r\nonUnmounted(() => {\r\n  clearTimeout(timer);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.alert-module {\r\n  position: fixed;\r\n  right: 2rem;\r\n  bottom: 2rem;\r\n  min-width: 250px;\r\n  background: #222;\r\n  color: #fff;\r\n  padding: 1rem 2.5rem 1rem 1.2rem;\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.2);\r\n  z-index: 9999;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1rem;\r\n}\r\n.alert-message {\r\n  flex: 1;\r\n}\r\n.alert-close {\r\n  margin-left: 1rem;\r\n  cursor: pointer;\r\n  font-size: 1.3rem;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  opacity: 0.7;\r\n  transition: opacity 0.2s;\r\n}\r\n.alert-close:hover {\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import script from \"./AlertModule.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AlertModule.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AlertModule.vue?vue&type=style&index=0&id=11ecf15b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11ecf15b\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"transaction-window\" @click.stop style=\"border-radius: 0.5rem;\">\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ (item && item.id ? 'Sa ' : 'Lp ' ) + (debit_or_credit === 'DR' ? 'Phiu Thu' : 'Phiu Chi') }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\">\r\n              <a href=\"#\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"date\">Ngy</label>\r\n                  <input id=\"date\" ref=\"dateInput\" v-model=\"date\" type=\"date\" required @click=\"openDatePicker\" :min=\"minDate\" :max=\"maxDate\"/>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"amount\">S tin</label>\r\n                  <input id=\"amount\" v-model=\"amountDisplay\" type=\"text\" required style=\"text-align: right;\" @focus=\"selectAll\" />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"debit_or_credit\">Loi phiu</label>\r\n                  <select id=\"debit_or_credit\" v-model=\"debit_or_credit\" required disabled>\r\n                    <option value=\"DR\">Thu (Debit)</option>\r\n                    <option value=\"CR\">Chi (Credit)</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"account\">Ti khon</label>\r\n                  <select id=\"account\" v-model=\"account_id\" required>\r\n                    <option v-for=\"acc in accounts\" :key=\"acc.id\" :value=\"acc.id\" >\r\n                      {{ acc.bank_name }} - {{ acc.account_number }} ({{ acc.account_holder_name }})\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-right\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"transaction_type\">Loi giao dch</label>\r\n                  <select id=\"transaction_type\" v-model=\"transaction_type_id\" required>\r\n                    <option v-for=\"tt in filteredTransactionTypes\" :key=\"tt.id\" :value=\"tt.id\">\r\n                      {{ tt.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"description\">M t</label>\r\n                  <textarea id=\"description\" v-model=\"description\" rows=\"3\"></textarea>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"isActive\" type=\"checkbox\" :disabled=\"!store.getters.userAdmin || !store.getters.userSuperadmin\"/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary new-button\" @click=\"handleSubmit\" :disabled=\"amountDisplay === '0' || !description.trim()\">Lu</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs, computed } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n  name: 'AddEditTrans',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    accounts: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    transactionTypes: {\r\n      type: Array,\r\n      default: () => []\r\n    }, \r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n\r\n    const { item, accounts, transactionTypes, d_edit_days } = toRefs(props);\r\n    const dateInput = ref(null);\r\n    const getLocalDateISO = (date) => {\r\n      const tzOffset = date.getTimezoneOffset() * 60000; // offset in milliseconds\r\n      const localISOTime = new Date(date - tzOffset).toISOString().slice(0, 10);\r\n      return localISOTime;\r\n    };\r\n\r\n    const store = useStore();\r\n    const maxDate = computed(() => {\r\n      return getLocalDateISO(new Date());\r\n    });\r\n\r\n    const minDate = computed(() => {\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return ''; // No minimum date for admins\r\n      }\r\n      const today = new Date();\r\n      const minDay = new Date();\r\n      minDay.setDate(today.getDate() - (props.d_edit_days || 3));\r\n      return getLocalDateISO(minDay);\r\n    });\r\n\r\n    const debit_or_credit = ref(item.value?.debit_or_credit || 'DR');\r\n    \r\n    const amount = ref(item.value && item.value.id ? item.value.amount : '');\r\n    const account_id = ref(item.value && item.value.id ? item.value.account : 1);\r\n    const date = ref(item.value && item.value.id ? item.value.date : new Date().toISOString().slice(0, 10));\r\n    const ref_field = ref(item.value && item.value.id ? item.value.ref : '');\r\n    const description = ref(item.value && item.value.id ? item.value.description : '');\r\n    const isActive = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    const filteredTransactionTypes = computed(() => {\r\n      if (!transactionTypes.value) return [];\r\n      // Assuming transaction type objects have a 'transaction_type' field ('DR' or 'CR')\r\n      return transactionTypes.value.filter(tt => tt.debit_or_credit === debit_or_credit.value);\r\n    });\r\n\r\n    const transaction_type_id = ref(item.value && item.value.id ? item.value.transaction_type : item.value?.debit_or_credit === 'DR' ? 2 : 1);\r\n\r\n    watch(filteredTransactionTypes, (newVal) => {\r\n      const isEditing = item.value && item.value.id;\r\n      if (!isEditing && newVal && newVal.length > 0 && !transaction_type_id.value) {\r\n        transaction_type_id.value = newVal[0].id;\r\n      }\r\n    });\r\n\r\n    const amountDisplay = computed({\r\n      get: () => {\r\n        if (amount.value === '' || amount.value === 0) return '0';\r\n        return new Intl.NumberFormat('vi-VN').format(amount.value);\r\n      },\r\n      set: (newValue) => {\r\n        const sanitized = newValue.replace(/\\D/g, '');\r\n        amount.value = sanitized ? parseInt(sanitized, 10) : 0;\r\n      }\r\n    });\r\n\r\n    watch(item, (newVal) => {\r\n      const isEditing = newVal && newVal.id;\r\n      debit_or_credit.value = newVal?.debit_or_credit || 'DR';\r\n      transaction_type_id.value = isEditing ? newVal.transaction_type : null;\r\n      amount.value = isEditing ? newVal.amount : '';\r\n      account_id.value = isEditing ? newVal.account : null;\r\n      date.value = isEditing ? newVal.date : new Date().toISOString().slice(0, 10);\r\n      ref_field.value = isEditing ? newVal.ref : '';\r\n      description.value = isEditing ? newVal.description : '';\r\n      isActive.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    function openDatePicker() {\r\n      if (dateInput.value) {\r\n        // Modern browsers support showPicker()\r\n        if (typeof dateInput.value.showPicker === 'function') {\r\n          try {\r\n            dateInput.value.showPicker();\r\n          } catch (e) {\r\n            // Fallback for browsers that might throw an error\r\n            dateInput.value.focus();\r\n          }\r\n        } else {\r\n          // Fallback for older browsers like Firefox\r\n          dateInput.value.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    async function handleSubmit() {\r\n      const payload = {\r\n        transaction_type: transaction_type_id.value,\r\n        debit_or_credit: debit_or_credit.value,\r\n        amount: amount.value,\r\n        account: account_id.value,\r\n        date: date.value,\r\n        ref: ref_field.value,\r\n        description: description.value,\r\n        is_active: isActive.value\r\n      };\r\n      // If editing, send PUT; else POST\r\n      if (item.value && item.value.id) {\r\n        await axios.put(`/transactions/${item.value.id}/`, payload)\r\n          .then(response => {\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error updating transaction:', error);\r\n            window.alert(\"Li khi cp nht giao dch: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      } else {\r\n        await axios.post('/transactions/', payload)\r\n          .then(response => {\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error creating transaction:', error);\r\n            window.alert(\"Li khi to giao dch: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      }\r\n    }\r\n\r\n    function selectAll(event) {\r\n      event.target.select();\r\n    }\r\n\r\n    return {\r\n      transaction_type_id,\r\n      debit_or_credit,\r\n      amount,\r\n      amountDisplay,\r\n      account_id,\r\n      date,\r\n      ref_field,\r\n      description,\r\n      isActive,\r\n      item,\r\n      accounts,\r\n      transactionTypes,\r\n      filteredTransactionTypes,\r\n      dateInput,\r\n      openDatePicker,\r\n      handleSubmit,\r\n      selectAll,\r\n      minDate,\r\n      maxDate,\r\n      store\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n\r\ninput , select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding-left: 0.5rem;\r\n  padding-right: 0.5rem;\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\n.transaction-window {\r\n  background: #fff;\r\n  width: 60rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Header */\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n/* Tabs */\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n}\r\n\r\n.tabs-nav li.active a {\r\n  background: #fff;\r\n  border-color: #ddd;\r\n  border-bottom-color: #fff;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin-bottom: -1px;\r\n}\r\n\r\n.tabs-nav a {\r\n  display: block;\r\n  padding: 10px 15px;\r\n  text-decoration: none;\r\n  color: #333;\r\n  border: 1px solid transparent;\r\n  border-bottom: none;\r\n  border-radius: 4px 4px 0 0;\r\n}\r\n\r\n.window-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Form Body */\r\n.form-body {\r\n  padding: 20px;\r\n  background: #fff;\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-layout {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.col-left, .col-right {\r\n  flex: 1;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n/* Footer */\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary;\r\n  color: $kv-primary;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n.no-select {\r\n  user-select: none;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n</style>","import { render } from \"./AddEditTrans.vue?vue&type=template&id=108df820&scoped=true\"\nimport script from \"./AddEditTrans.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditTrans.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditTrans.vue?vue&type=style&index=0&id=108df820&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-108df820\"]])\n\nexport default __exports__","import { render } from \"./Sale.vue?vue&type=template&id=99502ed0&scoped=true\"\nimport script from \"./Sale.vue?vue&type=script&lang=js\"\nexport * from \"./Sale.vue?vue&type=script&lang=js\"\n\nimport \"./Sale.vue?vue&type=style&index=0&id=99502ed0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-99502ed0\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"manage-view\">\r\n        <div class=\"manage\">\r\n            <nav class=\"kv-navbar kv-navbar-main\">\r\n                <section class=\"kv-navbar-container\">\r\n                    <ul class=\"kv-navbar-list\">\r\n                        <li\r\n                            v-for=\"m in this.menus\"\r\n                            :key=\"m.Id\"\r\n                            class=\"kv-navbar-item kv-dropdown kv-menu-item\"\r\n                            :class=\"{ 'active': activeView === m.name , 'd-none': m.require_admin && !$store.getters.userAdmin }\"\r\n                     \r\n                        >\r\n                            <a\r\n                                @click.prevent=\"setActiveView(m.name)\"\r\n                            >\r\n                            <span>{{ m.name }}</span>\r\n                            </a>\r\n\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <ul class=\"kv-navbar-list\">\r\n                        <li\r\n                        class=\"kv-navbar-item kv-navbar-item-light\"\r\n                        >\r\n                        <a class=\"kv-nav-link\" href=\"/sale/\">\r\n                            <i class=\"fas fa-cart-shopping icon-item\"></i>\r\n                            <span>Bn hng</span>\r\n                        </a>\r\n                        </li>\r\n                        <li class=\"kv-navbar-item kv-navbar-item-light\">\r\n                          <span class=\"text-white\"> {{ $store.getters.userName  }}</span>\r\n                        </li>\r\n\r\n                        <li\r\n                        v-if=\"$store.getters.isAuthenticated\" \r\n                        class=\"kv-navbar-item kv-navbar-item-light\"\r\n                        >\r\n                        <a class=\"kv-nav-link\" @click.prevent=\"handleSignOut\">\r\n                            \r\n                            <i class=\"fas fa-sign-out-alt icon-item\"></i>\r\n                            \r\n                        </a>\r\n                        \r\n                        </li>\r\n                    </ul>\r\n                </section>\r\n            </nav>\r\n            <div class=\"main-area\">\r\n                <Products v-if=\"activeView === 'Sn phm'\" :isVisible=\"true\" />\r\n                <Customers v-if=\"activeView === 'Khch hng'\" :isVisible=\"true\" />\r\n                <Invoices v-if=\"activeView === 'Ha n'\" :isVisible=\"true\"  :channels=\"channels\" :d_edit_days=\"d_edit_days\" />\r\n                <Settings v-if=\"activeView === 'Ci t'\" :isVisible=\"true\" />\r\n                <Trans v-if=\"activeView === 'S qu'\" :isVisible=\"true\" :d_edit_days=\"d_edit_days\" />\r\n                <Users v-if=\"activeView === 'Ngi dng'\" :isVisible=\"true\" />\r\n                <Purchases v-if=\"activeView === 'Mua hng'\" :isVisible=\"true\" :d_edit_days=\"d_edit_days\" />\r\n                <DateEndInventory v-if=\"activeView === 'Cht Kho'\" :isVisible=\"true\" :d_edit_days=\"d_edit_days\" />\r\n                <DateEndCashBalance v-if=\"activeView === 'Cht Qu'\" :isVisible=\"true\" :d_edit_days=\"d_edit_days\"/>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\n\r\nimport Products from \"@/components/Manage/Products.vue\";\r\nimport Customers from \"@/components/Manage/Customers.vue\";\r\nimport Invoices from \"@/components/Manage/Invoices.vue\";\r\nimport Settings from \"@/components/Manage/Settings.vue\";\r\nimport Trans from \"@/components/Manage/Trans.vue\";\r\nimport Users from \"@/components/Manage/Users.vue\";\r\nimport Purchases from \"@/components/Manage/Purchases.vue\";\r\nimport DateEndInventory from \"@/components/Manage/DateEndInventory.vue\";\r\nimport DateEndCashBalance from \"@/components/Manage/DateEndCashBalance.vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Manage\",\r\n  components: {\r\n    Products,\r\n    Customers,\r\n    Invoices,\r\n    Settings,\r\n    Trans,  \r\n    Users,\r\n    Purchases,\r\n    DateEndInventory,\r\n    DateEndCashBalance,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n        d_edit_days : 3,\r\n      menus: [\r\n        { Id: 1, name: \"Ha n\" , require_admin : false, query_params : 'invoices'},\r\n        { Id: 2, name: \"Mua hng\" , require_admin : false, query_params : 'purchases'},\r\n        { Id: 3, name: \"Sn phm\" , require_admin : true, query_params : 'products'},\r\n        { Id: 4, name: \"Khch hng\" , require_admin : true, query_params : 'customers'},\r\n        { Id: 5, name: \"S qu\" , require_admin : false, query_params : 'trans'},\r\n        { Id: 6, name: \"Ci t\" , require_admin : true, query_params : 'settings'},\r\n        { Id: 7, name: \"Ngi dng\" , require_admin : true, query_params : 'users'},\r\n        { Id: 8, name: \"Cht Kho\" , require_admin : false, query_params : 'date_end_inventory'},\r\n        { Id: 9, name: \"Cht Qu\" , require_admin : false, query_params : 'date_end_cash_balance'},\r\n      ],\r\n      activeView: \"Ha n\", // Define your menus data here\r\n        channels: [],\r\n    };\r\n  },\r\n  watch: {\r\n    '$route.query.view'(newVal) {\r\n      const menu = this.menus.find(m => m.query_params === newVal);\r\n      if (menu) {\r\n        this.activeView = menu.name;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const view = this.$route.query.view;\r\n    const menu = this.menus.find(m => m.query_params === view);\r\n    if (menu) {\r\n      this.activeView = menu.name;\r\n    } else {\r\n      this.setActiveView(\"Ha n\");\r\n    }\r\n    this.fetchLogicConfig();\r\n  },\r\n  methods: {\r\n    \r\n    async fetchLogicConfig() {\r\n      try {\r\n        const response = await axios.get('/logicconfigs/');\r\n        const channelConfig = response.data.find(c => c.key === 'channels');\r\n        if (channelConfig) {\r\n          this.channels = JSON.parse(channelConfig.value);\r\n        }\r\n\r\n        const editDaysConfig = response.data.find(c => c.key === 'd_edit_days');\r\n        if (editDaysConfig) {\r\n          this.d_edit_days = parseInt(editDaysConfig.value);\r\n        //   console.log(\"Fetched d_edit_days:\", this.d_edit_days);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching channels:', error);\r\n      }\r\n    },\r\n\r\n    setActiveView(page) {\r\n      this.activeView = page; // Assign the emitted page to activeView\r\n      const menu = this.menus.find(m => m.name === page);\r\n      if (menu && this.$route.query.view !== menu.query_params) {\r\n        this.$router.push({ query: { ...this.$route.query, view: menu.query_params } });\r\n      }\r\n    },\r\n    handleSignOut() {\r\n      this.$store.dispatch('removeToken'); // Clear token from Vuex store\r\n      this.$router.push('/signin'); // Redirect to SignIn page\r\n    },\r\n    showReportPopup(condition) {\r\n      // Define your showReportPopup logic here\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary-color: #0070F4;\r\n\r\n.manage-view {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  //   border: 5px solid green; /* Debugging border */\r\n//   border-bottom: 5px solid red; /* Ensure bottom border is visible */\r\n}    \r\n\r\n.manage {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    display: flex ;\r\n    flex-direction: column;\r\n    // display: flex;\r\n    // flex-direction: row;\r\n    .main-area {\r\n            // height: 100%;\r\n            flex: 1;\r\n            width: 100%;\r\n            background-color: rgb(243, 243, 243);\r\n            display: flex;\r\n            justify-content: center;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n}\r\n\r\n\r\n.kv-navbar {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    background-color: $kv-primary-color;\r\n    \r\n\r\n    .kv-navbar-container {\r\n        padding: 0.2rem 0.5rem 0.2rem 0.5rem;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: space-between;\r\n        width: 100rem;\r\n\r\n        .kv-navbar-list {\r\n            display: flex;\r\n            flex-direction: row;\r\n            list-style-type: none;\r\n            margin: 0;\r\n            padding: 0;\r\n\r\n            .kv-navbar-item {\r\n                margin-right: 20px;\r\n                padding: 0.5rem 0.5rem 0.3rem 0.5rem;\r\n                user-select: none;\r\n                a {\r\n                    text-decoration: none;\r\n                    color: #333;\r\n                    font-weight: 500;\r\n                    color: white;\r\n                    &.active {\r\n                        color: #007bff;\r\n                    }\r\n                }\r\n            }\r\n\r\n            .kv-navbar-item.active {\r\n                background-color: #0056b3;\r\n                border-radius: 0.5rem;\r\n            }\r\n\r\n            .kv-navbar-item:hover {\r\n                background-color: #004d9f;\r\n                border-radius: 0.5rem;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n::v-deep table {\r\n    thead {\r\n        // background-color: #0070F4 !important;\r\n        tr {\r\n\r\n            th{\r\n                padding-left: 0.5rem !important;\r\n            }\r\n            // first th\r\n            th:first-child {\r\n                border-top-left-radius: 0.5rem !important;\r\n            }\r\n\r\n            // last th\r\n            th:last-child {\r\n                border-top-right-radius: 0.5rem !important;\r\n            }\r\n            // change opacity of header\r\n\r\n            background-color: #66a9f5 ;\r\n            \r\n        }\r\n    }\r\n\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n$back-ground-color: rgba(165, 165, 165, 0.235);\r\n$kv-primary-color: #0070F4;\r\n\r\n\r\n// hide scroll bar table\r\ntable::-webkit-scrollbar {\r\n    height: 0;\r\n    width: 0;\r\n}\r\n\r\n\r\n\r\n.my-custom-header-class {\r\n    background-color: #00000000 !important;\r\n\r\n    font-weight: bold;\r\n    color: black;\r\n    padding-left: 0.5rem;\r\n    padding-top: 0.4rem;\r\n    padding-bottom: 0.4rem;\r\n}\r\n\r\n.my-custom-header-class-right {\r\n    background-color: #00000000 !important;\r\n    text-align: right;\r\n    font-weight: bold;\r\n    color: black;\r\n    padding-left: 0.5rem;\r\n    padding-top: 0.4rem;\r\n    padding-bottom: 0.4rem;\r\n}\r\n\r\n.v-data-table td, .v-data-table th {\r\n    height: auto;\r\n    padding-left: 0.5rem;\r\n    padding-top: 0.4rem;\r\n    padding-bottom: 0.4rem;\r\n    \r\n    \r\n}\r\n\r\n.v-data-table td {\r\n  border-top: 1px solid #c1c1c1 !important;\r\n  border-bottom: none !important;\r\n}\r\n\r\n.v-data-table-footer {\r\n    background-color: #f0f0f0 !important;\r\n}\r\n\r\n.v-toolbar__content{\r\n    // background-color: $back-ground-color !important;\r\n    height: auto !important;\r\n    border-radius: 0.5rem !important;\r\n}\r\n\r\n// hide scroll bar table\r\n.v-table__wrapper::-webkit-scrollbar {\r\n    height: 0;\r\n    width: 0;\r\n}\r\n\r\n.c-button{\r\n    margin-left: 0.5rem;\r\n}\r\n\r\n.v-table__wrapper {\r\n    user-select: none;\r\n}\r\n.v-table__wrapper * {\r\n    user-select: text;\r\n}\r\n\r\n.text-left {\r\n    text-align: left !important;\r\n    }\r\n\r\n.text-right {\r\n    text-align: right !important;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Hng Ha</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n            <button @click=\"createNewProduct\" class=\"btn btn-primary\" style=\"margin-right: 0.5rem;\">\r\n              To mi\r\n            </button>\r\n\r\n            <button @click=\"toggleGroupList\" class=\"btn btn-outline create-new-btn-group\" style=\"margin-right: 0.5rem;\">\r\n              Nhm SP\r\n            </button>\r\n              <div class=\"list-product-groups btn-group\" style=\"position:relative;\">\r\n                <Teleport to=\"body\" >\r\n                  <div v-if=\"showGroupList\" ref=\"groupListRef\" class=\"product-group-teleport\" @click.self=\"showGroupList = false\" :style=\"{ position: 'fixed', maxHeight:'50vh' , overflow : 'auto', top: groupListPosition.top, left: groupListPosition.left, zIndex: 9999, background: 'white', border: '1px solid #ccc', borderRadius: '6px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', padding: '1rem', minWidth: groupListPosition.width }\">\r\n                    <ul style=\"margin:0; padding:0; list-style:none;\">\r\n                      <li v-for=\"group in productGroups\" :key=\"group.id\" style=\"padding:0.5rem 0; border-bottom:1px solid #eee;\">\r\n                        <span>{{ group.name }}</span>\r\n                        <button @click.stop.prevent=\"openAddEditProductGroup(group)\" class=\"c-button\">\r\n                          <i class=\"fa-solid fa-pen-to-square\"></i>\r\n                        </button>\r\n                      </li>\r\n                      <!-- li for create new -->\r\n                      <li style=\"padding:0.5rem 0; border-bottom:none;\">\r\n                        <button @click=\"openAddEditProductGroup(null)\" style=\"padding:0.3rem 1rem;\">+ To nhm mi</button>\r\n                      </li>\r\n                    </ul>\r\n                    <div style=\"text-align:right; margin-top:0.5rem;\">\r\n                      <button @click=\"showGroupList = false\" style=\"padding:0.3rem 1rem;\">ng</button>\r\n                    </div>\r\n                  </div>\r\n                </Teleport>\r\n              </div>\r\n\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Nhm sn phm</label>\r\n            <div class=\"multiselect-dropdown\" ref=\"productGroupFilterDropdownRef\">\r\n              <button @click=\"toggleProductGroupFilterDropdown\" class=\"multiselect-toggle\">\r\n                {{ selectedGroupNames }}\r\n              </button>\r\n              <div v-if=\"showProductGroupFilterDropdown\" class=\"multiselect-menu\">\r\n                <div class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"allGroupsSelected\"  style=\"margin-right: 0.5rem;\"/>\r\n                    Tt c\r\n                  </label>\r\n                </div>\r\n                <div v-for=\"group in productGroups\" :key=\"group.id\" class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"productGroupFilter\" :value=\"group.id\" style=\"margin-right: 0.5rem;\"/>\r\n                    {{ group.name }}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredProducts\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button class=\"c-button\" @click=\"openEditProduct($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.price=\"{ item }\">\r\n            {{ formatPrice(item.price) }}\r\n          </template>\r\n          <template v-slot:item.productGroup=\"{ item }\">\r\n            <div style=\"display: flex; align-items: center; width: 100%;\">\r\n              <span>{{ item.productGroup }}</span>\r\n\r\n            </div>\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditProduct\r\n      v-if=\"showAddEdit\"\r\n      :productData=\"selectedProduct\"\r\n      :products=\"products\"\r\n      :productGroups=\"productGroups\"\r\n      @close=\"showAddEdit = false\"\r\n      @saved=\"onProductSaved\"\r\n    />\r\n    <AddEditProductGroup\r\n      v-if=\"showAddEditProductGroupModal\"\r\n      :item=\"editingProductGroup\"\r\n      @close=\"showAddEditProductGroupModal = false\"\r\n        @saved=\"onProductGroupSaved\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch, nextTick, onBeforeUnmount } from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditProduct from './AddEditProduct.vue';\r\nimport AddEditProductGroup from './AddEditProductGroup.vue';\r\n\r\nexport default {\r\n  name: 'Products',\r\n  components: {\r\n    AddEditProduct,\r\n    AddEditProductGroup\r\n  },\r\n  setup() {\r\n    const showGroupList = ref(false);\r\n    const groupListPosition = ref({ top: '0px', left: '0px', width: '200px' }); \r\n    const groupListRef = ref(null);\r\n\r\n    const showProductGroupFilterDropdown = ref(false);\r\n    const productGroupFilterDropdownRef = ref(null);\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (showGroupList.value) {\r\n        const groupListEl = groupListRef.value;\r\n        if (groupListEl && !groupListEl.contains(event.target)) {\r\n          showGroupList.value = false;\r\n        }\r\n      }\r\n      if (showProductGroupFilterDropdown.value) {\r\n        if (productGroupFilterDropdownRef.value && !productGroupFilterDropdownRef.value.contains(event.target)) {\r\n          showProductGroupFilterDropdown.value = false;\r\n        }\r\n      }\r\n    };\r\n\r\n    const products = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEdit = ref(false);\r\n    const selectedProduct = ref({});\r\n    const productGroups = ref([]);\r\n    const showAddEditProductGroupModal = ref(false);\r\n    const editingProductGroup = ref(null);\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'M', key: 'code' , headerProps: { class: 'my-custom-header-class' } , cellProps:  { class: 'text-left'}},  \r\n        { title: 'Tn', key: 'name' , headerProps: { class: 'my-custom-header-class' } , cellProps:  { class: 'text-left'}},\r\n        { title: 'Gi', key: 'price' ,headerProps: { class: 'my-custom-header-class pr-3' } , align: 'end', cellProps:  { class: 'text-right pr-3'}},\r\n        { title: 'Nhm', key: 'productGroup' ,headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Loi', key: 'product_type' ,headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Trng thi', key: 'is_active' ,headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const productGroupFilter = ref([]);\r\n\r\n    const selectedGroupNames = computed(() => {\r\n      if (!productGroupFilter.value || productGroupFilter.value.length === 0) return 'Tt c';\r\n      if (productGroupFilter.value.length === productGroups.value.length) return 'Tt c';\r\n      if (productGroupFilter.value.length > 1) return `${productGroupFilter.value.length} nhm  chn`;\r\n      return productGroups.value.find(g => g.id === productGroupFilter.value[0])?.name || 'Chn nhm';\r\n    });\r\n\r\n    const allGroupsSelected = computed({\r\n      get: () => productGroups.value.length > 0 && productGroupFilter.value.length === productGroups.value.length,\r\n      set: (value) => {\r\n        if (value) {\r\n          productGroupFilter.value = productGroups.value.map(g => g.id);\r\n        } else {\r\n          productGroupFilter.value = [];\r\n        }\r\n      }\r\n    });\r\n    const filteredProducts = computed(() => {\r\n      let result = products.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(product => isActiveFilter.value.includes(product.is_active));\r\n      }\r\n\r\n      if (productGroupFilter.value && productGroupFilter.value.length > 0) {\r\n        result = result.filter(product => {\r\n          // Support both id and object for product_group\r\n          if (product.product_group !== undefined && product.product_group !== null) {\r\n            return productGroupFilter.value.includes(product.product_group);\r\n          }\r\n          // fallback: try productGroup string (if present)\r\n          if (product.productGroup !== undefined && product.productGroup !== null) {\r\n            return productGroupFilter.value.some(groupId => {\r\n              return product.productGroup === productGroups.find(g => g.id === groupId)?.name;\r\n            });\r\n          }\r\n          return false;\r\n        });\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(product =>\r\n        (product.name && product.name.toLowerCase().includes(search)) ||\r\n        (product.productGroup && product.productGroup.toLowerCase().includes(search)) ||\r\n        (product.code && product.code.toLowerCase().includes(search)) ||\r\n        (product.product_type && product.product_type.toLowerCase().includes(search))\r\n      );\r\n    });\r\n\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await axios.get('/products/');\r\n        products.value = response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      } catch (error) {\r\n        console.error('Error fetching products:', error);\r\n      }\r\n    };\r\n\r\n    const fetchProductGroups = async () => {\r\n      try {\r\n        const response = await axios.get('/productgroups/');\r\n        productGroups.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching product groups:', error);\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      if (typeof value !== 'number') return value;\r\n      return value.toLocaleString('en-US');\r\n    };\r\n\r\n    function exportToCSV() {\r\n      const csvRows = [];\r\n      // Headers\r\n      csvRows.push(headers.map(h => h.title).join(','));\r\n      // Data\r\n      filteredProducts.value.forEach(row => {\r\n        csvRows.push(headers.map(h => {\r\n          let val = row[h.key];\r\n          if (h.key === 'price') val = formatPrice(val);\r\n          return '\"' + (val !== undefined ? String(val).replace(/\"/g, '\"\"') : '') + '\"';\r\n        }).join(','));\r\n      });\r\n      const csvString = csvRows.join('\\n');\r\n      const blob = new Blob([csvString], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'products.csv';\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n\r\n    function openAddProduct() {\r\n      selectedProduct.value = {};\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    function openEditProduct(event, { item }) {\r\n      // 'item' is the actual data object from the row\r\n      console.log(\"Clicked item:\", item); \r\n      \r\n      // Create a copy to avoid mutating the table data directly while editing\r\n      selectedProduct.value = { ...item }; \r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    function createNewProduct() {\r\n      selectedProduct.value = {};\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    async function onProductSaved() {\r\n\r\n        console.log(\"Product saved, refreshing list...\");\r\n        await fetchProducts();\r\n        // await fetchProducts();\r\n        // send post to /products/ to create new product\r\n        // await axios.post('/products/', selectedProduct.value)\r\n\r\n\r\n        showAddEdit.value = false;\r\n      \r\n    }\r\n\r\n    async function onProductGroupSaved() {\r\n\r\n        console.log(\"Product saved, refreshing list...\");\r\n        await fetchProducts();\r\n        await fetchProductGroups();\r\n        // await fetchProducts();\r\n        // send post to /products/ to create new product\r\n        // await axios.post('/products/', selectedProduct.value)\r\n\r\n\r\n        showAddEdit.value = false;\r\n        showAddEditProductGroupModal.value = false;\r\n      \r\n    }\r\n\r\n    const openAddEditProductGroup = (item) => {\r\n        \r\n        let productGroupTrue = productGroups.value.find(pg => {\r\n          if (typeof item === 'object' && item !== null) {\r\n            return pg.id === item.id;\r\n          } else {\r\n            return pg.id === item;\r\n          }\r\n        });\r\n        console.log(\"Editing product group:\", productGroupTrue);\r\n\r\n      showGroupList.value = false;\r\n      editingProductGroup.value = productGroupTrue;\r\n      showAddEditProductGroupModal.value = true;\r\n    };\r\n\r\n    const updateGroupListPosition = () => {\r\n      nextTick(() => {\r\n        const btn = document.querySelector('.create-new-btn-group');\r\n        if (btn) {\r\n          const rect = btn.getBoundingClientRect();\r\n          groupListPosition.value = {\r\n            top: `${rect.bottom + window.scrollY}px`,\r\n            left: `${rect.left + window.scrollX}px`,\r\n            width: `${rect.width}px`\r\n          };\r\n        }\r\n      });\r\n    };\r\n\r\n    function toggleGroupList() {\r\n      showGroupList.value = !showGroupList.value;\r\n      if (showGroupList.value) updateGroupListPosition();\r\n    }\r\n\r\n    const toggleProductGroupFilterDropdown = () => {\r\n      showProductGroupFilterDropdown.value = !showProductGroupFilterDropdown.value;\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchProducts();\r\n      fetchProductGroups();\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    return {\r\n      products,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEdit,\r\n      selectedProduct,\r\n      productGroups,\r\n      headers,\r\n      filteredProducts,\r\n      productGroupFilter,\r\n      isActiveFilter,\r\n      formatPrice,\r\n      exportToCSV,\r\n      openAddProduct,\r\n      openEditProduct,\r\n      createNewProduct,\r\n      onProductSaved,\r\n      onProductGroupSaved,\r\n      openAddEditProductGroup,\r\n      editingProductGroup,\r\n      showAddEditProductGroupModal,\r\n      showGroupList,\r\n      groupListPosition,\r\n      toggleGroupList,\r\n      groupListRef,\r\n      showProductGroupFilterDropdown,\r\n      productGroupFilterDropdownRef,\r\n      toggleProductGroupFilterDropdown,\r\n      selectedGroupNames,\r\n      allGroupsSelected,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$back-ground-color: rgb(165, 165, 165);\r\n$kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  // gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n    width: 100rem;\r\n    // background-color: rgb(96, 96, 96);\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box; /* Ensure padding is included in dimensions */\r\n\r\n\r\n    .top-area {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // background-color: rgb(243, 243, 243);\r\n        padding-top: 0.5rem;\r\n\r\n        .page-name-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            font-size: 1.2rem;\r\n            font-weight: bold;\r\n            display: flex;\r\n            align-items: flex-start;\r\n            padding-left: 0.5rem;\r\n            // background-color: rgb(200, 200, 200);\r\n        }\r\n\r\n        .action-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n            // background-color: rgb(220, 220, 220);\r\n\r\n            \r\n            .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  // gap: 0.5rem;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .bottom-area {\r\n        flex: 1;\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // border: 2px solid green; /* Debugging border */\r\n\r\n        .filter-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            border-radius: 0.5rem;\r\n            background-color: #f9f9f9;\r\n            padding: 1rem;\r\n\r\n            .filters {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 1.5rem;\r\n            }\r\n\r\n            .form-group {\r\n              display: flex;\r\n              flex-direction: column;\r\n              label {\r\n                font-weight: bold;\r\n                margin-bottom: 0.5rem;\r\n                text-align: left;\r\n              }\r\n            }\r\n\r\n            .checkbox-group label {\r\n              display: flex;\r\n              align-items: center;\r\n              font-weight: normal;\r\n              margin-bottom: 0.5rem;\r\n              input { margin-right: 0.5rem; }\r\n            }\r\n\r\n            .multiselect-dropdown {\r\n              position: relative;\r\n              width: 100%;\r\n            }\r\n\r\n            .multiselect-toggle {\r\n              width: 100%;\r\n              background-color: white;\r\n              color: black;\r\n              border-radius: 0.3rem;\r\n              border: 1px solid #ccc;\r\n              padding: 6px 10px;\r\n              font-size: 1rem;\r\n              text-align: left;\r\n              cursor: pointer;\r\n              white-space: nowrap;\r\n              overflow: hidden;\r\n              text-overflow: ellipsis;\r\n            }\r\n\r\n            .multiselect-menu {\r\n              position: absolute;\r\n              top: 100%;\r\n              left: 0;\r\n              right: 0;\r\n              background: white;\r\n              border: 1px solid #ccc;\r\n              border-top: none;\r\n              border-radius: 0 0 0.3rem 0.3rem;\r\n              z-index: 10;\r\n              max-height: 200px;\r\n              overflow-y: auto;\r\n              box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n\r\n              &::-webkit-scrollbar {\r\n                display: none;\r\n              }\r\n              -ms-overflow-style: none;\r\n              scrollbar-width: none;\r\n            }\r\n\r\n            .multiselect-item {\r\n              padding: 8px 12px;\r\n              cursor: pointer;\r\n              \r\n              label {\r\n                display: flex;\r\n                align-items: center;\r\n                font-weight: normal;\r\n                width: 100%;\r\n                margin-bottom: 0;\r\n              }\r\n            }\r\n            .multiselect-item:hover {\r\n              background-color: #f0f0f0;\r\n            }\r\n        }\r\n\r\n        .data-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            // background-color: rgb(255, 255, 255);\r\n            overflow-x: auto;\r\n\r\n            .v-table{\r\n                background-color: rgb(243, 243, 243) !important;\r\n            }\r\n\r\n            .elevation-1{\r\n                height: calc(100vh - 7.8rem);\r\n                background-color: white;\r\n                color: black;\r\n\r\n                \r\n            }\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n.product-group-teleport {\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n\r\n</style>\r\n","import { createStore } from 'vuex';\r\n\r\nexport default createStore({\r\n  state: {\r\n    isAuthenticated: false,\r\n    token: null,\r\n    isLoading: false, // Add isLoading state\r\n    user_admin: false, // Add user_admin state\r\n    user_name : '', // Add user_name state\r\n    user_superadmin: false, // Add user_superadmin state\r\n  },\r\n  getters: {\r\n    isAuthenticated: (state) => state.isAuthenticated,\r\n    getToken: (state) => state.token,\r\n    isLoading: (state) => state.isLoading, // Getter for isLoading\r\n    userAdmin: (state) => state.user_admin, // Getter for user_admin\r\n    userName: (state) => state.user_name, // Getter for user_name\r\n    userSuperadmin: (state) => state.user_superadmin, // Getter for user_superadmin\r\n  },\r\n  mutations: {\r\n    setAuthentication(state, status) {\r\n      state.isAuthenticated = status;\r\n    },\r\n    setToken(state, token) {\r\n      state.token = token;\r\n    },\r\n    clearToken(state) {\r\n      state.token = null;\r\n    },\r\n    setLoading(state, status) {\r\n      state.isLoading = status; // Mutation to set isLoading\r\n    },\r\n    setUserAdmin(state, status) {\r\n      state.user_admin = !!status;\r\n    },\r\n    setUserName(state, name) {\r\n      state.user_name = name;\r\n    },\r\n    setUserSuperadmin(state, status) {\r\n      state.user_superadmin = !!status;\r\n    },\r\n  },\r\n  actions: {\r\n    checkAuthentication({ commit }) {\r\n      commit('setLoading', true); // Set loading to true\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        commit('setToken', token);\r\n        commit('setAuthentication', true);\r\n      } else {\r\n        commit('clearToken');\r\n        commit('setAuthentication', false);\r\n      }\r\n      commit('setLoading', false); // Set loading to false\r\n    },\r\n\r\n    setUserAdmin({ commit }, status) {\r\n      commit('setUserAdmin', status);\r\n    },\r\n    \r\n    setUserName({ commit }, name) {\r\n      commit('setUserName', name);\r\n    },\r\n\r\n    setUserSuperadmin({ commit }, status) {\r\n      commit('setUserSuperadmin', status);\r\n    },\r\n\r\n    setToken({ commit }, token) {\r\n      commit('setLoading', true);\r\n      localStorage.setItem('token', token);\r\n      commit('setToken', token);\r\n      commit('setAuthentication', true);\r\n      commit('setLoading', false);\r\n\r\n    },\r\n\r\n    removeToken({ commit }) {\r\n      commit('setLoading', true);\r\n      localStorage.removeItem('token');\r\n      commit('clearToken');\r\n      commit('setAuthentication', false);\r\n      commit('setLoading', false);\r\n      commit('setUserAdmin', false);\r\n      commit('setUserName', '');\r\n      commit('setUserSuperadmin', false);\r\n    },\r\n  },\r\n  modules: {},\r\n});\r\n","<template>\r\n  <div class=\"modal-overlay\" @click.self=\"$emit('close')\">\r\n    <div class=\"product-window\" @click.stop :style=\"{ width: product.product_type === 'combo' ? '60rem' : '30rem' }\">\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ product.id ? 'Sa sn phm' : 'To mi sn phm' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\">\r\n              <a href=\"#\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label>Tn</label>\r\n                  <input type=\"text\" v-model=\"product.name\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>M</label>\r\n                  <input type=\"text\" v-model=\"product.code\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Gi</label>\r\n                  <input type=\"text\" v-model=\"priceDisplay\" style=\"text-align: right;\" @focus=\"selectAll\" @beforeinput=\"onlyNumbers\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Loi</label>\r\n                  <select v-model=\"product.product_type\" :disabled=\"!!product.id && !store.getters.userSuperadmin\">\r\n                    <option value=\"normal\">Thng</option>\r\n                    <option value=\"combo\">Combo</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Nhm sn phm</label>\r\n                  <select v-model=\"product.product_group\">\r\n                    <option v-for=\"group in productGroups.filter(g => g.is_active)\" :key=\"group.id\" :value=\"group.id\">\r\n                      {{ group.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Kch hot</label>\r\n                  <input type=\"checkbox\" v-model=\"product.is_active\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-right\" v-if=\"product.product_type === 'combo'\">\r\n                <div class=\"combo-area\">\r\n                  <label style=\"font-weight: bold; margin-bottom: 1rem; display: block;\">Sn phm thnh phn</label>\r\n                  <div v-for=\"(item, idx) in comboItems\" :key=\"idx\" class=\"combo-item-row\">\r\n                    <div class=\"combo-item-input-wrapper\" style=\"position: relative; flex: 1;\">\r\n                      <input \r\n                          type=\"text\" \r\n                          v-model=\"item.searchText\" \r\n                          @focus=\"handleComboFocus($event, item)\"\r\n                          @blur=\"handleComboBlur\"\r\n                          placeholder=\"Tm sn phm...\"\r\n                          class=\"combo-product-input\" \r\n                          style=\"width: 100%;\"\r\n                      />\r\n                    </div>\r\n                    <input type=\"number\" v-model.number=\"item.quantity\" min=\"1\" class=\"combo-quantity-input\" />\r\n                    <button @click=\"removeComboItem(idx)\" class=\"btn-remove-combo\"></button>\r\n                  </div>\r\n                  <button @click=\"addComboItem\" class=\"btn btn-secondary\" style=\"margin-top: 1rem;\">Thm sn phm</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary new-button\" @click=\"saveProduct\" :disabled=\"!product.name.trim() || (product.product_type === 'combo' && (comboItems.length === 0 || comboItems.some(item => !item.code)))\">Lu</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Teleport to=\"body\">\r\n    <div v-if=\"activeComboDropdown\" class=\"combo-dropdown-teleport\" :style=\"dropdownStyle\">\r\n        <div \r\n            v-for=\"p in filterProducts(activeComboDropdown.searchText)\" \r\n            :key=\"p.code\" \r\n            class=\"combo-dropdown-item\"\r\n            @mousedown.prevent=\"selectComboProduct(activeComboDropdown, p)\"\r\n        >\r\n            {{ p.name }} ({{ p.code }})\r\n        </div>\r\n        <div v-if=\"filterProducts(activeComboDropdown.searchText).length === 0\" class=\"combo-dropdown-item\" style=\"color: #999; cursor: default;\">\r\n            Khng tm thy\r\n        </div>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed } from 'vue';\r\nimport axios from 'axios';\r\nimport store from '@/store';\r\n\r\nconst props = defineProps({\r\n  productData: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  productGroups: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  products: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n});\r\n\r\nconst emit = defineEmits(['close', 'saved']);\r\n\r\nconst product = ref({\r\n  id: null,\r\n  productGroup: '',\r\n  name: '',\r\n  product_type: 'normal',\r\n  price: 0,\r\n  package_details: null,\r\n  is_active: true,\r\n  code: '',\r\n  product_group: null,\r\n});\r\n\r\n// Combo items: [{ product: <id>, quantity: <number> }]\r\nconst comboItems = ref([]);\r\n\r\nconst activeComboDropdown = ref(null);\r\nconst dropdownStyle = ref({});\r\n\r\nconst priceDisplay = computed({\r\n  get: () => {\r\n    if (!product.value.price || product.value.price === 0) return '0';\r\n    return new Intl.NumberFormat('vi-VN').format(product.value.price);\r\n  },\r\n  set: (newValue) => {\r\n    const sanitized = newValue.replace(/\\D/g, '');\r\n    product.value.price = sanitized ? parseInt(sanitized, 10) : 0;\r\n  }\r\n});\r\n\r\nconst normalProducts = computed(() => props.products.filter(p => p.product_type === 'normal'));\r\n\r\nwatch(() => props.productData, (newVal) => {\r\n  if (newVal && Object.keys(newVal).length > 0 && newVal.id) {\r\n    product.value = { ...newVal };\r\n\r\n    // If editing a combo, load combo items from package_details\r\n    console.log(\"Loaded product package_details:\", product);\r\n    if (product.value.product_type === 'combo' && Array.isArray(product.value.package_details)) {\r\n      comboItems.value = product.value.package_details.map(item => {\r\n        const found = props.products.find(p => p.code === item.code);\r\n        const name = found ? found.name : (item.name || item.code);\r\n        return {\r\n          code: item.code,\r\n          name: name,\r\n          quantity: item.quantity,\r\n          searchText: name ? `${name} (${item.code})` : item.code\r\n        };\r\n      });\r\n    } else {\r\n      comboItems.value = [];\r\n    }\r\n  } else {\r\n    product.value = {\r\n      id: null,\r\n      productGroup: '',\r\n      name: '',\r\n      product_type: 'normal',\r\n      price: 0,\r\n      package_details: null,\r\n      is_active: true,\r\n      code: '',\r\n      product_group: null,\r\n    };\r\n    comboItems.value = [];\r\n  }\r\n}, { immediate: true, deep: true });\r\n\r\nwatch(() => product.value.product_type, (type) => {\r\n  if (type !== 'combo') {\r\n    comboItems.value = [];\r\n  }\r\n});\r\n\r\nfunction addComboItem() {\r\n  comboItems.value.push({ code: '', name: '', quantity: 1, searchText: '' });\r\n}\r\nfunction removeComboItem(idx) {\r\n  comboItems.value.splice(idx, 1);\r\n}\r\n\r\nfunction selectAll(event) {\r\n  event.target.select();\r\n}\r\n\r\nfunction onlyNumbers(event) {\r\n  if (event.data && !/^\\d+$/.test(event.data)) {\r\n    event.preventDefault();\r\n  }\r\n}\r\n\r\nfunction filterProducts(text) {\r\n  let filtered = normalProducts.value;\r\n  console.log(\"Filtering products with text:\", filtered);\r\n  const lower = text.toLowerCase();\r\n  filtered = filtered.filter(p => p.is_active);\r\n  // Filter by search term\r\n  filtered = filtered.filter(p => \r\n    (p.name && p.name.toLowerCase().includes(lower)) || \r\n    (p.code && p.code.toLowerCase().includes(lower))\r\n  );\r\n  // Filter out products already in comboItems\r\n  return filtered.filter(p => !comboItems.value.some(comboItem => comboItem.code === p.code));\r\n}\r\n\r\nfunction selectComboProduct(item, p) {\r\n  item.code = p.code;\r\n  item.name = p.name;\r\n  item.searchText = `${p.name} (${p.code})`;\r\n  activeComboDropdown.value = null;\r\n}\r\n\r\nfunction handleComboFocus(event, item) {\r\n  const rect = event.target.getBoundingClientRect();\r\n  dropdownStyle.value = {\r\n    top: `${rect.bottom}px`,\r\n    left: `${rect.left}px`,\r\n    width: `${rect.width}px`\r\n  };\r\n  activeComboDropdown.value = item;\r\n}\r\n\r\nfunction handleComboBlur() {\r\n  setTimeout(() => {\r\n    activeComboDropdown.value = null;\r\n  }, 200);\r\n}\r\n\r\nasync function saveProduct() {\r\n  let package_details = null;\r\n  if (product.value.product_type === 'combo') {\r\n    // Only keep valid combo items\r\n    package_details = comboItems.value\r\n      .filter(item => item.code && item.quantity > 0)\r\n      .map(item => ({ code: item.code, quantity: item.quantity }));\r\n  }\r\n  const payload = {\r\n    name: product.value.name,\r\n    product_type: product.value.product_type,\r\n    price: product.value.price,\r\n    package_details,\r\n    is_active: product.value.is_active,\r\n    code: product.value.code,\r\n    product_group: product.value.product_group,\r\n  };\r\n  try {\r\n    if (product.value.id) {\r\n      await axios.put(`/products/${product.value.id}/`, payload);\r\n    } else {\r\n      await axios.post('/products/', payload);\r\n    }\r\n    emit('saved');\r\n    emit('close');\r\n  } catch (error) {\r\n    console.error(\"Error saving product:\", error);\r\n    window.alert(\"Li khi lu sn phm: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0,0,0,0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.product-window {\r\n  background: #fff;\r\n  max-width: 95vw;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n}\r\n\r\n.tabs-nav li.active a {\r\n  background: #fff;\r\n  border-color: #ddd;\r\n  border-bottom-color: #fff;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin-bottom: -1px;\r\n}\r\n\r\n.tabs-nav a {\r\n  display: block;\r\n  padding: 10px 15px;\r\n  text-decoration: none;\r\n  color: #333;\r\n  border: 1px solid transparent;\r\n  border-bottom: none;\r\n  border-radius: 4px 4px 0 0;\r\n}\r\n\r\n.window-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.form-body {\r\n  padding: 20px;\r\n  background: #fff;\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-layout {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.col-left, .col-right {\r\n  flex: 1;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary;\r\n  color: $kv-primary;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n  align-self: flex-start;\r\n}\r\n\r\n.no-select {\r\n  user-select: none;\r\n}\r\n\r\n.combo-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.combo-item-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.combo-product-select {\r\n  flex: 1;\r\n}\r\n\r\n.combo-quantity-input {\r\n  width: 80px;\r\n}\r\n\r\n.btn-remove-combo {\r\n  background: #e74c3c;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 24px;\r\n  height: 24px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  line-height: 24px;\r\n  text-align: center;\r\n}\r\n\r\n.combo-dropdown-teleport {\r\n  position: fixed;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  z-index: 9999;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n.combo-dropdown-item {\r\n  padding: 8px 10px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-color: #f0f0f0;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./AddEditProduct.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddEditProduct.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AddEditProduct.vue?vue&type=style&index=0&id=207629a1&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-207629a1\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"product-group-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa nhm sn phm' : 'To nhm sn phm mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"name\">Tn nhm</label>\r\n                  <input id=\"name\" v-model=\"name\" type=\"text\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"description\">M t</label>\r\n                  <textarea id=\"description\" v-model=\"description\" rows=\"3\"></textarea>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"isActive\" type=\"checkbox\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary new-button\" :disabled=\"!name.trim()\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditProductGroup',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n    const name = ref(item.value ? item.value.name : '');\r\n    const description = ref(item.value ? item.value.description : '');\r\n    const isActive = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    watch(item, (newVal) => {\r\n      name.value = newVal ? newVal.name : '';\r\n      description.value = newVal ? newVal.description : '';\r\n      isActive.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    async function handleSubmit() {\r\n\r\n        // check if editing or creating\r\n        if (item.value && item.value.id) {\r\n          // Editing existing product group\r\n          const payload = {\r\n            id: item.value.id,\r\n            name: name.value,\r\n            description: description.value,\r\n            is_active: isActive.value\r\n          };\r\n\r\n          // send api request to update\r\n          await axios.put(`/productgroups/${item.value.id}/`, payload)\r\n            .then(response => {\r\n              console.log(\"Product group updated:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error updating product group:\", error);\r\n              window.alert(\"Li khi cp nht nhm sn phm: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n          return;\r\n        } else {\r\n          // Creating new product group\r\n            const payload = {\r\n              name: name.value,\r\n              description: description.value,\r\n              is_active: isActive.value\r\n            };\r\n\r\n            // send api request to create\r\n            await axios.post('/productgroups/', payload)\r\n              .then(response => {\r\n                console.log(\"Product group created:\", response.data);\r\n                emit('saved', payload);\r\n              })\r\n              .catch(error => {\r\n                console.error(\"Error creating product group:\", error);\r\n                window.alert(\"Li khi to nhm sn phm: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n              });\r\n      }\r\n    };\r\n\r\n    return {\r\n      name,\r\n      description,\r\n      isActive,\r\n      item,\r\n      handleSubmit\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.product-group-window {\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditProductGroup.vue?vue&type=template&id=583c84f8&scoped=true\"\nimport script from \"./AddEditProductGroup.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditProductGroup.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditProductGroup.vue?vue&type=style&index=0&id=583c84f8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-583c84f8\"]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=7a8e3c03&scoped=true\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=7a8e3c03&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a8e3c03\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Khch Hng</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n            <button @click=\"createNewCustomer\" class=\"btn btn-primary\">\r\n              To mi\r\n            </button>\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"customers\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          :server-items-length=\"totalCustomers\"\r\n          fixed-header\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button class=\"c-button\" @click=\"openEditCustomer($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n       \r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditCustomer\r\n      v-if=\"showAddEdit\"\r\n      :customer=\"selectedCustomer\"\r\n      :regionList=\"provinces\"\r\n      :wardList=\"wards\"\r\n      :type=\"editOrNew\"\r\n      @close=\"showAddEdit = false\"\r\n      @saved=\"onCustomerSaved\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch  } from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditCustomer from './AddEditCustomer.vue';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n  name: 'Customers',\r\n  components: {\r\n    AddEditCustomer\r\n  },\r\n  setup() {\r\n    const editOrNew = ref('new'); // 'new' or 'edit'\r\n    const store = useStore();\r\n    const customers = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEdit = ref(false);\r\n    const selectedCustomer = ref({});\r\n    const wards = ref([]);\r\n    const provinces = ref([]);\r\n    const totalCustomers = ref(0);\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' } , cellProps: { class: 'text-left' }},\r\n        { title: 'M', key: 'code', headerProps: { class: 'my-custom-header-class' } , cellProps:  { class: 'text-left'}},\r\n        { title: 'Tn', key: 'name', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'S in thoi', key: 'phone_number', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Trng thi', key: 'is_active', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n\r\n    const fetchCustomers = async () => {\r\n      // store.commit('setLoading', true);\r\n      try {\r\n        const params = {\r\n          page: currentPage.value,\r\n          page_size: pageSize.value,\r\n        };\r\n        if (filterText.value) {\r\n          params.search = filterText.value;\r\n        }\r\n        if (isActiveFilter.value.length > 0) {\r\n          params['is_active[]'] = isActiveFilter.value;\r\n        }\r\n        const response = await axios.get('/customers/', { params });\r\n        customers.value = response.data.results;\r\n        totalCustomers.value = response.data.count;\r\n      } catch (error) {\r\n        console.error('Error fetching customers:', error);\r\n      }\r\n      // store.commit('setLoading', false);\r\n    };\r\n\r\n    const fetchProvincesWards = async () => {\r\n      try {\r\n        const [provincesResponse, wardsResponse] = await Promise.all([\r\n          axios.get('/provinces/'),\r\n          axios.get('/wards/')\r\n        ]);\r\n        provinces.value = provincesResponse.data;\r\n        wards.value = wardsResponse.data;\r\n      } catch (error) {\r\n        console.error('Error fetching provinces or wards:', error);\r\n      }\r\n    };\r\n\r\n    function createNewCustomer() {\r\n      editOrNew.value = 'new';\r\n      selectedCustomer.value = {};\r\n      showAddEdit.value = true;\r\n    };\r\n\r\n    function exportToCSV() {\r\n      const csvRows = [];\r\n      csvRows.push(headers.map(h => h.title).join(','));\r\n      customers.value.forEach(row => {\r\n        csvRows.push(headers.map(h => {\r\n          let val = row[h.key];\r\n          return '\"' + (val !== undefined ? String(val).replace(/\"/g, '\"\"') : '') + '\"';\r\n        }).join(','));\r\n      });\r\n      const csvString = csvRows.join('\\n');\r\n      const blob = new Blob([csvString], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'customers.csv';\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n\r\n    function openAddCustomer() {\r\n      selectedCustomer.value = {};\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    function openEditCustomer(event, { item }) {\r\n      console.log('Editing customer:', item);\r\n      selectedCustomer.value = { ...item };\r\n      editOrNew.value = 'edit';\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    async function onCustomerSaved() {\r\n      console.log('Customer saved, refreshing list...');\r\n      await fetchCustomers();\r\n      showAddEdit.value = false;\r\n    }\r\n\r\n    watch([currentPage, pageSize, filterText, isActiveFilter], fetchCustomers, { deep: true });\r\n\r\n    onMounted(() => {\r\n      fetchCustomers();\r\n      fetchProvincesWards();\r\n    });\r\n\r\n    return {\r\n      editOrNew,\r\n      customers,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEdit,\r\n      selectedCustomer,\r\n      headers,\r\n      isActiveFilter,\r\n      provinces,\r\n      wards,\r\n      totalCustomers,\r\n      exportToCSV,\r\n      openAddCustomer,\r\n      openEditCustomer,\r\n      onCustomerSaved,\r\n      createNewCustomer,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  $kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n  width: 100rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n\r\n  .top-area {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    padding-top: 0.5rem;\r\n\r\n    .page-name-area {\r\n      width: 15rem;\r\n      margin: 0.3rem;\r\n      font-size: 1.2rem;\r\n      font-weight: bold;\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding-left: 0.5rem;\r\n    }\r\n\r\n    .action-area {\r\n      flex: 1;\r\n      margin: 0.3rem;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-start;\r\n      .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  gap: 0.5rem;\r\n                }\r\n            }\r\n    }\r\n  }\r\n\r\n  .bottom-area {\r\n    flex: 1;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    .filter-area {\r\n      width: 15rem;\r\n      margin: 0.3rem;\r\n      border-radius: 0.5rem;\r\n      background-color: #f9f9f9;\r\n      padding: 1rem;\r\n\r\n      .filters {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 1.5rem;\r\n      }\r\n\r\n      .form-group {\r\n        display: flex;\r\n        flex-direction: column;\r\n        label {\r\n          font-weight: bold;\r\n          margin-bottom: 0.5rem;\r\n          text-align: left;\r\n        }\r\n      }\r\n\r\n      .checkbox-group label {\r\n        display: flex;\r\n        align-items: center;\r\n        font-weight: normal;\r\n        margin-bottom: 0.5rem;\r\n        input { margin-right: 0.5rem; }\r\n      }\r\n    }\r\n\r\n    .data-area {\r\n      flex: 1;\r\n      margin: 0.3rem;\r\n      overflow-x: auto;\r\n\r\n      .v-table {\r\n        background-color: rgb(243, 243, 243) !important;\r\n      }\r\n\r\n      .elevation-1 {\r\n        height: calc(100vh - 7.8rem);\r\n        background-color: white;\r\n        color: black;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"modal-overlay\" @click=\"closeForm\">\r\n    <div class=\"customer-window\" @click.stop>\r\n      <div class=\"window-header \">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ props.customer ? 'Cp nht khch hng' : 'Thm khch hng' }}</span>\r\n          <span class=\"branch-info\"> Chi nhnh to: <span> {{ props.currentBranch }} </span></span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"closeForm\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li :class=\"{ active: activeTab === 'general' }\">\r\n              <a href=\"#\" @click.prevent=\"activeTab = 'general'\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div v-if=\"activeTab === 'general'\" class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">M khch hng</label>\r\n                  <input type=\"text\" v-model=\"form.code\" placeholder=\"M mc nh\" :disabled=\"type!=='new'\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"required no-select\">Tn khch hng</label>\r\n                  <input type=\"text\" v-model=\"form.name\" placeholder=\"Bt buc\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">in thoi</label>\r\n                  <input type=\"text\" v-model=\"form.phone_number\" placeholder=\"Bt buc\" @input=\"handlePhoneNumberInput\"/>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">a ch</label>\r\n                  <textarea v-model=\"form.address\" rows=\"2\" placeholder=\"S nh, ta nh, ng, ng\"></textarea>\r\n                </div>\r\n                \r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Khu vc</label>\r\n                  <div class=\"autocomplete-wrapper\">\r\n                    <input \r\n                      ref=\"locationInputRef\"\r\n                      type=\"text\" \r\n                      v-model=\"form.province_name\" \r\n                      placeholder=\"Chn Tnh/TP\"\r\n                      @focus=\"openDropdown('location')\"\r\n                      @input=\"openDropdown('location')\"\r\n                      @blur=\"handleBlur('location')\"\r\n                      @change=\"handleChangeLocation\"\r\n                    />\r\n                    \r\n                    <Teleport to=\"body\">\r\n                      <ul \r\n                        v-if=\"showLocationList && filteredRegions.length\" \r\n                        class=\"autocomplete-list\"\r\n                        :style=\"dropdownStyle\"\r\n                      >\r\n                        <li \r\n                          v-for=\"region in filteredRegions\" \r\n                          :key=\"region.id\"\r\n                          @mousedown.prevent=\"selectLocation(region)\"\r\n                        >\r\n                          {{ region.name }}\r\n                        </li>\r\n                      </ul>\r\n                    </Teleport>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Phng x</label>\r\n                  <div class=\"autocomplete-wrapper\">\r\n                    <input \r\n                      ref=\"wardInputRef\"\r\n                      type=\"text\" \r\n                      v-model=\"form.ward_name\" \r\n                      placeholder=\"Chn Phng/X\"\r\n                      :disabled=\"!form.province\"\r\n                      @focus=\"openDropdown('ward')\"\r\n                      @input=\"openDropdown('ward')\"\r\n                      @blur=\"handleBlur('ward')\"\r\n                    />\r\n\r\n                    <Teleport to=\"body\">\r\n                      <ul \r\n                        v-if=\"showWardList && filteredWards.length\" \r\n                        class=\"autocomplete-list\"\r\n                        :style=\"dropdownStyle\"\r\n                      >\r\n                        <li \r\n                          v-for=\"ward in filteredWards\" \r\n                          :key=\"ward.id\"\r\n                          @mousedown.prevent=\"selectWard(ward)\"\r\n                        >\r\n                          {{ ward.name }}\r\n                        </li>\r\n                      </ul>\r\n                    </Teleport>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div class=\"col-right\">\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Ngy sinh</label>\r\n                  <div class=\"row-inputs\">\r\n                    <input type=\"date\" v-model=\"form.birthdate\" class=\"input-date\" />\r\n                    <div class=\"gender-radios\">\r\n                      <label><input type=\"radio\" :value=\"true\" v-model=\"form.gender\" /> Nam</label>\r\n                      <label><input type=\"radio\" :value=\"false\" v-model=\"form.gender\" /> N</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Email</label>\r\n                  <input type=\"email\" v-model=\"form.email\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Facebook</label>\r\n                  <input type=\"text\" v-model=\"form.facebook\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label class=\"no-select\">Ghi ch</label>\r\n                  <textarea v-model=\"form.comments\" rows=\"3\"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button class=\"btn btn-outline\" @click=\"closeForm\">\r\n            <i class=\"icon-ban\"></i> B qua\r\n          </button>\r\n          <button class=\"btn btn-primary new-button\" @click=\"saveCustomer\" :disabled=\"!form.name.trim() || !form.phone_number.trim() || !form.address.trim() || !form.province_name.trim()\">\r\n            <i class=\"icon-save\"></i> Lu\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, defineProps, computed, nextTick, watch } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst activeTab = ref('general');\r\nconst emit = defineEmits(['close', 'saved']);\r\n\r\nconst props = defineProps({\r\n  currentBranch: {\r\n    type: String,\r\n    default: 'Chi nhnh Gia'\r\n  },\r\n  customer: {\r\n    type: Object,\r\n    default: null\r\n  }, \r\n  regionList: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  wardList: {\r\n    type: Array,\r\n    default: () => []\r\n  }, \r\n  type: {\r\n    type: String,\r\n    default: 'new' // or 'edit'\r\n  }\r\n});\r\n\r\n\r\n\r\nconst defaultForm = () => ({\r\n  code: '',\r\n  name: '',\r\n  phone_number: '',\r\n  address: '',\r\n  location: '', // region id\r\n  locationName: '', // region name for display\r\n  ward: null, // ward id\r\n  ward_name: '', // ward name for display\r\n  province: null,\r\n  province_name: '',\r\n  // group: '',\r\n  birthdate: '',\r\n  gender: true,\r\n  email: '',\r\n  facebook: '',\r\n  comments: ''\r\n});\r\n\r\nfunction handlePhoneNumberInput(event) {\r\n  let value = event.target.value;\r\n  // Allow numbers, +, -, (, )\r\n  form.phone_number = value.replace(/[^0-9+\\-()]/g, '');\r\n}\r\n\r\n\r\nconst form = reactive(defaultForm());\r\n\r\n// --- Autocomplete Logic ---\r\nconst showLocationList = ref(false);\r\nconst showWardList = ref(false);\r\n\r\n// Refs for the inputs so we can calculate position\r\nconst locationInputRef = ref(null);\r\nconst wardInputRef = ref(null);\r\n\r\n// Reactive style object for the dropdown\r\nconst dropdownStyle = reactive({\r\n  top: '0px',\r\n  left: '0px',\r\n  width: '0px',\r\n  display: 'block' // Required for teleport\r\n});\r\n\r\n// Calculate position based on the input element\r\nconst updateDropdownPosition = (inputElement) => {\r\n  if (!inputElement) return;\r\n  \r\n  const rect = inputElement.getBoundingClientRect();\r\n  dropdownStyle.top = `${rect.bottom + window.scrollY}px`; // Add scrollY for safety\r\n  dropdownStyle.left = `${rect.left + window.scrollX}px`;\r\n  dropdownStyle.width = `${rect.width}px`;\r\n};\r\n\r\nconst openDropdown = (type) => {\r\n  // Close others first\r\n  showLocationList.value = false;\r\n  showWardList.value = false;\r\n\r\n  nextTick(() => {\r\n    if (type === 'location') {\r\n      console.log('Opening location dropdown');\r\n      updateDropdownPosition(locationInputRef.value);\r\n      showLocationList.value = true;\r\n    } else if (type === 'ward') {\r\n      updateDropdownPosition(wardInputRef.value);\r\n      showWardList.value = true;\r\n    }\r\n  });\r\n};\r\n\r\n// --- Regions ---\r\nconst filteredRegions = computed(() => {\r\n  // console.log('Filtering regions with query:', form.province_name);\r\n  const query = form.province_name ? form.province_name.toLowerCase() : '';\r\n  // console.log('Filtering regions with query:', query);\r\n  // console.log('Total regions available:', props.regionList);\r\n  if (!query) return props.regionList || [];\r\n  return (props.regionList || []).filter(r => r.name.toLowerCase().includes(query));\r\n});\r\n\r\nfunction selectLocation(region) {\r\n  form.province = region.id;\r\n  form.province_name = region.name;\r\n  form.ward = null;\r\n  form.ward_name = '';\r\n  showLocationList.value = false;\r\n}\r\n\r\nfunction handleChangeLocation() {\r\n  // form.province_id = null;\r\n  form.ward_id = null;\r\n  form.ward = '';\r\n}\r\n\r\nconst filteredWards = computed(() => {\r\n  const queryWard = form.ward_name ? form.ward_name.toLowerCase() : '';\r\n  // console.log('Filtering wards with query:', queryWard);\r\n  // console.log('Total wards available:', props.wardList);\r\n  // console.log('Current selected province:', form.province);\r\n\r\n  let wardsToFilter = props.wardList || [];\r\n  \r\n  // If a province is selected, filter by province first\r\n  if (form.province) {\r\n    wardsToFilter = wardsToFilter.filter(w => w.province === form.province);\r\n  }\r\n  // console.log('Wards to filter count:', form.province, wardsToFilter.length);\r\n\r\n  // Always filter by the ward name query\r\n  return wardsToFilter.filter(w => w.name.toLowerCase().includes(queryWard));\r\n});\r\n\r\nfunction selectWard(ward) {\r\n  form.ward = ward.id;\r\n  form.ward_name = ward.name;\r\n  showWardList.value = false;\r\n}\r\n\r\n// --- UI Helpers ---\r\nfunction handleBlur(type) {\r\n  setTimeout(() => {\r\n    if (type === 'location') showLocationList.value = false;\r\n    if (type === 'ward') showWardList.value = false;\r\n  }, 200);\r\n}\r\n\r\n// --- Standard Actions ---\r\n\r\nconst saveCustomer = async () => {\r\n  //  check if old customer or new]\r\n  // send request to backend /customers/ \r\n\r\n  const customerData = { ...form };\r\n\r\n  // remove province_name and ward_name before sending\r\n  // customerData.address =  customerData.address + ', ' + customerData.ward_name + ', ' + customerData.province_name;\r\n  // delete customerData.province_name;\r\n  // delete customerData.ward_name;\r\n  \r\n  if (props.type === 'edit') {\r\n    // update \r\n    delete customerData.province_name;\r\n    delete customerData.ward_name;\r\n    await axios.put(`/customers/${props.customer.id}/`, customerData)\r\n      .then(response => {\r\n        console.log(\"Customer updated:\", response.data);\r\n        emit('saved', response.data);\r\n        emit('close');\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error updating customer:\", error);\r\n        window.alert(\"Li cp nht khch hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n      });\r\n  } else {\r\n    // create new\r\n    // customerData.address =  customerData.address + ', ' + customerData.ward_name + ', ' + customerData.province_name;\r\n    delete customerData.province_name;\r\n    delete customerData.ward_name;\r\n    await axios.post('/customers/', customerData)\r\n      .then(response => {\r\n        console.log(\"Customer created:\", response.data);\r\n        emit('saved', response.data);\r\n        emit('close');\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error creating customer:\", error);\r\n        window.alert(\"Li to khch hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n      });\r\n  }\r\n   \r\n\r\n};\r\n\r\nconst closeForm = () => {\r\n  emit('close');\r\n};\r\n\r\n// Ensure locationName is synced when editing\r\nonMounted(() => {\r\n  if (props.customer) {\r\n    Object.assign(form, defaultForm(), props.customer);\r\n    if (props.customer.province) {\r\n      const region = props.regionList.find(r => r.id === props.customer.province);\r\n      if (region) form.province_name = region.name;\r\n    }\r\n    if (props.customer.ward) {\r\n      const ward = props.wardList.find(w => w.id === props.customer.ward);\r\n      if (ward) form.ward_name = ward.name;\r\n    }\r\n  } else {\r\n    Object.assign(form, defaultForm());\r\n  }\r\n});\r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  $kv-primary: #0070F4;\r\n/* Reset & Layout */\r\n\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n\r\n.no-select {\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n\r\n}\r\n\r\ninput, textarea, select {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n\r\n\r\n$calendar-icon-url: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"15\" viewBox=\"0 0 24 24\"><path fill=\"%23000\" d=\"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z\"/></svg>');\r\n\r\ninput[type=\"date\"] {\r\n  position: relative;\r\n  \r\n  &::-webkit-calendar-picker-indicator {\r\n    cursor: pointer;\r\n    \r\n    // 1. Hide the default native icon\r\n    background-image: none; \r\n    \r\n    // 2. Define the mask shape using the icon\r\n    -webkit-mask-image: $calendar-icon-url;\r\n    mask-image: $calendar-icon-url;\r\n    \r\n    -webkit-mask-repeat: no-repeat;\r\n    mask-repeat: no-repeat;\r\n    \r\n    -webkit-mask-position: center;\r\n    mask-position: center;\r\n    \r\n    -webkit-mask-size: 1rem;\r\n    mask-size: 1rem;\r\n\r\n    // 3. Set your specific color here!\r\n    background-color: black; \r\n    // font-size: 0.5rem;\r\n    \r\n    // Adjust size if needed\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0,0,0,0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.customer-window {\r\n  background: #fff;\r\n  width: 900px;\r\n  max-width: 95vw;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden; /* This no longer cuts off the dropdown */\r\n}\r\n\r\n/* Header */\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.branch-info {\r\n  font-weight: normal;\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n  margin-left: 10px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n/* Tabs */\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n}\r\n\r\n.tabs-nav li {\r\n  margin-right: 2px;\r\n}\r\n\r\n.tabs-nav a {\r\n  display: block;\r\n  padding: 10px 15px;\r\n  text-decoration: none;\r\n  color: #333;\r\n  border: 1px solid transparent;\r\n  border-bottom: none;\r\n  border-radius: 4px 4px 0 0;\r\n}\r\n\r\n.tabs-nav li.active a {\r\n  background: #fff;\r\n  border-color: #ddd;\r\n  border-bottom-color: #fff;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin-bottom: -1px;\r\n}\r\n\r\n/* Form Body */\r\n.form-body {\r\n  padding: 20px;\r\n  background: #fff;\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-layout {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.col-left, .col-right {\r\n  flex: 1;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n  -webkit-user-select: none; /* Safari */\r\n  -moz-user-select: none;    /* Firefox */\r\n  -ms-user-select: none;     /* IE10+/Edge */\r\n  user-select: none;   \r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.form-group input, \r\n.form-group select, \r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 6px 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.form-group input:focus, \r\n.form-group select:focus, \r\n.form-group textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\n/* AUTOCOMPLETE STYLES (UPDATED) */\r\n.autocomplete-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n/* This is now a GLOBAL class because of Teleport */\r\n.autocomplete-list {\r\n  position: fixed; /* Fixed to viewport */\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  z-index: 99999; /* Sit on top of everything */\r\n  box-shadow: 0 4px 10px rgba(0,0,0,0.2);\r\n  border-radius: 0 0 4px 4px;\r\n}\r\n\r\n.autocomplete-list li {\r\n  padding: 8px 10px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #eee;\r\n  font-size: 13px; /* Ensure font size matches */\r\n  color: #333;\r\n}\r\n\r\n.autocomplete-list li:hover {\r\n  background-color: #f0f8ff;\r\n  color: $kv-primary;\r\n}\r\n\r\n/* Specific Field Styles */\r\n.row-inputs {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  gap: 15px;\r\n}\r\n\r\n.input-date {\r\n  width: 140px !important;\r\n}\r\n\r\n.gender-radios {\r\n  display: flex;\r\n}\r\n\r\n.gender-radios label {\r\n  width: auto;\r\n  margin-right: 15px;\r\n  font-weight: normal;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.gender-radios label input {\r\n  margin-right: 5px;\r\n}\r\n\r\n/* Footer */\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color:   $kv-primary;\r\n  color: $kv-primary;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #0077b5;\r\n}\r\n</style>","import script from \"./AddEditCustomer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AddEditCustomer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AddEditCustomer.vue?vue&type=style&index=0&id=6fa675d2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6fa675d2\"]])\n\nexport default __exports__","import { render } from \"./Customers.vue?vue&type=template&id=59f2d80c&scoped=true\"\nimport script from \"./Customers.vue?vue&type=script&lang=js\"\nexport * from \"./Customers.vue?vue&type=script&lang=js\"\n\nimport \"./Customers.vue?vue&type=style&index=0&id=59f2d80c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-59f2d80c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Ha n</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n            <button @click=\"triggerImportShopee\" class=\"btn btn-primary\" style=\"margin-right: 0.5rem;\">\r\n              Import SP\r\n            </button>\r\n            <button @click=\"toggleGroupList\" class=\"btn btn-outline create-new-btn-group\" style=\"margin-right: 0.5rem;\" v-if =\"store.getters.userAdmin || store.getters.userSuperadmin\">\r\n              Ph Ph\r\n            </button>\r\n              <div class=\"list-product-groups btn-group\" style=\"position:relative;\" >\r\n                <Teleport to=\"body\">\r\n                  <div v-if=\"showSurchargeList\" ref=\"groupListRef\" class=\"product-group-teleport\" @click.self=\"showSurchargeList = false\" :style=\"{ \r\n                      position: 'fixed', \r\n                      maxHeight:'50vh' , \r\n                      overflow : 'auto', top: groupListPosition.top, \r\n                      left: groupListPosition.left, zIndex: 9999, \r\n                      background: 'white', border: '1px solid #ccc', borderRadius: '6px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', padding: '1rem', minWidth: groupListPosition.width }\">\r\n                    <ul style=\"margin:0; padding:0; list-style:none;\">\r\n                      <li v-for=\"surcharge in surchargeList\" :key=\"surcharge.id\" style=\"padding:0.5rem 0; border-bottom:1px solid #eee;\">\r\n                        <span>{{ surcharge.code }}</span>\r\n                        <button @click.stop.prevent=\"openAddEditSurcharge(surcharge)\" class=\"c-button\">\r\n                          <i class=\"fas fa-edit\"></i>\r\n                        </button>\r\n                      </li>\r\n                      <!-- li for create new -->\r\n                      <li style=\"padding:0.5rem 0; border-bottom:none;\">\r\n                        <button @click=\"openAddEditSurcharge(null)\" style=\"padding:0.3rem 1rem;\">+ To mi</button>\r\n                      </li>\r\n                    </ul>\r\n                    <div style=\"text-align:right; margin-top:0.5rem;\">\r\n                      <button @click=\"showSurchargeList = false\" style=\"padding:0.3rem 1rem;\">ng</button>\r\n                    </div>\r\n                  </div>\r\n                </Teleport>\r\n              </div>\r\n\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fas fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n\r\n            \r\n            <input type=\"file\" ref=\"fileInputShopee\" style=\"display: none\" @change=\"handleFileUploadShopee\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>T ngy</label>\r\n            <input type=\"date\" v-model=\"dateFrom\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>n ngy</label>\r\n            <input type=\"date\" v-model=\"dateTo\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Ngi bn</label>\r\n            <div class=\"multiselect-dropdown\" ref=\"sellerFilterDropdownRef\">\r\n              <button @click=\"toggleSellerFilterDropdown\" class=\"multiselect-toggle\">\r\n                {{ selectedSellerNames }}\r\n              </button>\r\n              <div v-if=\"showSellerFilterDropdown\" class=\"multiselect-menu\">\r\n                <div class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"allSellersSelected\" style=\"margin-right: 0.5rem;\"/>\r\n                    Tt c\r\n                  </label>\r\n                </div>\r\n                <div v-for=\"seller in uniqueSellers\" :key=\"seller\" class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"sellerFilter\" :value=\"seller\" style=\"margin-right: 0.5rem;\"/>\r\n                    {{ seller }}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Knh bn</label>\r\n            <div class=\"multiselect-dropdown\" ref=\"channelFilterDropdownRef\">\r\n              <button @click=\"toggleChannelFilterDropdown\" class=\"multiselect-toggle\">\r\n                {{ selectedChannelNames }}\r\n              </button>\r\n              <div v-if=\"showChannelFilterDropdown\" class=\"multiselect-menu\">\r\n                <div class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"allChannelsSelected\" style=\"margin-right: 0.5rem;\"/>\r\n                    Tt c\r\n                  </label>\r\n                </div>\r\n                <div v-for=\"channel in uniqueChannels\" :key=\"channel\" class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"channelFilter\" :value=\"channel\" style=\"margin-right: 0.5rem;\"/>\r\n                    {{ channel }}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredInvoices\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button v-if=\"isEditable(item.date)\" class=\"c-button\" @click=\"openEditInvoice($event, { item })\">\r\n              <i class=\"fas fa-edit\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.final_total=\"{ item }\">\r\n            {{ formatPrice(item.final_total) }}\r\n          </template>\r\n          <template v-slot:item.created_at=\"{ item }\">\r\n            {{ formatDateTime(item.created_at) }}\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditInvoice\r\n      v-if=\"showAddEdit\"\r\n      :item=\"selectedInvoice\"\r\n      :channels=\"channels\"\r\n      @close=\"showAddEdit = false\"\r\n      @saved=\"onInvoiceSaved\"\r\n    />\r\n\r\n    <AddEditSurcharge\r\n      v-if=\"showAddEditSurchargeModal\"\r\n      :item=\"editingSurcharge\"\r\n      @close=\"showAddEditSurchargeModal = false\"\r\n      @saved=\"fetchSurcharges\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, nextTick, onBeforeUnmount, watch} from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditInvoice from './AddEditInvoices.vue';\r\nimport AddEditSurcharge from './AddEditSurcharges.vue';\r\nimport { useStore } from 'vuex';\r\n// import store from 'vuex';\r\n\r\nexport default {\r\n  name: 'Invoices',\r\n  components: {\r\n    AddEditInvoice,\r\n    AddEditSurcharge,\r\n  },\r\n  props: {\r\n    channels: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  setup(props) {\r\n    \r\n\r\n    const editOrNew = ref('new'); // 'new' or 'edit'\r\n    const groupListPosition = ref({ top: '0px', left: '0px', width: '200px' }); \r\n    // const surcharges = ref([]);\r\n    const store = useStore();\r\n    const invoices = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(200);\r\n    const showAddEdit = ref(false);\r\n    const selectedInvoice = ref({});\r\n    const showSurchargeList = ref(false);\r\n    const surchargeList = ref([]);\r\n    const wards = ref([]);\r\n    const showAddEditSurchargeModal = ref(false);\r\n    const editingSurcharge = ref(null);\r\n    const provinces = ref([]);\r\n    const sellerFilter = ref([]);\r\n    const uniqueSellers = ref([]);\r\n    const showSellerFilterDropdown = ref(false);\r\n    const sellerFilterDropdownRef = ref(null);\r\n    const channelFilter = ref([]);\r\n    const uniqueChannels = ref([]);\r\n    const showChannelFilterDropdown = ref(false);\r\n    const channelFilterDropdownRef = ref(null);\r\n    const fileInputShopee = ref(null);\r\n\r\n    const triggerImportShopee = () => {\r\n      if (fileInputShopee.value) {\r\n        fileInputShopee.value.click();\r\n      }\r\n    };\r\n\r\n    const channels = computed(() => {\r\n      return props.channels || [];\r\n    });\r\n\r\n    const handleFileUploadShopee = async (event) => {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      store.commit('setLoading', true);\r\n      try {\r\n        await axios.post('/process_shopee/', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n        await fetchInvoices();\r\n        window.alert(\"Import thnh cng!\");\r\n      } catch (error) {\r\n        console.error(\"Error importing shopee file:\", error);\r\n        window.alert(\"Li import file: \" + (error.response?.data?.message || error.message));\r\n      } finally {\r\n        store.commit('setLoading', false);\r\n        event.target.value = null;\r\n      }\r\n    };\r\n\r\n    const getLocalDateISO = (date) => {\r\n      return new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);\r\n    };\r\n\r\n    const dateFrom = ref(getLocalDateISO(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)));\r\n    const dateTo = ref(getLocalDateISO(new Date()));\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' } , cellProps:  { class: 'text-left'}},\r\n        { title: 'M H', key: 'code', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Khch hng', key: 'customer_name', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Ngi bn', key: 'seller', headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Tng tin', key: 'final_total', headerProps: { class: 'my-custom-header-class' },align: 'end' ,cellProps:  { class: 'text-right'}},\r\n        { title: 'Ngy', key: 'date', headerProps: { class: 'my-custom-header-class' }, align: 'end', cellProps:  { class: 'text-right'}},\r\n        \r\n        { title: 'Trng thi', key: 'is_active', headerProps: { class: 'my-custom-header-class' },align: 'end', cellProps:  { class: 'text-right'}},\r\n        { title: 'Thi gian to', key: 'created_at', headerProps: { class: 'my-custom-header-class pr-3' }, align: 'end', cellProps:  { class: 'text-right pr-3'}},\r\n    ];\r\n\r\n    const groupListRef = ref(null);\r\n\r\n    const toggleGroupList = () => {\r\n      showSurchargeList.value = !showSurchargeList.value;\r\n      if (showSurchargeList.value) updateGroupListPosition();\r\n    }\r\n\r\n    const updateGroupListPosition = () => {\r\n      nextTick(() => {\r\n        const btn = document.querySelector('.create-new-btn-group');\r\n        if (btn) {\r\n          const rect = btn.getBoundingClientRect();\r\n          groupListPosition.value = {\r\n            top: `${rect.bottom + window.scrollY}px`,\r\n            left: `${rect.left + window.scrollX}px`,\r\n            width: `${rect.width}px`\r\n          };\r\n        }\r\n      });\r\n    };\r\n\r\n    const toggleSellerFilterDropdown = () => {\r\n      showSellerFilterDropdown.value = !showSellerFilterDropdown.value;\r\n    };\r\n\r\n    const toggleChannelFilterDropdown = () => {\r\n      showChannelFilterDropdown.value = !showChannelFilterDropdown.value;\r\n    };\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (showSurchargeList.value) {\r\n        const groupListEl = groupListRef.value;\r\n        if (groupListEl && !groupListEl.contains(event.target)) {\r\n          showSurchargeList.value = false;\r\n        }\r\n      }\r\n      if (showSellerFilterDropdown.value) {\r\n        if (sellerFilterDropdownRef.value && !sellerFilterDropdownRef.value.contains(event.target)) {\r\n          showSellerFilterDropdown.value = false;\r\n        }\r\n      }\r\n      if (showChannelFilterDropdown.value) {\r\n        if (channelFilterDropdownRef.value && !channelFilterDropdownRef.value.contains(event.target)) {\r\n          showChannelFilterDropdown.value = false;\r\n        }\r\n      }\r\n    };\r\n\r\n    const selectedSellerNames = computed(() => {\r\n      if (!sellerFilter.value || sellerFilter.value.length === 0) return 'Tt c';\r\n      if (sellerFilter.value.length === uniqueSellers.value.length) return 'Tt c';\r\n      if (sellerFilter.value.length > 1) return `${sellerFilter.value.length} ngi bn  chn`;\r\n      return sellerFilter.value[0];\r\n    });\r\n\r\n    const allSellersSelected = computed({\r\n      get: () => uniqueSellers.value.length > 0 && sellerFilter.value.length === uniqueSellers.value.length,\r\n      set: (value) => {\r\n        if (value) {\r\n          sellerFilter.value = uniqueSellers.value.slice();\r\n        } else {\r\n          sellerFilter.value = [];\r\n        }\r\n      }\r\n    });\r\n\r\n    const selectedChannelNames = computed(() => {\r\n      if (!channelFilter.value || channelFilter.value.length === 0) return 'Tt c';\r\n      if (channelFilter.value.length === uniqueChannels.value.length) return 'Tt c';\r\n      if (channelFilter.value.length > 1) return `${channelFilter.value.length} knh  chn`;\r\n      return channelFilter.value[0];\r\n    });\r\n\r\n    const allChannelsSelected = computed({\r\n      get: () => uniqueChannels.value.length > 0 && channelFilter.value.length === uniqueChannels.value.length,\r\n      set: (value) => {\r\n        if (value) {\r\n          channelFilter.value = uniqueChannels.value.slice();\r\n        } else {\r\n          channelFilter.value = [];\r\n        }\r\n      }\r\n    });\r\n\r\n    const openAddEditSurcharge = (item) => {\r\n        \r\n        let surchargeTrue = surchargeList.value.find(pg => {\r\n          if (typeof item === 'object' && item !== null) {\r\n            return pg.id === item.id;\r\n          } else {\r\n            return pg.id === item;\r\n          }\r\n        });\r\n        console.log(\"Editing surcharge:\", surchargeTrue);\r\n\r\n      showSurchargeList.value = false;\r\n      editingSurcharge.value = surchargeTrue;\r\n      showAddEditSurchargeModal.value = true;\r\n    };\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const filteredInvoices = computed(() => {\r\n      let result = invoices.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(invoice => isActiveFilter.value.includes(invoice.is_active));\r\n      }\r\n\r\n      if (sellerFilter.value && sellerFilter.value.length > 0) {\r\n        result = result.filter(invoice => sellerFilter.value.includes(invoice.seller));\r\n      }\r\n\r\n      if (channelFilter.value && channelFilter.value.length > 0) {\r\n        result = result.filter(invoice => channelFilter.value.includes(invoice.channel));\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(invoice =>\r\n        (invoice.code && invoice.code.toLowerCase().includes(search)) ||\r\n        (invoice.customer_name && invoice.customer_name.toLowerCase().includes(search))\r\n      );\r\n    });\r\n\r\n    const fetchInvoices = async () => {\r\n      store.commit('setLoading', true);\r\n      try {\r\n        const response = await axios.get('/invoices/', {\r\n          params: {\r\n            dateFrom: dateFrom.value,\r\n            dateTo: dateTo.value,\r\n          }\r\n        });\r\n        invoices.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching invoices:', error);\r\n      }\r\n      store.commit('setLoading', false);\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      if (typeof value !== 'number') return value;\r\n      return value.toLocaleString('en-US');\r\n    };\r\n\r\n\r\n    const formatDateTime = (dateString) => { // format YYYY-MM-DD HH:mm:ss\r\n      if (!dateString) return '';\r\n      const date = new Date(dateString);\r\n      \r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      const hours = String(date.getHours()).padStart(2, '0');\r\n      const minutes = String(date.getMinutes()).padStart(2, '0');\r\n      const seconds = String(date.getSeconds()).padStart(2, '0');\r\n\r\n      return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;\r\n    };\r\n\r\n\r\n\r\n    const fetchProvincesWards = async () => {\r\n      try {\r\n        const [provincesResponse, wardsResponse] = await Promise.all([\r\n          axios.get('/provinces/'),\r\n          axios.get('/wards/')\r\n        ]);\r\n        provinces.value = provincesResponse.data;\r\n        wards.value = wardsResponse.data;\r\n      } catch (error) {\r\n        console.error('Error fetching provinces or wards:', error);\r\n      }\r\n    };\r\n\r\n    const fetchSurcharges = async () => {\r\n      try {\r\n        const response = await axios.get('/surcharges/', {\r\n        });\r\n        surchargeList.value = response.data;\r\n        // console.log('Fetched surcharges:', surchargeList.value);\r\n      } catch (error) {\r\n        // console.error('Error fetching surcharges:', error);\r\n      }\r\n    };\r\n\r\n    function createNewInvoice() {\r\n      editOrNew.value = 'new';\r\n      selectedInvoice.value = {};\r\n      showAddEdit.value = true;\r\n    };\r\n\r\n    async function exportToCSV() {\r\n      store.commit('setLoading', true);\r\n      try {\r\n        const response = await axios.get('/invoices/', {\r\n          params: {\r\n            dateFrom: dateFrom.value,\r\n            dateTo: dateTo.value,\r\n            export: 'true'\r\n          },\r\n          responseType: 'blob'\r\n        });\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'invoices.xlsx';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n      } catch (error) {\r\n        console.error('Error exporting invoices:', error);\r\n      }\r\n      store.commit('setLoading', false);\r\n    }\r\n\r\n    const isEditable = (itemDate) => {\r\n      // console.log(\"Checking if editable for date:\", itemDate);\r\n      // console.log(\"User admin:\", store.getters.userAdmin);\r\n\r\n\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return true;\r\n      }\r\n\r\n      if (!itemDate) return false;\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n\r\n      const date = new Date(itemDate);\r\n      // console.log(\"Item date object:\", date);\r\n      date.setHours(0, 0, 0, 0);\r\n\r\n      const diffDays = (today.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);\r\n      // console.log(\"Difference in days:\", diffDays, \"Allowed edit days:\", props.d_edit_days);\r\n      return diffDays < props.d_edit_days;\r\n    };\r\n\r\n    function openAddCustomer() {\r\n      selectedCustomer.value = {};\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    function openEditInvoice(event, { item }) {\r\n      console.log('Editing invoice:', item);\r\n      selectedInvoice.value = { ...item };\r\n      editOrNew.value = 'edit';\r\n      showAddEdit.value = true;\r\n    }\r\n\r\n    async function onInvoiceSaved() {\r\n      console.log('Invoice saved, refreshing list...');\r\n      await fetchInvoices();\r\n      showAddEdit.value = false;\r\n    }\r\n\r\n    watch([dateFrom, dateTo], fetchInvoices);\r\n\r\n    watch(invoices, (newInvoices) => {\r\n      if (newInvoices && newInvoices.length > 0) {\r\n        const sellers = newInvoices.map(inv => inv.seller).filter(Boolean);\r\n        uniqueSellers.value = [...new Set(sellers)];\r\n        const channelsData = newInvoices.map(inv => inv.channel).filter(Boolean);\r\n        uniqueChannels.value = [...new Set(channelsData)];\r\n      }\r\n    });\r\n\r\n    onMounted(() => {\r\n      fetchInvoices();\r\n      fetchProvincesWards();\r\n      fetchSurcharges();\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    \r\n\r\n    return {\r\n      editOrNew,\r\n      invoices,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEdit,\r\n      selectedInvoice,\r\n      showSurchargeList,\r\n      surchargeList,\r\n      headers,\r\n      filteredInvoices,\r\n      isActiveFilter,\r\n      provinces,\r\n      wards,\r\n      groupListPosition,\r\n      groupListRef,\r\n      showAddEditSurchargeModal,\r\n      editingSurcharge,\r\n      channels,\r\n      sellerFilter,\r\n      uniqueSellers,\r\n      showSellerFilterDropdown,\r\n      sellerFilterDropdownRef,\r\n      toggleSellerFilterDropdown,\r\n      selectedSellerNames,\r\n      allSellersSelected,\r\n      channelFilter,\r\n      uniqueChannels,\r\n      showChannelFilterDropdown,\r\n      channelFilterDropdownRef,\r\n      toggleChannelFilterDropdown,\r\n      selectedChannelNames,\r\n      allChannelsSelected,\r\n      // surcharges,\r\n      formatPrice,\r\n      formatDateTime,\r\n      exportToCSV,\r\n      openAddCustomer,\r\n      openEditInvoice,\r\n      onInvoiceSaved,\r\n      createNewInvoice,\r\n      toggleGroupList,\r\n      openAddEditSurcharge,\r\n      fetchSurcharges,\r\n      dateFrom,\r\n      dateTo,\r\n      fileInputShopee,\r\n      isEditable,\r\n      triggerImportShopee,\r\n      handleFileUploadShopee,\r\n\r\n      store\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  $kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  // gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n  width: 100rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n\r\n  .top-area {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    padding-top: 0.5rem;\r\n\r\n    .page-name-area {\r\n      width: 15rem;\r\n      margin: 0.3rem;\r\n      font-size: 1.2rem;\r\n      font-weight: bold;\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding-left: 0.5rem;\r\n    }\r\n\r\n    .action-area {\r\n      flex: 1;\r\n      margin: 0.3rem;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-start;\r\n      .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  // gap: 0.5rem;\r\n                }\r\n            }\r\n    }\r\n  }\r\n\r\n  .bottom-area {\r\n    flex: 1;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    .filter-area {\r\n      width: 15rem;\r\n      margin: 0.3rem;\r\n      border-radius: 0.5rem;\r\n      background-color: #f9f9f9;\r\n      padding: 1rem;\r\n\r\n      .filters {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 1.5rem;\r\n      }\r\n\r\n      .form-group {\r\n        display: flex;\r\n        flex-direction: column;\r\n        label {\r\n          font-weight: bold;\r\n          margin-bottom: 0.5rem;\r\n          text-align: left;\r\n        }\r\n      }\r\n\r\n      .checkbox-group label {\r\n        display: flex;\r\n        align-items: center;\r\n        font-weight: normal;\r\n        margin-bottom: 0.5rem;\r\n        input { margin-right: 0.5rem; }\r\n      }\r\n    }\r\n\r\n    .data-area {\r\n      flex: 1;\r\n      margin: 0.3rem;\r\n      overflow-x: auto;\r\n\r\n      .v-table {\r\n        background-color: rgb(243, 243, 243) !important;\r\n      }\r\n\r\n      .elevation-1 {\r\n        height: calc(100vh - 7.8rem);\r\n        background-color: white;\r\n        color: black;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.multiselect-dropdown {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.multiselect-toggle {\r\n  width: 100%;\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.multiselect-menu {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  border-top: none;\r\n  border-radius: 0 0 0.3rem 0.3rem;\r\n  z-index: 10;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n}\r\n\r\n.multiselect-item {\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  \r\n  label {\r\n    display: flex;\r\n    align-items: center;\r\n    font-weight: normal;\r\n    width: 100%;\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n.multiselect-item:hover {\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.product-group-teleport {\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n</style>\r\n","<template>\r\n  <div v-if=\"!showPrintView\" class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"invoice-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">Chi tit Ha n: {{ item.code }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label>Khch hng</label>\r\n                  <input type=\"text\" :value=\"item.customer_name\" readonly />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>in thoi</label>\r\n                  <input type=\"text\" :value=\"item.customer_phone_number\" readonly />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>a ch</label>\r\n                  <textarea :value=\"item.delivery_address\" rows=\"2\" readonly></textarea>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Ngy</label>\r\n                  <input type=\"date\" v-model=\"form.date\" :disabled=\"!item.is_active\" @click=\"$event.target.showPicker()\" :max=\"maxDate\" :min=\"minDate\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Knh bn</label>\r\n                  <select v-model=\"form.channel\" :disabled=\"!item.is_active\">\r\n                    <option v-for=\"channel in channels\" :key=\"channel.name\" :value=\"channel.name\">\r\n                      {{ channel.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Ghi ch</label>\r\n                  <textarea :value=\"item.note\" rows=\"2\"></textarea>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Kch hot</label>\r\n                    <input type=\"checkbox\" v-model=\"form.is_active\" :disabled=\"!item.is_active || (!store.getters.userAdmin && !store.getters.userSuperadmin)\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-right\">\r\n                <div class=\"items-section\">\r\n                  <strong style=\"color: black;\">Cc sn phm</strong>\r\n                  <div class=\"items-list\">\r\n                    <div v-for=\"product in item.items\" :key=\"product.uuid\" class=\"item-row\">\r\n                      <div class=\"item-name\">{{ product.name }}</div>\r\n                      <div class=\"item-qty\">x{{ product.quantity }}</div>\r\n                      <div class=\"item-price\">{{ formatCurrency(product.price * product.quantity) }}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"totals-section\">\r\n                  <strong style=\"color: black;\">Tng cng</strong>\r\n                  <div class=\"total-row\">\r\n                    <span>Tin hng</span>\r\n                    <span>{{ formatCurrency(item.total) }}</span>\r\n                  </div>\r\n                  <div class=\"total-row\" v-if=\"Number(item.discount) > 0\">\r\n                    <span>Gim gi</span>\r\n                    <span>-{{ formatCurrency(item.discount) }}</span>\r\n                  </div>\r\n                  <div class=\"total-row\" v-if=\"Number(item.total_surcharge) > 0\">\r\n                    <span>Ph ph</span>\r\n                    <span>+{{ formatCurrency(item.total_surcharge) }}</span>\r\n                  </div>\r\n                  <hr v-if=\"!item.code.startsWith('SP_')\"/>\r\n                  <div class=\"total-row final\" v-if=\"!item.code.startsWith('SP_')\">\r\n                    <span>Khch phi tr</span>\r\n                    <span>{{ formatCurrency(item.final_total) }}</span>\r\n                  </div>\r\n                  <div class=\"total-row\" v-if=\"!item.code.startsWith('SP_')\">\r\n                    <span> thanh ton</span>\r\n                    <span>{{ formatCurrency(item.amount_paid_by_customer) }}</span>\r\n                  </div>\r\n                  <hr v-if=\"!item.code.startsWith('SP_')\"/>\r\n                  <!-- only show if code do not start with SP_ -->\r\n                  <div class=\"total-row final\" v-if=\"!item.code.startsWith('SP_')\">\r\n                    <span>Tin ship  tr bng tin mt</span>\r\n                    <span>{{ formatCurrency(item.amount_paid_transport_company) }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"handlePrint\" style=\"margin-right: auto;\"> In   </button>\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\" v-if=\"item.is_active\">Lu</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <PrintInvoice v-else :order=\"item\" />\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, watch, toRefs, computed, nextTick } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport PrintInvoice from '../Sale/PrintInvoice.vue';\r\n\r\nexport default {\r\n  name: 'AddEditInvoice',\r\n  components: {\r\n    PrintInvoice,\r\n  },\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    channels: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3,\r\n    },\r\n  },\r\n\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const showPrintView = ref(false);\r\n\r\n    const getLocalDateISO = (date) => {\r\n      const tzOffset = date.getTimezoneOffset() * 60000; // offset in milliseconds\r\n      const localISOTime = new Date(date - tzOffset).toISOString().slice(0, 10);\r\n      return localISOTime;\r\n    };\r\n    const maxDate = computed(() => {\r\n      const today = new Date();\r\n      return today.toISOString().split('T')[0];\r\n    });\r\n\r\n    const minDate = computed(() => {\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return ''; // No minimum date for admins\r\n      }\r\n      const today = new Date();\r\n      const minDay = new Date();\r\n      minDay.setDate(today.getDate() - (props.d_edit_days || 3));\r\n      return getLocalDateISO(minDay);\r\n    });\r\n    const { item } = toRefs(props);\r\n    const store = useStore();\r\n\r\n    const form = reactive({\r\n      date: '',\r\n      is_active: true,\r\n      channel: '',\r\n    });\r\n\r\n    watch(item, (newVal) => {\r\n      if (newVal) {\r\n        form.date = newVal.date;\r\n        form.is_active = newVal.is_active;\r\n        form.channel = newVal.channel;\r\n      }\r\n    }, { immediate: true });\r\n\r\n    const formatCurrency = (value) => {\r\n      const numericValue = Number(value);\r\n      if (isNaN(numericValue)) return '0 ';\r\n      return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(numericValue);\r\n    };\r\n\r\n    async function handleSubmit() {\r\n      const payload = {\r\n        date: form.date,\r\n        is_active: form.is_active,\r\n        channel: form.channel,\r\n      };\r\n\r\n      try {\r\n        const response = await axios.patch(`/invoices/${item.value.id}/`, payload);\r\n        emit('saved', response.data);\r\n        emit('close');\r\n      } catch (error) {\r\n        console.error(\"Error updating invoice:\", error);\r\n        window.alert(\"Li cp nht ha n: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n      }\r\n    }\r\n\r\n    const handlePrint = () => {\r\n      showPrintView.value = true;\r\n      nextTick(() => {\r\n        window.print();\r\n        showPrintView.value = false;\r\n      });\r\n    };\r\n\r\n    return {\r\n      form,\r\n      formatCurrency,\r\n      handleSubmit,\r\n      store, // Make store available in the template\r\n      maxDate,\r\n      minDate,\r\n      showPrintView,\r\n      handlePrint,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:disabled {\r\n  background-color: #f5f5f5;\r\n  cursor: not-allowed;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\ninput[readonly], textarea[readonly] {\r\n  background-color: #e9ecef;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.invoice-window {\r\n  background: #fff;\r\n  width: 70rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.items-section, .totals-section {\r\n  border: 1px solid #eee;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  background: #f9f9f9;\r\n}\r\n.totals-section {\r\n  margin-top: 1rem;\r\n}\r\n.items-list {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-top: 0.5rem;\r\n\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  -ms-overflow-style: none;  /* IE and Edge */\r\n  scrollbar-width: none;  /* Firefox */\r\n}\r\n.item-row, .total-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.item-name {\r\n  flex-grow: 1;\r\n}\r\n.item-qty {\r\n  width: 50px;\r\n  text-align: center;\r\n}\r\n.item-price {\r\n  width: 100px;\r\n  text-align: right;\r\n}\r\n.total-row.final {\r\n  font-weight: bold;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditInvoices.vue?vue&type=template&id=f49eebde&scoped=true\"\nimport script from \"./AddEditInvoices.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditInvoices.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditInvoices.vue?vue&type=style&index=0&id=f49eebde&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f49eebde\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"surcharge-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa ph ph' : 'To ph ph mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"code\">M</label>\r\n                  <input id=\"code\" v-model=\"code\" type=\"text\" maxlength=\"10\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"description\">M t</label>\r\n                  <input id=\"description\" v-model=\"description\" type=\"text\" maxlength=\"100\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"amount\">S tin</label>\r\n                  <input id=\"amount\" v-model=\"amountDisplay\" type=\"text\" required style=\"text-align: right;\" @focus=\"selectAll\" @beforeinput=\"onlyNumbers\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"isActive\" type=\"checkbox\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary new-button\" @click=\"handleSubmit\" :disabled=\"!code.trim() || amount === 0 || !description.trim()\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs, computed } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditSurcharge',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n    const code = ref(item.value ? item.value.code : '');\r\n    const description = ref(item.value ? item.value.description : '');\r\n    const amount = ref(item.value ? item.value.amount : 0);\r\n    const isActive = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    const amountDisplay = computed({\r\n      get: () => {\r\n        if (amount.value === 0) return '0';\r\n        return new Intl.NumberFormat('vi-VN').format(amount.value);\r\n      },\r\n      set: (newValue) => {\r\n        const sanitized = newValue.replace(/\\D/g, '');\r\n        amount.value = sanitized ? parseInt(sanitized, 10) : 0;\r\n      }\r\n    });\r\n\r\n    watch(item, (newVal) => {\r\n      code.value = newVal ? newVal.code : '';\r\n      description.value = newVal ? newVal.description : '';\r\n      amount.value = newVal ? newVal.amount : 0;\r\n      isActive.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    function selectAll(event) {\r\n      event.target.select();\r\n    }\r\n\r\n    function onlyNumbers(event) {\r\n      // The `beforeinput` event is more reliable than `keypress`.\r\n      // It checks the data that is about to be inserted, handling typing and pasting.\r\n      if (event.data && !/^\\d+$/.test(event.data)) {\r\n        event.preventDefault();\r\n      }\r\n    }\r\n\r\n    async function handleSubmit() {\r\n      const payload = {\r\n        code: code.value,\r\n        description: description.value,\r\n        amount: amount.value,\r\n        is_active: isActive.value\r\n      };\r\n      if (item.value && item.value.id) {\r\n        // Editing existing surcharge\r\n        payload.id = item.value.id;\r\n        await axios.put(`/surcharges/${item.value.id}/`, payload)\r\n          .then(response => {\r\n            console.log(\"Surcharge updated:\", response.data);\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Error updating surcharge:\", error);\r\n            window.alert(\"Li khi cp nht ph ph: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      } else {\r\n        // Creating new surcharge\r\n        await axios.post('/surcharges/', payload)\r\n          .then(response => {\r\n            console.log(\"Surcharge created:\", response.data);\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Error creating surcharge:\", error);\r\n            window.alert(\"Li khi to ph ph: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      }\r\n    }\r\n\r\n    return {\r\n      code,\r\n      description,\r\n      amount,\r\n      amountDisplay,\r\n      isActive,\r\n      item,\r\n      handleSubmit,\r\n      selectAll,\r\n      onlyNumbers\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.surcharge-window {\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditSurcharges.vue?vue&type=template&id=3633bf30&scoped=true\"\nimport script from \"./AddEditSurcharges.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditSurcharges.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditSurcharges.vue?vue&type=style&index=0&id=3633bf30&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3633bf30\"]])\n\nexport default __exports__","import { render } from \"./Invoices.vue?vue&type=template&id=7fc39641&scoped=true\"\nimport script from \"./Invoices.vue?vue&type=script&lang=js\"\nexport * from \"./Invoices.vue?vue&type=script&lang=js\"\n\nimport \"./Invoices.vue?vue&type=style&index=0&id=7fc39641&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7fc39641\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Ci t</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n            <button @click=\"createNewItem\" class=\"btn btn-primary\">\r\n              To mi\r\n            </button>\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredItems\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button class=\"c-button\" @click=\"openEditItem($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.price=\"{ item }\">\r\n            {{ formatPrice(item.price) }}\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditSettings\r\n      v-if=\"showAddEditItem\"\r\n      :item=\"selectedItem\"\r\n      @close=\"showAddEditItem = false\"\r\n      @saved=\"onItemSaved\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch } from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditSettings from './AddEditSettings.vue';\r\n\r\nexport default {\r\n  name: 'Settings',\r\n  components: {\r\n    AddEditSettings,\r\n  },\r\n  setup() {\r\n    const items = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEditItem = ref(false);\r\n    const selectedItem = ref({});\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'id', key: 'id' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }  },  \r\n        { title: 'M', key: 'key' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }  },\r\n        { title: 'Ni Dung', key: 'value' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }  },\r\n        { title: 'Kch Hot', key: 'is_active' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }  },\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const filteredItems = computed(() => {\r\n      let result = items.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(item => isActiveFilter.value.includes(item.is_active));\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(item =>\r\n        (item.name && item.name.toLowerCase().includes(search)) \r\n      );\r\n    });\r\n\r\n    const fetchItems = async () => {\r\n      try {\r\n        const response = await axios.get('/logicconfigs/');\r\n        items.value = response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      } catch (error) {\r\n        console.error('Error fetching items:', error);\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      if (typeof value !== 'number') return value;\r\n      return value.toLocaleString('en-US');\r\n    };\r\n\r\n    function exportToCSV() {\r\n      const csvRows = [];\r\n      // Headers\r\n      csvRows.push(headers.map(h => h.title).join(','));\r\n      // Data\r\n      filteredItems.value.forEach(row => {\r\n        csvRows.push(headers.map(h => {\r\n          let val = row[h.key];\r\n          if (h.key === 'price') val = formatPrice(val);\r\n          return '\"' + (val !== undefined ? String(val).replace(/\"/g, '\"\"') : '') + '\"';\r\n        }).join(','));\r\n      });\r\n      const csvString = csvRows.join('\\n');\r\n      const blob = new Blob([csvString], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'data.csv';\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n\r\n    function openAddItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function openEditItem(event, { item }) {\r\n      // 'item' is the actual data object from the row\r\n      console.log(\"Clicked item:\", item); \r\n      \r\n      // Create a copy to avoid mutating the table data directly while editing\r\n      selectedItem.value = { ...item }; \r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function createNewItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    async function onItemSaved() {\r\n\r\n        console.log(\"Item saved, refreshing list...\");\r\n        await fetchItems();\r\n\r\n\r\n        showAddEditItem.value = false;\r\n      \r\n    }\r\n\r\n    \r\n\r\n    onMounted(() => {\r\n      fetchItems();\r\n    });\r\n\r\n    return {\r\n      items,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEditItem,\r\n      selectedItem,\r\n      headers,\r\n      filteredItems,\r\n      isActiveFilter,\r\n      formatPrice,\r\n      exportToCSV,\r\n      openAddItem,\r\n      openEditItem,\r\n      createNewItem,\r\n      onItemSaved,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$back-ground-color: rgb(165, 165, 165);\r\n$kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n    width: 100rem;\r\n    // background-color: rgb(96, 96, 96);\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box; /* Ensure padding is included in dimensions */\r\n\r\n\r\n    .top-area {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // background-color: rgb(243, 243, 243);\r\n        padding-top: 0.5rem;\r\n\r\n        .page-name-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            font-size: 1.2rem;\r\n            font-weight: bold;\r\n            display: flex;\r\n            align-items: flex-start;\r\n            padding-left: 0.5rem;\r\n            // background-color: rgb(200, 200, 200);\r\n        }\r\n\r\n        .action-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n            // background-color: rgb(220, 220, 220);\r\n\r\n            \r\n            .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  gap: 0.5rem;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .bottom-area {\r\n        flex: 1;\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // border: 2px solid green; /* Debugging border */\r\n\r\n        .filter-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            border-radius: 0.5rem;\r\n            background-color: #f9f9f9;\r\n            padding: 1rem;\r\n\r\n            .filters {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 1.5rem;\r\n            }\r\n\r\n            .form-group {\r\n              display: flex;\r\n              flex-direction: column;\r\n              label {\r\n                font-weight: bold;\r\n                margin-bottom: 0.5rem;\r\n                text-align: left;\r\n              }\r\n            }\r\n\r\n            .checkbox-group label {\r\n              display: flex;\r\n              align-items: center;\r\n              font-weight: normal;\r\n              margin-bottom: 0.5rem;\r\n              input { margin-right: 0.5rem; }\r\n            }\r\n        }\r\n\r\n        .data-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            // background-color: rgb(255, 255, 255);\r\n            overflow-x: auto;\r\n\r\n            .v-table{\r\n                background-color: rgb(243, 243, 243) !important;\r\n            }\r\n\r\n            .elevation-1{\r\n                height: calc(100vh - 7.8rem);\r\n                background-color: white;\r\n                color: black;\r\n\r\n                \r\n            }\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"settings-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa cu hnh' : 'To cu hnh mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"key\">Key</label>\r\n                  <input id=\"key\" v-model=\"key\" type=\"text\" required :disabled=\"!!item.id\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"value\">Value</label>\r\n                  <textarea id=\"value\" v-model=\"value\" rows=\"5\" required></textarea>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"isActive\" type=\"checkbox\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditSettings',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n    const key = ref(item.value ? item.value.key : '');\r\n    const value = ref(item.value ? item.value.value : '');\r\n    const isActive = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    watch(item, (newVal) => {\r\n      key.value = newVal ? newVal.key : '';\r\n      value.value = newVal ? newVal.value : '';\r\n      isActive.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    async function handleSubmit() {\r\n\r\n        // check if editing or creating\r\n        if (item.value && item.value.id) {\r\n          // Editing existing product group\r\n          const payload = {\r\n            id: item.value.id,\r\n            key: key.value,\r\n            value: value.value,\r\n            is_active: isActive.value\r\n          };\r\n\r\n          // send api request to update\r\n          await axios.put(`/logicconfigs/${item.value.id}/`, payload)\r\n            .then(response => {\r\n              console.log(\"Product group updated:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error updating product group:\", error);\r\n              window.alert(\"Li khi cp nht cu hnh: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n          return;\r\n        } else {\r\n          // Creating new product group\r\n            const payload = {\r\n              key: key.value,\r\n              value: value.value,\r\n              is_active: isActive.value\r\n            };\r\n\r\n            // send api request to create\r\n            await axios.post('/logicconfigs/', payload)\r\n              .then(response => {\r\n                console.log(\"Product group created:\", response.data);\r\n                emit('saved', payload);\r\n              })\r\n              .catch(error => {\r\n                console.error(\"Error creating product group:\", error);\r\n                window.alert(\"Li khi to cu hnh: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n              });\r\n      }\r\n    };\r\n\r\n    return {\r\n      key,\r\n      value,\r\n      isActive,\r\n      item,\r\n      handleSubmit\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\ninput:disabled {\r\n  background-color: #e9ecef;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.settings-window {\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditSettings.vue?vue&type=template&id=1610e3ea&scoped=true\"\nimport script from \"./AddEditSettings.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditSettings.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditSettings.vue?vue&type=style&index=0&id=1610e3ea&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1610e3ea\"]])\n\nexport default __exports__","import { render } from \"./Settings.vue?vue&type=template&id=d04e8c88&scoped=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=d04e8c88&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d04e8c88\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">S Qu</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n            <button @click=\"createNewItem('DR')\" class=\"btn btn-primary\" style=\"margin-right: 0.5rem;\">\r\n              Phiu Thu\r\n            </button>\r\n            <button @click=\"createNewItem('CR')\" class=\"btn btn-primary\" style=\"margin-right: 0.5rem;\">\r\n              Phiu Chi\r\n            </button>\r\n              \r\n\r\n            <button @click=\"toggleSubList\" class=\"btn btn-outline create-new-btn-group\" style=\"margin-right: 0.5rem;\" v-if=\"store.getters.userAdmin || store.getters.userSuperadmin\">\r\n              Bank Accounts\r\n            </button>\r\n              <div class=\"list-product-groups btn-group\" style=\"position:relative;\">\r\n                <Teleport to=\"body\">\r\n                  <div v-if=\"showSubList\" ref=\"subListRef\" class=\"product-group-teleport\" @click.self=\"showSubList = false\" :style=\"{ position: 'fixed', maxHeight:'50vh' , \r\n                      overflow : 'auto', top: subListPosition.top, left: subListPosition.left, zIndex: 9999, background: 'white', border: '1px solid #ccc', borderRadius: '6px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', padding: '1rem', minWidth: subListPosition.width }\">\r\n                    <ul style=\"margin:0; padding:0; list-style:none;\">\r\n                      <li v-for=\"item in subList\" :key=\"item.id\" style=\"padding:0.5rem 0; border-bottom:1px solid #eee;\">\r\n                        <span>{{ item.bank_name + ' - ' + item.account_number }}</span>\r\n                        <button @click.stop.prevent=\"openAddEditSub(item)\" class=\"c-button\"> \r\n                          <i class=\"fa-solid fa-pen-to-square\"></i>\r\n                        </button>\r\n                      </li>\r\n                      <!-- li for create new -->\r\n                      <li style=\"padding:0.5rem 0; border-bottom:none;\">\r\n                        <button @click=\"openAddEditSub(null)\" style=\"padding:0.3rem 1rem;\">+ To mi</button>\r\n                      </li>\r\n                    </ul>\r\n                    <div style=\"text-align:right; margin-top:0.5rem;\">\r\n                      <button @click=\"showSubList = false\" style=\"padding:0.3rem 1rem;\">ng</button>\r\n                    </div>\r\n                  </div>\r\n                </Teleport>\r\n              </div>\r\n\r\n            <template v-if=\"store.getters.userAdmin || store.getters.userSuperadmin\">\r\n              <button @click=\"toggleSubList2\" class=\"btn btn-outline create-new-btn-group-2\" style=\"margin-right: 0.5rem;\">\r\n                Loi Giao Dch\r\n              </button>\r\n            </template>\r\n              <div class=\"list-product-groups btn-group\" style=\"position:relative;\" >\r\n                <Teleport to=\"body\">\r\n                  <div v-if=\"showSubList2\" ref=\"subListRef2\" class=\"product-group-teleport\" @click.self=\"showSubList2 = false\" :style=\"{ position: 'fixed', maxHeight:'50vh' , \r\n                      overflow : 'auto', top: subListPosition2.top, left: subListPosition2.left, zIndex: 9999, background: 'white', border: '1px solid #ccc', borderRadius: '6px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', padding: '1rem', minWidth: subListPosition2.width }\">\r\n                    <ul style=\"margin:0; padding:0; list-style:none;\">\r\n                      <li v-for=\"item in subList2\" :key=\"item.id\" style=\"padding:0.5rem 0; border-bottom:1px solid #eee;\">\r\n                        <span>{{ item.name }}</span>\r\n                        <button v-if=\"item.id > 4\" @click.stop.prevent=\"openAddEditSub2  (item)\" class=\"c-button\"> \r\n                          <i class=\"fa-solid fa-pen-to-square\"></i>\r\n                        </button>\r\n                      </li>\r\n                      <!-- li for create new -->\r\n                      <li style=\"padding:0.5rem 0; border-bottom:none;\">\r\n                        <button @click=\"openAddEditSub2(null)\" style=\"padding:0.3rem 1rem;\">+ To mi</button>\r\n                      </li>\r\n                    </ul>\r\n                    <div style=\"text-align:right; margin-top:0.5rem;\">\r\n                      <button @click=\"showSubList2 = false\" style=\"padding:0.3rem 1rem;\">ng</button>\r\n                    </div>\r\n                  </div>\r\n                </Teleport>\r\n              </div>\r\n\r\n            <button @click=\"exportToExcel\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export Excel\r\n            </button>\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>T ngy</label>\r\n            <input type=\"date\" v-model=\"dateFrom\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>n ngy</label>\r\n            <input type=\"date\" v-model=\"dateTo\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Loi phiu</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"debitCreditFilter\" value=\"DR\" /> Phiu thu</label>\r\n              <label><input type=\"checkbox\" v-model=\"debitCreditFilter\" value=\"CR\" /> Phiu chi</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Chi tit loi thu/chi</label>\r\n            <div class=\"multiselect-dropdown\" ref=\"transactionTypeFilterDropdownRef\">\r\n              <button @click=\"toggleTransactionTypeFilterDropdown\" class=\"multiselect-toggle\">\r\n                {{ selectedTransactionTypeNames }}\r\n              </button>\r\n              <div v-if=\"showTransactionTypeFilterDropdown\" class=\"multiselect-menu\">\r\n                <div class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"allTransactionTypesSelected\" style=\"margin-right: 0.5rem;\"/>\r\n                    Tt c\r\n                  </label>\r\n                </div>\r\n                <div v-for=\"tt in filteredTransactionTypesForFilter\" :key=\"tt.id\" class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"transactionTypeFilter\" :value=\"tt.id\" style=\"margin-right: 0.5rem;\"/>\r\n                    {{ tt.name }}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label>Ti khon</label>\r\n            <div class=\"multiselect-dropdown\" ref=\"bankAccountFilterDropdownRef\">\r\n              <button @click=\"toggleBankAccountFilterDropdown\" class=\"multiselect-toggle\">\r\n                {{ selectedBankAccountNames }}\r\n              </button>\r\n              <div v-if=\"showBankAccountFilterDropdown\" class=\"multiselect-menu\">\r\n                <div class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"allBankAccountsSelected\" style=\"margin-right: 0.5rem;\"/>\r\n                    Tt c\r\n                  </label>\r\n                </div>\r\n                <div v-for=\"acc in allAccounts\" :key=\"acc.id\" class=\"multiselect-item\">\r\n                  <label>\r\n                    <input type=\"checkbox\" v-model=\"bankAccountFilter\" :value=\"acc.id\" style=\"margin-right: 0.5rem;\"/>\r\n                    {{ acc.bank_name }} - {{ acc.account_number }}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredItems\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button v-if=\"isEditable(item.date)\" class=\"c-button\" @click=\"openEditItem($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.amount=\"{ item }\">\r\n            {{ formatPrice( parseInt(item.amount)  ) }}\r\n          </template>\r\n          <template v-slot:item.debit_or_credit=\"{item}\">\r\n            {{ item.debit_or_credit == 'DR' ? 'Phiu Thu' : 'Phiu Chi' }}\r\n          </template>\r\n          <template v-slot:item.created_at=\"{ item }\">\r\n            {{ formatDateTime(item.created_at) }}\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditTrans\r\n      v-if=\"showAddEditItem\"\r\n      :item=\"selectedItem\"\r\n      :accounts=\"allAccounts\"\r\n      :transaction-types=\"subList2\"\r\n      @close=\"showAddEditItem = false\"\r\n      @saved=\"onItemSaved\"\r\n    />\r\n    <AddEditAccounts\r\n      v-if=\"showAddEditSub\"\r\n      :item=\"selectedSubItem\"\r\n      @close=\"showAddEditSub = false\"\r\n      @saved=\"onSubItemSaved\"\r\n    />\r\n\r\n    <AddEditTransactionType\r\n      v-if=\"showAddEditSub2\"\r\n      :item=\"selectedSubItem2\"\r\n      @close=\"showAddEditSub2 = false\"\r\n      @saved=\"onSubItemSaved2\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch, nextTick , onBeforeUnmount } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport AddEditTrans from './AddEditTrans.vue';\r\nimport AddEditAccounts from './AddEditAccounts.vue';\r\nimport AddEditTransactionType from './AddEditTransactionType.vue';\r\n\r\nexport default {\r\n  name: 'Trans',\r\n  components: {\r\n    AddEditTrans,\r\n    AddEditAccounts,\r\n    AddEditTransactionType\r\n  },\r\n  props: {\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n    const isEditable = (itemDate) => {\r\n      // console.log(\"Checking if editable for date:\", itemDate);\r\n      // console.log(\"User admin:\", store.getters.userAdmin);\r\n\r\n\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return true;\r\n      }\r\n\r\n      if (!itemDate) return false;\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n\r\n      const date = new Date(itemDate);\r\n      // console.log(\"Item date object:\", date);\r\n      date.setHours(0, 0, 0, 0);\r\n\r\n      const diffDays = (today.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);\r\n      // console.log(\"Difference in days:\", diffDays, \"Allowed edit days:\", props.d_edit_days);\r\n      return diffDays < props.d_edit_days;\r\n    };\r\n    const showSubList = ref(false);\r\n    const subListRef = ref(null);\r\n    const selectedSubItem = ref(null);\r\n    const showAddEditSub = ref(false);\r\n    const subList = ref([]);\r\n    const allAccounts = ref([]);\r\n    const bankAccountFilter = ref([]);\r\n    const showBankAccountFilterDropdown = ref(false);\r\n    const bankAccountFilterDropdownRef = ref(null);\r\n    const transactionTypeFilter = ref([]);\r\n    const showTransactionTypeFilterDropdown = ref(false);\r\n    const transactionTypeFilterDropdownRef = ref(null);\r\n\r\n    const toggleTransactionTypeFilterDropdown = () => {\r\n      showTransactionTypeFilterDropdown.value = !showTransactionTypeFilterDropdown.value;\r\n    };\r\n\r\n    const filteredTransactionTypesForFilter = computed(() => {\r\n      if (!debitCreditFilter.value || debitCreditFilter.value.length === 0) {\r\n        return subList2.value;\r\n      }\r\n      return subList2.value.filter(tt => debitCreditFilter.value.includes(tt.debit_or_credit));\r\n    });\r\n\r\n    const formatDateTime = (dateString) => { // format YYYY-MM-DD HH:mm:ss\r\n      if (!dateString) return '';\r\n      const date = new Date(dateString);\r\n      \r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      const hours = String(date.getHours()).padStart(2, '0');\r\n      const minutes = String(date.getMinutes()).padStart(2, '0');\r\n      const seconds = String(date.getSeconds()).padStart(2, '0');\r\n\r\n      return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;\r\n    };\r\n\r\n    const selectedTransactionTypeNames = computed(() => {\r\n      if (!transactionTypeFilter.value || transactionTypeFilter.value.length === 0) return 'Tt c';\r\n      if (transactionTypeFilter.value.length > 1) return `${transactionTypeFilter.value.length} loi  chn`;\r\n      const tt = subList2.value.find(t => t.id === transactionTypeFilter.value[0]);\r\n      return tt ? tt.name : 'Chn loi';\r\n    });\r\n\r\n    const allTransactionTypesSelected = computed({\r\n      get: () => {\r\n        const visibleIDs = filteredTransactionTypesForFilter.value.map(tt => tt.id);\r\n        return visibleIDs.length > 0 && visibleIDs.every(id => transactionTypeFilter.value.includes(id));\r\n      },\r\n      set: (value) => {\r\n        const visibleIDs = filteredTransactionTypesForFilter.value.map(tt => tt.id);\r\n        if (value) {\r\n          const newSelection = [...transactionTypeFilter.value];\r\n          visibleIDs.forEach(id => {\r\n            if (!newSelection.includes(id)) newSelection.push(id);\r\n          });\r\n          transactionTypeFilter.value = newSelection;\r\n        } else {\r\n          transactionTypeFilter.value = transactionTypeFilter.value.filter(id => !visibleIDs.includes(id));\r\n        }\r\n      }\r\n    });\r\n\r\n    const toggleBankAccountFilterDropdown = () => {\r\n      showBankAccountFilterDropdown.value = !showBankAccountFilterDropdown.value;\r\n    };\r\n\r\n    const selectedBankAccountNames = computed(() => {\r\n      if (!bankAccountFilter.value || bankAccountFilter.value.length === 0) return 'Tt c';\r\n      if (bankAccountFilter.value.length === allAccounts.value.length) return 'Tt c';\r\n      if (bankAccountFilter.value.length > 1) return `${bankAccountFilter.value.length} ti khon  chn`;\r\n      const acc = allAccounts.value.find(a => a.id === bankAccountFilter.value[0]);\r\n      return acc ? `${acc.bank_name} - ${acc.account_number}` : 'Chn ti khon';\r\n    });\r\n\r\n    const allBankAccountsSelected = computed({\r\n      get: () => allAccounts.value.length > 0 && bankAccountFilter.value.length === allAccounts.value.length,\r\n      set: (value) => {\r\n        if (value) {\r\n          bankAccountFilter.value = allAccounts.value.map(a => a.id);\r\n        } else {\r\n          bankAccountFilter.value = [];\r\n        }\r\n      }\r\n    });\r\n\r\n    const subListPosition = ref({ top: '0px', left: '0px', width: '0px' });\r\n    const fetchSubList = async () => {\r\n      try {\r\n        const response = await axios.get('/accounts/');\r\n        allAccounts.value = response.data.filter(item => item.is_active);\r\n        // filter active only and not cash accounts\r\n        subList.value = response.data.filter(item => item.is_active && !item.bank_name.toLowerCase().includes('cash'));\r\n      } catch (error) {\r\n        console.error('Error fetching sub list:', error);\r\n      }\r\n    };  \r\n    const toggleSubList = () => {\r\n      showSubList.value = !showSubList.value;\r\n      if (showSubList.value) {\r\n        setTimeout(() => {\r\n          updateGroupListPosition();\r\n        }, 0);\r\n      }\r\n    };\r\n\r\n    const updateGroupListPosition = () => {\r\n      nextTick(() => {\r\n        const btn = document.querySelector('.create-new-btn-group');\r\n        if (btn) {\r\n          const rect = btn.getBoundingClientRect();\r\n          subListPosition.value = {\r\n            top: `${rect.bottom + window.scrollY}px`,\r\n            left: `${rect.left + window.scrollX}px`,\r\n            width: `${rect.width}px`\r\n          };\r\n        }\r\n      });\r\n    };\r\n    const openAddEditSub = (item) => {\r\n      console.log(\"Open Add/Edit Sub Item:\", item);\r\n      selectedSubItem.value = item ? { ...item } : {};\r\n      showAddEditSub.value = true;\r\n      showSubList.value = false;\r\n    };\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (showSubList.value) {\r\n        const subListEl = subListRef.value;\r\n        if (subListEl && !subListEl.contains(event.target)) {\r\n          showSubList.value = false;\r\n        }\r\n      }\r\n      if (showBankAccountFilterDropdown.value) {\r\n        if (bankAccountFilterDropdownRef.value && !bankAccountFilterDropdownRef.value.contains(event.target)) {\r\n          showBankAccountFilterDropdown.value = false;\r\n        }\r\n      }\r\n      if (showTransactionTypeFilterDropdown.value) {\r\n        if (transactionTypeFilterDropdownRef.value && !transactionTypeFilterDropdownRef.value.contains(event.target)) {\r\n          showTransactionTypeFilterDropdown.value = false;\r\n        }\r\n      }\r\n    };\r\n    const onSubItemSaved = async () => {\r\n      console.log(\"Sub Item saved, refreshing sub list...\");\r\n      await fetchSubList();\r\n      showAddEditSub.value = false;\r\n    };\r\n\r\n\r\n\r\n    const showSubList2 = ref(false);\r\n    const subListRef2 = ref(null);\r\n    const selectedSubItem2 = ref(null);\r\n    const showAddEditSub2 = ref(false);\r\n    const subList2 = ref([]);\r\n    // Datepicker filter state\r\n    const getLocalDateISO = (date) => {\r\n      return new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);\r\n    };\r\n    // date from default to last 30 days\r\n    const dateFrom = ref(getLocalDateISO(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)));\r\n\r\n    // dateTo default to today\r\n    const dateTo = ref(getLocalDateISO(new Date()));\r\n\r\n    const subListPosition2 = ref({ top: '0px', left: '0px', width: '0px' });\r\n    const fetchSubList2 = async () => {\r\n      try {\r\n        const response = await axios.get('/transactiontypes/');\r\n        // filter active only and not cash accounts\r\n        subList2.value = response.data\r\n      } catch (error) {\r\n        console.error('Error fetching sub list:', error);\r\n      }\r\n    };  \r\n    const toggleSubList2 = () => {\r\n      showSubList2.value = !showSubList2.value;\r\n      if (showSubList2.value) {\r\n        setTimeout(() => {\r\n          updateGroupListPosition2();\r\n        }, 0);\r\n      }\r\n    };\r\n    const updateGroupListPosition2 = () => {\r\n      nextTick(() => {\r\n        const btn = document.querySelector('.create-new-btn-group-2');\r\n        if (btn) {\r\n          const rect = btn.getBoundingClientRect();\r\n          subListPosition2.value = {\r\n            top: `${rect.bottom + window.scrollY}px`,\r\n            left: `${rect.left + window.scrollX}px`,\r\n            width: `${rect.width}px`\r\n          };\r\n        }\r\n      });\r\n    };\r\n    const openAddEditSub2 = (item) => {\r\n      console.log(\"Open Add/Edit Sub Item:\", item);\r\n      selectedSubItem2.value = item ? { ...item } : {};\r\n      showAddEditSub2.value = true;\r\n      showSubList2.value = false;\r\n    };\r\n    const handleClickOutside2 = (event) => {\r\n      if (showSubList2.value) {\r\n        const subListEl = subListRef2.value;\r\n        if (subListEl && !subListEl.contains(event.target)) {\r\n          showSubList2.value = false;\r\n        }\r\n      }\r\n    };\r\n    const onSubItemSaved2 = async () => {\r\n      console.log(\"Sub Item saved, refreshing sub list...\");\r\n      await fetchSubList2();\r\n      showAddEditSub2.value = false;\r\n    };\r\n\r\n    const items = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEditItem = ref(false);\r\n    const selectedItem = ref({});\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' },cellProps: { class: 'text-left' }},\r\n        { title: 'Thu/Chi', key: 'debit_or_credit' , headerProps: { class: 'my-custom-header-class' } , cellProps:  { class: 'text-left'}},  \r\n        { title: 'M', key: 'id' , headerProps: { class: 'my-custom-header-class' } , cellProps: { class: 'text-left' }},\r\n        { title: 'Ni Dung', key: 'description' , headerProps: { class: 'my-custom-header-class' }  , cellProps: { class: 'text-left' }},\r\n        { title: 'Loi', key: 'transaction_type_name' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }},\r\n        { title: 'S Tin', key: 'amount' , align: 'end', headerProps: { class: 'my-custom-header-class' }   , cellProps: { class: 'text-right' }},\r\n        { title: 'Ngy Hiu Lc', key: 'date' , align: 'end', headerProps: { class: 'my-custom-header-class' } ,  cellProps: { class: 'text-right' }},\r\n        { title: 'Trng Thi', key: 'is_active' , align: 'end', headerProps: { class: 'my-custom-header-class pr-3' } , cellProps: { class: 'text-right pr-3' }},\r\n        { title: 'Ti Khon', key: 'bank_account_name' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' }},\r\n        { title: 'Ngy To', key: 'created_at' , headerProps: { class: 'my-custom-header-class pr-3' }, align: 'end', cellProps: { class: 'text-right pr-3' }},\r\n\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const debitCreditFilter = ref([]);\r\n    const filteredItems = computed(() => {\r\n      let result = items.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(item => isActiveFilter.value.includes(item.is_active));\r\n      }\r\n\r\n      if (debitCreditFilter.value && debitCreditFilter.value.length > 0) {\r\n        result = result.filter(item => debitCreditFilter.value.includes(item.debit_or_credit));\r\n      }\r\n\r\n      if (transactionTypeFilter.value && transactionTypeFilter.value.length > 0) {\r\n        result = result.filter(item => transactionTypeFilter.value.includes(item.transaction_type));\r\n      }\r\n\r\n      if (bankAccountFilter.value && bankAccountFilter.value.length > 0) {\r\n        result = result.filter(item => bankAccountFilter.value.includes(item.account));\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(item =>\r\n        (item.description && item.description.toLowerCase().includes(search))\r\n      );\r\n    });\r\n\r\n    const fetchItems = async () => {\r\n      try {\r\n        const params = {};\r\n        if (dateFrom.value) {\r\n          params.dateFrom = dateFrom.value;\r\n        }\r\n        if (dateTo.value) {\r\n          params.dateTo = dateTo.value;\r\n        }\r\n        const response = await axios.get('/transactions/', { params });\r\n        items.value = response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      } catch (error) {\r\n        console.error('Error fetching items:', error);\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      if (typeof value !== 'number') return value;\r\n      return value.toLocaleString('en-US');\r\n    };\r\n\r\n    async function exportToExcel() {\r\n      try {\r\n        const params = {\r\n          export: 'true',\r\n          dateFrom: dateFrom.value,\r\n          dateTo: dateTo.value,\r\n        };\r\n        const response = await axios.get('/transactions/', { params, responseType: 'blob' });\r\n        \r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        const filename = `transactions_${dateFrom.value}_to_${dateTo.value}.xlsx`;\r\n        link.setAttribute('download', filename);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        link.remove();\r\n      } catch (error) {\r\n        console.error('Error exporting to Excel:', error);\r\n      }\r\n    }\r\n\r\n    function openAddItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function openEditItem(event, { item }) {\r\n      // 'item' is the actual data object from the row\r\n      console.log(\"Clicked item:\", item); \r\n      \r\n      // Create a copy to avoid mutating the table data directly while editing\r\n      selectedItem.value = { ...item }; \r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function createNewItem(type) {\r\n      selectedItem.value = { debit_or_credit: type };\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    async function onItemSaved() {\r\n\r\n        console.log(\"Item saved, refreshing list...\");\r\n        await fetchItems();\r\n\r\n\r\n        showAddEditItem.value = false;\r\n      \r\n    }\r\n\r\n    watch([dateFrom, dateTo], fetchItems);\r\n\r\n    onMounted(() => {\r\n      fetchItems();\r\n      fetchSubList();\r\n      fetchSubList2();\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      document.addEventListener('mousedown', handleClickOutside2);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('mousedown', handleClickOutside2);\r\n    });\r\n\r\n    return {\r\n      items,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEditItem,\r\n      selectedItem,\r\n      headers,\r\n      filteredItems,\r\n      isActiveFilter,\r\n      debitCreditFilter,\r\n      formatPrice,\r\n      exportToExcel,\r\n      openAddItem,\r\n      openEditItem,\r\n      createNewItem,\r\n      onItemSaved,\r\n      formatDateTime,\r\n\r\n      showSubList,\r\n      subList,\r\n      subListPosition,\r\n      toggleSubList,\r\n      fetchSubList,\r\n      showAddEditSub,\r\n      selectedSubItem,\r\n      openAddEditSub, \r\n      subListRef,\r\n      onSubItemSaved,\r\n      allAccounts,\r\n\r\n\r\n      showSubList2,\r\n      subList2,\r\n      subListPosition2,\r\n      toggleSubList2,\r\n      fetchSubList2,\r\n      showAddEditSub2,\r\n      selectedSubItem2,\r\n      openAddEditSub2,\r\n      subListRef2,\r\n      onSubItemSaved2,\r\n\r\n\r\n      dateFrom,\r\n      dateTo,\r\n\r\n      bankAccountFilter,\r\n      showBankAccountFilterDropdown,\r\n      bankAccountFilterDropdownRef,\r\n      toggleBankAccountFilterDropdown,\r\n      selectedBankAccountNames,\r\n      allBankAccountsSelected,\r\n\r\n      transactionTypeFilter,\r\n      showTransactionTypeFilterDropdown,\r\n      transactionTypeFilterDropdownRef,\r\n      toggleTransactionTypeFilterDropdown,\r\n      filteredTransactionTypesForFilter,\r\n      selectedTransactionTypeNames,\r\n      allTransactionTypesSelected,\r\n      store, // Make store available in the template\r\n      isEditable,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$back-ground-color: rgb(165, 165, 165);\r\n$kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  // gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n    width: 100rem;\r\n    // background-color: rgb(96, 96, 96);\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box; /* Ensure padding is included in dimensions */\r\n\r\n\r\n    .top-area {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // background-color: rgb(243, 243, 243);\r\n        padding-top: 0.5rem;\r\n\r\n        .page-name-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            font-size: 1.2rem;\r\n            font-weight: bold;\r\n            display: flex;\r\n            align-items: flex-start;\r\n            padding-left: 0.5rem;\r\n            // background-color: rgb(200, 200, 200);\r\n        }\r\n\r\n        .action-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n            // background-color: rgb(220, 220, 220);\r\n\r\n            \r\n            .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  // gap: 0.5rem;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .bottom-area {\r\n        flex: 1;\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // border: 2px solid green; /* Debugging border */\r\n\r\n        .filter-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            border-radius: 0.5rem;\r\n            background-color: #f9f9f9;\r\n            padding: 1rem;\r\n\r\n            .filters {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 1.5rem;\r\n            }\r\n\r\n            .form-group {\r\n              display: flex;\r\n              flex-direction: column;\r\n              label {\r\n                font-weight: bold;\r\n                margin-bottom: 0.5rem;\r\n                text-align: left;\r\n              }\r\n            }\r\n\r\n            .checkbox-group label {\r\n              display: flex;\r\n              align-items: center;\r\n              font-weight: normal;\r\n              margin-bottom: 0.5rem;\r\n              input { margin-right: 0.5rem; }\r\n            }\r\n\r\n            .multiselect-dropdown {\r\n              position: relative;\r\n              width: 100%;\r\n            }\r\n\r\n            .multiselect-toggle {\r\n              width: 100%;\r\n              background-color: white;\r\n              color: black;\r\n              border-radius: 0.3rem;\r\n              border: 1px solid #ccc;\r\n              padding: 6px 10px;\r\n              font-size: 1rem;\r\n              text-align: left;\r\n              cursor: pointer;\r\n              white-space: nowrap;\r\n              overflow: hidden;\r\n              text-overflow: ellipsis;\r\n            }\r\n\r\n            .multiselect-menu {\r\n              position: absolute;\r\n              top: 100%;\r\n              left: 0;\r\n              right: 0;\r\n              background: white;\r\n              border: 1px solid #ccc;\r\n              border-top: none;\r\n              border-radius: 0 0 0.3rem 0.3rem;\r\n              z-index: 10;\r\n              max-height: 200px;\r\n              overflow-y: auto;\r\n              box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n\r\n              &::-webkit-scrollbar {\r\n                display: none;\r\n              }\r\n              -ms-overflow-style: none;\r\n              scrollbar-width: none;\r\n            }\r\n\r\n            .multiselect-item {\r\n              padding: 8px 12px;\r\n              cursor: pointer;\r\n              \r\n              label {\r\n                display: flex;\r\n                align-items: center;\r\n                font-weight: normal;\r\n                width: 100%;\r\n                margin-bottom: 0;\r\n              }\r\n            }\r\n            .multiselect-item:hover {\r\n              background-color: #f0f0f0;\r\n            }\r\n        }\r\n\r\n        .data-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            // background-color: rgb(255, 255, 255);\r\n            overflow-x: auto;\r\n\r\n            .v-table{\r\n                background-color: rgb(243, 243, 243) !important;\r\n            }\r\n\r\n            .elevation-1{\r\n                height: calc(100vh - 7.8rem);\r\n                background-color: white;\r\n                color: black;\r\n\r\n                \r\n            }\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"account-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa ti khon' : 'To ti khon mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\">\r\n              <a href=\"#\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"account_number\">S ti khon</label>\r\n                  <input id=\"account_number\" v-model=\"account_number\" type=\"text\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"account_holder_name\">Tn ch ti khon</label>\r\n                  <input id=\"account_holder_name\" v-model=\"account_holder_name\" type=\"text\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"bank_name\">Ngn hng</label>\r\n                  <input id=\"bank_name\" v-model=\"bank_name\" type=\"text\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"is_active\" type=\"checkbox\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditAccounts',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n    const account_number = ref(item.value ? item.value.account_number : '');\r\n    const account_holder_name = ref(item.value ? item.value.account_holder_name : '');\r\n    const bank_name = ref(item.value ? item.value.bank_name : '');\r\n    const is_active = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    watch(item, (newVal) => {\r\n      account_number.value = newVal ? newVal.account_number : '';\r\n      account_holder_name.value = newVal ? newVal.account_holder_name : '';\r\n      bank_name.value = newVal ? newVal.bank_name : '';\r\n      is_active.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    async function handleSubmit() {\r\n\r\n        // check if editing or creating\r\n        if (item.value && item.value.id) {\r\n          // Editing existing account\r\n          const payload = {\r\n            id: item.value.id,\r\n            account_number: account_number.value,\r\n            account_holder_name: account_holder_name.value,\r\n            bank_name: bank_name.value,\r\n            is_active: is_active.value\r\n          };\r\n\r\n          // send api request to update\r\n          await axios.put(`/accounts/${item.value.id}/`, payload)\r\n            .then(response => {\r\n              console.log(\"Account updated:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error updating account:\", error);\r\n              window.alert(\"Li khi cp nht: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n          return;\r\n        } else {\r\n          // Creating new account\r\n          const payload = {\r\n            account_number: account_number.value,\r\n            account_holder_name: account_holder_name.value,\r\n            bank_name: bank_name.value,\r\n            is_active: is_active.value\r\n          };\r\n\r\n          // send api request to create\r\n          await axios.post('/accounts/', payload)\r\n            .then(response => {\r\n              console.log(\"Account created:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error creating account:\", error);\r\n              window.alert(\"Li khi to mi: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n        }\r\n      };\r\n\r\n      return {\r\n        account_number,\r\n        account_holder_name,\r\n        bank_name,\r\n        is_active,\r\n        item,\r\n        handleSubmit\r\n      };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.account-window {\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditAccounts.vue?vue&type=template&id=733da5f6&scoped=true\"\nimport script from \"./AddEditAccounts.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditAccounts.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditAccounts.vue?vue&type=style&index=0&id=733da5f6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-733da5f6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"transaction-type-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa loi giao dch' : 'To loi giao dch mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"name\">Tn loi</label>\r\n                  <input id=\"name\" v-model=\"name\" type=\"text\" required />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"description\">M t</label>\r\n                  <input id=\"description\" v-model=\"description\" type=\"text\" />\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"transaction_type\">Loi (Thu/Chi)</label>\r\n                  <select id=\"transaction_type\" v-model=\"debit_or_credit\" required>\r\n                    <option value=\"DR\">Thu</option>\r\n                    <option value=\"CR\">Chi</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" v-model=\"is_active\" type=\"checkbox\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditTransactionType',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n    const name = ref(item.value ? item.value.name : '');\r\n    const debit_or_credit = ref(item.value ? item.value.debit_or_credit : 'DR');\r\n    const description = ref(item.value ? item.value.description : '');\r\n    const is_active = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n\r\n    watch(item, (newVal) => {\r\n      name.value = newVal ? newVal.name : '';\r\n      description.value = newVal ? newVal.description : '';\r\n      debit_or_credit.value = newVal ? newVal.debit_or_credit : 'DR';\r\n      is_active.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n    });\r\n\r\n    async function handleSubmit() {\r\n\r\n        // check if editing or creating\r\n        if (item.value && item.value.id) {\r\n          // Editing existing transaction type\r\n          const payload = {\r\n            id: item.value.id,\r\n            name: name.value,\r\n            description: description.value,\r\n            debit_or_credit: debit_or_credit.value,\r\n            is_active: is_active.value\r\n          };\r\n\r\n          // send api request to update\r\n          await axios.put(`/transactiontypes/${item.value.id}/`, payload)\r\n            .then(response => {\r\n              console.log(\"TransactionType updated:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error updating transaction type:\", error);\r\n              window.alert(\"Li khi cp nht loi giao dch: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n          return;\r\n        } else {\r\n          // Creating new transaction type\r\n          const payload = {\r\n            name: name.value,\r\n            description: description.value,\r\n            debit_or_credit: debit_or_credit.value,\r\n            is_active: is_active.value\r\n          };\r\n\r\n          // send api request to create\r\n          await axios.post('/transactiontypes/', payload)\r\n            .then(response => {\r\n              console.log(\"TransactionType created:\", response.data);\r\n              emit('saved', payload);\r\n            })\r\n            .catch(error => {\r\n              console.error(\"Error creating transaction type:\", error);\r\n              window.alert(\"Li khi to loi giao dch: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n            });\r\n        }\r\n      };\r\n\r\n      return {\r\n        name,\r\n        description,\r\n        debit_or_credit,\r\n        is_active,\r\n        item,\r\n        handleSubmit\r\n      };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.transaction-type-window {\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditTransactionType.vue?vue&type=template&id=430418d3&scoped=true\"\nimport script from \"./AddEditTransactionType.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditTransactionType.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditTransactionType.vue?vue&type=style&index=0&id=430418d3&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-430418d3\"]])\n\nexport default __exports__","import { render } from \"./Trans.vue?vue&type=template&id=1867ba3e&scoped=true\"\nimport script from \"./Trans.vue?vue&type=script&lang=js\"\nexport * from \"./Trans.vue?vue&type=script&lang=js\"\n\nimport \"./Trans.vue?vue&type=style&index=0&id=1867ba3e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1867ba3e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Ngi dng</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n\r\n            <button @click=\"createNewItem\" class=\"btn btn-primary\">\r\n              To mi\r\n            </button>\r\n\r\n            <button @click=\"toggleSubList\" class=\"btn btn-outline create-new-btn-group\">\r\n              Nhm Users\r\n            </button>\r\n              <div class=\"list-product-groups btn-group\" style=\"position:relative;\" >\r\n                <Teleport to=\"body\">\r\n                  <div v-if=\"showSubList\" ref=\"subListRef\" class=\"product-group-teleport\" @click.self=\"showSubList = false\" :style=\"{ position: 'fixed', maxHeight:'50vh' , \r\n                      overflow : 'auto', top: subListPosition.top, left: subListPosition.left, zIndex: 9999, background: 'white', border: '1px solid #ccc', borderRadius: '6px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', padding: '1rem', minWidth: subListPosition.width }\">\r\n                    <ul style=\"margin:0; padding:0; list-style:none;\">\r\n                      <li v-for=\"item in subList\" :key=\"item.id\" style=\"padding:0.5rem 0; border-bottom:1px solid #eee;\">\r\n                        <span>{{ item.name }}</span>\r\n                        <!-- <button @click.stop.prevent=\"openAddEditSub(item)\" class=\"c-button\"> \r\n                          <i class=\"fa-solid fa-pen-to-square\"></i>\r\n                        </button> -->\r\n                      </li>\r\n                      <!-- li for create new\r\n                      <li style=\"padding:0.5rem 0; border-bottom:none;\">\r\n                        <button @click=\"openAddEditSub(null)\" style=\"padding:0.3rem 1rem;\">+ To mi</button>\r\n                      </li> -->\r\n                    </ul>\r\n                    <div style=\"text-align:right; margin-top:0.5rem;\">\r\n                      <button @click=\"showSubList = false\" style=\"padding:0.3rem 1rem;\">ng</button>\r\n                    </div>\r\n                  </div>\r\n                </Teleport>\r\n              </div>\r\n\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredItems\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button class=\"c-button\" @click=\"openEditItem($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.price=\"{ item }\">\r\n            {{ formatPrice(item.price) }}\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditUsers\r\n      v-if=\"showAddEditItem\"\r\n      :item=\"selectedItem\"\r\n      :user-groups=\"subList\"\r\n      @close=\"showAddEditItem = false\"\r\n      @saved=\"onItemSaved\"\r\n    />\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch, nextTick , onBeforeUnmount } from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditUsers from './AddEditUsers.vue';\r\n\r\n\r\nexport default {\r\n  name: 'Trans',\r\n  components: {\r\n    AddEditUsers,\r\n  },\r\n  setup() {\r\n\r\n    const showSubList = ref(false);\r\n    const subListRef = ref(null);\r\n    const selectedSubItem = ref(null);\r\n    const showAddEditSub = ref(false);\r\n    const subList = ref([]);\r\n    const subListPosition = ref({ top: '0px', left: '0px', width: '0px' });\r\n    const fetchSubList = async () => {\r\n      try {\r\n        const response = await axios.get('/usergroups/');\r\n        // filter active only and not cash accounts\r\n        subList.value = response.data;\r\n        console.log('Fetched sub list:', subList.value);\r\n      } catch (error) {\r\n        console.error('Error fetching sub list:', error);\r\n      }\r\n    };  \r\n    const toggleSubList = () => {\r\n      showSubList.value = !showSubList.value;\r\n      if (showSubList.value) {\r\n        setTimeout(() => {\r\n          updateGroupListPosition();\r\n        }, 0);\r\n      }\r\n    };\r\n\r\n    const updateGroupListPosition = () => {\r\n      nextTick(() => {\r\n        const btn = document.querySelector('.create-new-btn-group');\r\n        if (btn) {\r\n          const rect = btn.getBoundingClientRect();\r\n          subListPosition.value = {\r\n            top: `${rect.bottom + window.scrollY}px`,\r\n            left: `${rect.left + window.scrollX}px`,\r\n            width: `${rect.width}px`\r\n          };\r\n        }\r\n      });\r\n    };\r\n    const openAddEditSub = (item) => {\r\n      console.log(\"Open Add/Edit Sub Item:\", item);\r\n      selectedSubItem.value = item ? { ...item } : {};\r\n      showAddEditSub.value = true;\r\n      showSubList.value = false;\r\n    };\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (showSubList.value) {\r\n        const subListEl = subListRef.value;\r\n        if (subListEl && !subListEl.contains(event.target)) {\r\n          showSubList.value = false;\r\n        }\r\n      }\r\n    };\r\n    const onSubItemSaved = async () => {\r\n      console.log(\"Sub Item saved, refreshing sub list...\");\r\n      await fetchSubList();\r\n      showAddEditSub.value = false;\r\n    };\r\n\r\n\r\n    const items = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEditItem = ref(false);\r\n    const selectedItem = ref({});\r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' } , cellProps: { class: 'text-left' }},\r\n        { title: 'id', key: 'id' , headerProps: { class: 'my-custom-header-class' } , cellProps: { class: 'text-left' } },  \r\n        { title: 'userName', key: 'username' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'Tn', key: 'first_name' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'H', key: 'last_name' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'Nhm', key: 'usergroups' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'Kch hot', key: 'is_active' , headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const filteredItems = computed(() => {\r\n      let result = items.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(item => isActiveFilter.value.includes(item.is_active));\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(item =>\r\n        (item.name && item.name.toLowerCase().includes(search)) \r\n      );\r\n    });\r\n\r\n    const fetchItems = async () => {\r\n      try {\r\n        const response = await axios.get('/users/');\r\n        items.value = response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      } catch (error) {\r\n        console.error('Error fetching items:', error);\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      if (typeof value !== 'number') return value;\r\n      return value.toLocaleString('en-US');\r\n    };\r\n\r\n    function exportToCSV() {\r\n      const csvRows = [];\r\n      // Headers\r\n      csvRows.push(headers.map(h => h.title).join(','));\r\n      // Data\r\n      filteredItems.value.forEach(row => {\r\n        csvRows.push(headers.map(h => {\r\n          let val = row[h.key];\r\n          if (h.key === 'price') val = formatPrice(val);\r\n          return '\"' + (val !== undefined ? String(val).replace(/\"/g, '\"\"') : '') + '\"';\r\n        }).join(','));\r\n      });\r\n      const csvString = csvRows.join('\\n');\r\n      const blob = new Blob([csvString], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'data.csv';\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n\r\n    function openAddItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function openEditItem(event, { item }) {\r\n      // 'item' is the actual data object from the row\r\n      console.log(\"Clicked item:\", item); \r\n      \r\n      // Create a copy to avoid mutating the table data directly while editing\r\n      selectedItem.value = { ...item }; \r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function createNewItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    async function onItemSaved() {\r\n\r\n        console.log(\"Item saved, refreshing list...\");\r\n        await fetchItems();\r\n\r\n\r\n        showAddEditItem.value = false;\r\n      \r\n    }\r\n\r\n    \r\n\r\n    onMounted(() => {\r\n      fetchItems();\r\n      fetchSubList();\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    });\r\n\r\n    return {\r\n      items,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEditItem,\r\n      selectedItem,\r\n      headers,\r\n      filteredItems,\r\n      isActiveFilter,\r\n      formatPrice,\r\n      exportToCSV,\r\n      openAddItem,\r\n      openEditItem,\r\n      createNewItem,\r\n      onItemSaved,\r\n\r\n      showSubList,\r\n      subList,\r\n      subListPosition,\r\n      toggleSubList,\r\n      fetchSubList,\r\n      showAddEditSub,\r\n      selectedSubItem,\r\n      openAddEditSub, \r\n      subListRef,\r\n      onSubItemSaved,\r\n\r\n\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$back-ground-color: rgb(165, 165, 165);\r\n$kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  // background-color: #f9f9f9;\r\n  // border-bottom: 1px solid #eee;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n    width: 100rem;\r\n    // background-color: rgb(96, 96, 96);\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box; /* Ensure padding is included in dimensions */\r\n\r\n\r\n    .top-area {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // background-color: rgb(243, 243, 243);\r\n        padding-top: 0.5rem;\r\n\r\n        .page-name-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            font-size: 1.2rem;\r\n            font-weight: bold;\r\n            display: flex;\r\n            align-items: flex-start;\r\n            padding-left: 0.5rem;\r\n            // background-color: rgb(200, 200, 200);\r\n        }\r\n\r\n        .action-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n            // background-color: rgb(220, 220, 220);\r\n\r\n            \r\n            .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  gap: 0.5rem;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .bottom-area {\r\n        flex: 1;\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // border: 2px solid green; /* Debugging border */\r\n\r\n        .filter-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            border-radius: 0.5rem;\r\n            background-color: #f9f9f9;\r\n            padding: 1rem;\r\n\r\n            .filters {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 1.5rem;\r\n            }\r\n\r\n            .form-group {\r\n              display: flex;\r\n              flex-direction: column;\r\n              label {\r\n                font-weight: bold;\r\n                margin-bottom: 0.5rem;\r\n                text-align: left;\r\n              }\r\n            }\r\n\r\n            .checkbox-group label {\r\n              display: flex;\r\n              align-items: center;\r\n              font-weight: normal;\r\n              margin-bottom: 0.5rem;\r\n              input { margin-right: 0.5rem; }\r\n            }\r\n        }\r\n\r\n        .data-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            // background-color: rgb(255, 255, 255);\r\n            overflow-x: auto;\r\n\r\n            .v-table{\r\n                background-color: rgb(243, 243, 243) !important;\r\n            }\r\n\r\n            .elevation-1{\r\n                height: calc(100vh - 7.8rem);\r\n                background-color: white;\r\n                color: black;\r\n\r\n                \r\n            }\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"user-window\" @click.stop>\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Cp nht ngi dng' : 'Thm ngi dng mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\"><a href=\"#\">Thng tin chung</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\">\r\n              <div class=\"col-left\">\r\n                <div class=\"form-group\">\r\n                  <label for=\"username\">Tn ng nhp <span class=\"required\">*</span></label>\r\n                  <input id=\"username\" v-model=\"form.username\" type=\"text\" required :disabled=\"!!item.id\" placeholder=\"V d: admin\" />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"password\">Mt khu <span v-if=\"!item.id\" class=\"required\">*</span></label>\r\n                  <input id=\"password\" v-model=\"form.password\" type=\"password\" :required=\"!item.id\" placeholder=\"Nhp mt khu\" autocomplete=\"new-password\" />\r\n                  <small v-if=\"item.id\" class=\"field-note\"> trng nu khng mun i mt khu</small>\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"lastName\">H</label>\r\n                  <input id=\"lastName\" v-model=\"form.last_name\" type=\"text\" placeholder=\"H\" />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label for=\"firstName\">Tn</label>\r\n                  <input id=\"firstName\" v-model=\"form.first_name\" type=\"text\" placeholder=\"Tn\" />\r\n                </div>\r\n                 <div class=\"form-group\">\r\n                  <label for=\"email\">Email</label>\r\n                  <input id=\"email\" v-model=\"form.email\" type=\"email\" placeholder=\"Email\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-right\">\r\n                <div class=\"form-group-column\">\r\n                  <label>Nhm quyn</label>\r\n                  <div class=\"checkbox-container\">\r\n                    <div v-for=\"group in userGroups\" :key=\"group.id\" class=\"checkbox-item\">\r\n                      <label :for=\"'group-' + group.id\" class=\"checkbox-label\">\r\n                        <input type=\"checkbox\" :id=\"'group-' + group.id\" :value=\"group.id\" v-model=\"form.groups\" />\r\n                        {{ group.name }}\r\n                      </label>\r\n                    </div>\r\n                    <div v-if=\"userGroups.length === 0\" class=\"empty-text\">Cha c nhm no.</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-group\" style=\"margin-top: 1rem;\">\r\n                  <label for=\"is_active\">Kch hot</label>\r\n                  <input id=\"is_active\" type=\"checkbox\" v-model=\"form.is_active\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, watch, toRefs, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AddEditUser',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }, \r\n    userGroups: {\r\n      type: Array,\r\n      default: () => [] // Expects: [{\"id\":1,\"name\":\"admin\"}, ...]\r\n    } \r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const { item } = toRefs(props);\r\n\r\n    // Reactive form state\r\n    const form = reactive({\r\n        username: '',\r\n        first_name: '',\r\n        last_name: '',\r\n        email: '',\r\n        password: '',\r\n        groups: [], // Array of IDs [1, 2]\r\n        is_active: true\r\n    });\r\n\r\n    // Helper to reset or fill form\r\n    const initForm = (data) => {\r\n        if (data) {\r\n            form.username = data.username || '';\r\n            form.first_name = data.first_name || ''; // Note: Django uses first_name for \"Tn\"\r\n            form.last_name = data.last_name || '';\r\n            form.email = data.email || '';\r\n            form.groups = data.groups || []; // Takes the array of IDs from props\r\n            form.is_active = data.is_active !== undefined ? data.is_active : true;\r\n            form.password = ''; // Don't pre-fill password hash\r\n        } else {\r\n            // Reset for create mode\r\n            form.username = '';\r\n            form.first_name = '';\r\n            form.last_name = '';\r\n            form.email = '';\r\n            form.groups = [];\r\n            form.is_active = true;\r\n            form.password = '';\r\n        }\r\n    };\r\n\r\n    // Watch for changes in prop 'item' to update form\r\n    watch(item, (newVal) => {\r\n        initForm(newVal);\r\n    });\r\n\r\n    // Initialize on mount\r\n    onMounted(() => {\r\n        initForm(item.value);\r\n    });\r\n\r\n    async function handleSubmit() {\r\n        const payload = {\r\n            username: form.username,\r\n            first_name: form.first_name,\r\n            last_name: form.last_name,\r\n            email: form.email,\r\n            groups: form.groups,\r\n            is_active: form.is_active\r\n        };\r\n\r\n        // Only include password if it was typed\r\n        if (form.password) {\r\n            payload.password = form.password;\r\n        }\r\n\r\n        try {\r\n            if (item.value && item.value.id) {\r\n                // --- UPDATE ---\r\n                // Depending on backend, might need to remove password if empty\r\n                const response = await axios.put(`/users/${item.value.id}/`, payload);\r\n                console.log(\"User updated:\", response.data);\r\n                emit('saved', response.data);\r\n            } else {\r\n                // --- CREATE ---\r\n                const response = await axios.post('/users/', payload);\r\n                console.log(\"User created:\", response.data);\r\n                emit('saved', response.data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error saving user:\", error.response ? error.response.data : error);\r\n            window.alert(\"Li khi lu ngi dng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n        }\r\n    }\r\n\r\n    return {\r\n      form,\r\n      item, // return item to check if editing in template\r\n      handleSubmit\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\ninput:disabled {\r\n  background-color: #e9ecef;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.required {\r\n  color: red;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.user-window {\r\n  background: #fff;\r\n  width: 60rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title { font-weight: bold; font-size: 15px; }\r\n.close-btn { background: none; border: none; color: white; font-size: 20px; cursor: pointer; line-height: 1; }\r\n\r\n.tabs-nav { background: #f0f0f0; border-bottom: 1px solid #ddd; padding: 0 10px; }\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { padding: 20px; background: #fff; max-height: 70vh; overflow-y: auto; }\r\n.form-layout { display: flex; gap: 20px; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.form-group label, .form-group-column label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.form-group-column label {\r\n  width: auto;\r\n}\r\n\r\n.field-note {\r\n  color: #666;\r\n  font-size: 0.8rem;\r\n  margin-top: 4px;\r\n  display: block;\r\n  width: 100%;\r\n  text-align: right;\r\n}\r\n\r\n.checkbox-container {\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  background: #f9f9f9;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.checkbox-label {\r\n  font-weight: normal;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.checkbox-label input {\r\n  width: auto;\r\n  margin-right: 8px;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 0.85rem;\r\n  color: #777;\r\n  font-style: italic;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n</style>","import { render } from \"./AddEditUsers.vue?vue&type=template&id=446b76e7&scoped=true\"\nimport script from \"./AddEditUsers.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditUsers.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditUsers.vue?vue&type=style&index=0&id=446b76e7&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-446b76e7\"]])\n\nexport default __exports__","import { render } from \"./Users.vue?vue&type=template&id=3cc1bf21&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=3cc1bf21&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3cc1bf21\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Nhp hng</div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"datatable-toolbar\">\r\n              <input\r\n                v-model=\"filterText\"\r\n                placeholder=\"Tm kim...\"\r\n                class=\"search-input\"\r\n                style=\"margin-right: 1rem;\"\r\n              />\r\n              <select\r\n                v-model=\"pageSize\"\r\n                class=\"page-size-select\"\r\n              >\r\n                <option v-for=\"size in [5, 10, 20, 50, 100, 200]\" :key=\"size\" :value=\"size\">{{ size }} rows</option>\r\n              </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"other-actions\">\r\n          <div class=\"buttons-area\">\r\n\r\n            <button @click=\"createNewItem\" class=\"btn btn-primary\">\r\n              To mi\r\n            </button>\r\n\r\n            <button @click=\"exportToCSV\" class=\"btn btn-secondary\">\r\n              <i class=\"fa-solid fa-file-excel\" style=\"margin-right: 0.5rem;\"></i>\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"filter-area\">\r\n        <div class=\"filters\">\r\n          <div class=\"form-group\">\r\n            <label>T ngy</label>\r\n            <input type=\"date\" v-model=\"dateFrom\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>n ngy</label>\r\n            <input type=\"date\" v-model=\"dateTo\" @click=\"$event.target.showPicker()\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Trng thi</label>\r\n            <div class=\"checkbox-group\">\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"true\" /> Kch hot</label>\r\n              <label><input type=\"checkbox\" v-model=\"isActiveFilter\" :value=\"false\" /> Khng kch hot</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-area\">\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"filteredItems\"\r\n          :items-per-page=\"pageSize\"\r\n          :page.sync=\"currentPage\"\r\n          class=\"elevation-1 \"\r\n          fixed-header\r\n          :search=\"filterText\"\r\n        >\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <button v-if=\"isEditable(item.date)\" class=\"c-button\" @click=\"openEditItem($event, { item })\">\r\n              <i class=\"fa-solid fa-pen-to-square\"></i>\r\n            </button>\r\n          </template>\r\n          <template v-slot:item.total_quantity=\"{ item }\">\r\n            {{ item.total_quantity }}\r\n          </template>\r\n          <template v-slot:item.date=\"{ item }\">\r\n            {{ formatDate(item.date) }}\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n    </div>\r\n    <AddEditPurchase\r\n      v-if=\"showAddEditItem\"\r\n      :item=\"selectedItem\"\r\n      :d_edit_days=\"d_edit_days\"\r\n      @close=\"showAddEditItem = false\"\r\n      @saved=\"onItemSaved\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\r\nimport axios from 'axios';\r\nimport AddEditPurchase from './AddEditPurchase.vue';\r\nimport { useStore } from 'vuex';\r\n\r\n\r\nexport default {\r\n  name: 'Purchases',\r\n  components: {\r\n    AddEditPurchase,\r\n  },\r\n  props: {\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n    const isEditable = (itemDate) => {\r\n      // console.log(\"Checking if editable for date:\", itemDate);\r\n      // console.log(\"User admin:\", store.getters.userAdmin);\r\n\r\n\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return true;\r\n      }\r\n\r\n      if (!itemDate) return false;\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n\r\n      const date = new Date(itemDate);\r\n      // console.log(\"Item date object:\", date);\r\n      date.setHours(0, 0, 0, 0);\r\n\r\n      const diffDays = (today.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);\r\n      // console.log(\"Difference in days:\", diffDays, \"Allowed edit days:\", props.d_edit_days);\r\n      return diffDays < props.d_edit_days;\r\n    };\r\n\r\n    const items = ref([]);\r\n    const filterText = ref('');\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(50);\r\n    const showAddEditItem = ref(false);\r\n    const selectedItem = ref({});\r\n\r\n    const getLocalDateISO = (date) => {\r\n      return new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);\r\n    };\r\n    const dateFrom = ref(getLocalDateISO(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)));\r\n    const dateTo = ref(getLocalDateISO(new Date()));\r\n    \r\n    const headers = [\r\n        { title: '', key: 'actions', sortable: false, headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left' } },\r\n        { title: 'M n', key: 'code' , headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Nh cung cp', key: 'supplier' , headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Ngy nhp', key: 'date' , headerProps: { class: 'my-custom-header-class' }, cellProps:  { class: 'text-left'}},\r\n        { title: 'Tng S Lng', key: 'total_quantity' , headerProps: { class: 'my-custom-header-class' }, align: 'end', cellProps:  { class: 'text-right'}},\r\n        { title: 'Kch hot', key: 'is_active' , headerProps: { class: 'my-custom-header-class pr-2' }, align: 'end', cellProps:  { class: 'text-right pr-2'}},\r\n    ];\r\n\r\n    const isActiveFilter = ref([true]);\r\n    const filteredItems = computed(() => {\r\n      let result = items.value;\r\n\r\n      if (isActiveFilter.value && isActiveFilter.value.length > 0) {\r\n        result = result.filter(item => isActiveFilter.value.includes(item.is_active));\r\n      }\r\n\r\n      if (!filterText.value.trim()) return result;\r\n\r\n      const search = filterText.value.toLowerCase();\r\n      return result.filter(item =>\r\n        (item.code && item.code.toLowerCase().includes(search)) ||\r\n        (item.supplier && item.supplier.toLowerCase().includes(search))\r\n      );\r\n    });\r\n\r\n    const fetchItems = async () => {\r\n      try {\r\n        const response = await axios.get('/purchases/', {\r\n          params: {\r\n            dateFrom: dateFrom.value,\r\n            dateTo: dateTo.value\r\n          }\r\n        });\r\n        // Sort by date descending\r\n        items.value = response.data.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n      } catch (error) {\r\n        console.error('Error fetching purchases:', error);\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      const val = Number(value);\r\n      if (isNaN(val)) return value;\r\n      return val.toLocaleString('vi-VN', { style: 'currency', currency: 'VND', minimumFractionDigits: 0 });\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('vi-VN');\r\n    }\r\n\r\n    async function exportToCSV() {\r\n      try {\r\n        const response = await axios.get('/purchases/', {\r\n          params: {\r\n            dateFrom: dateFrom.value,\r\n            dateTo: dateTo.value,\r\n            export: 'true'\r\n          },\r\n          responseType: 'blob'\r\n        });\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'purchases.xlsx';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n      } catch (error) {\r\n        console.error('Error exporting purchases:', error);\r\n      }\r\n    }\r\n\r\n    function openAddItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function openEditItem(event, { item }) {\r\n      console.log(\"Clicked item:\", item); \r\n      selectedItem.value = { ...item }; \r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    function createNewItem() {\r\n      selectedItem.value = {};\r\n      showAddEditItem.value = true;\r\n    }\r\n\r\n    async function onItemSaved() {\r\n        console.log(\"Item saved, refreshing list...\");\r\n        await fetchItems();\r\n        showAddEditItem.value = false;\r\n    }\r\n\r\n    watch([dateFrom, dateTo], fetchItems);\r\n\r\n    onMounted(() => {\r\n      fetchItems();\r\n    });\r\n\r\n    return {\r\n      items,\r\n      filterText,\r\n      currentPage,\r\n      pageSize,\r\n      showAddEditItem,\r\n      selectedItem,\r\n      headers,\r\n      filteredItems,\r\n      isActiveFilter,\r\n      formatPrice,\r\n      formatDate,\r\n      exportToCSV,\r\n      openAddItem,\r\n      openEditItem,\r\n      createNewItem,\r\n      onItemSaved,\r\n      dateFrom,\r\n      dateTo,\r\n      isEditable,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$back-ground-color: rgb(165, 165, 165);\r\n$kv-primary-color: #0070F4;\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-outline {\r\n  background: white;\r\n  border-color: $kv-primary-color;\r\n  color: $kv-primary-color;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\ninput, select {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus {\r\n  border-color: $kv-primary-color;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.datatable-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n\r\n  .search-input {\r\n    width: 300px;\r\n  }\r\n\r\n  .page-size-select {\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n\r\n.work-area {\r\n    width: 100rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box;\r\n\r\n\r\n    .top-area {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        padding-top: 0.5rem;\r\n\r\n        .page-name-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            font-size: 1.2rem;\r\n            font-weight: bold;\r\n            display: flex;\r\n            align-items: flex-start;\r\n            padding-left: 0.5rem;\r\n        }\r\n\r\n        .action-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n\r\n            \r\n            .other-actions {\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: flex-end;\r\n                flex: 1;\r\n                padding: 0.5rem;\r\n\r\n                .buttons-area {\r\n                  display: flex;\r\n                  gap: 0.5rem;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .bottom-area {\r\n        flex: 1;\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n\r\n        .filter-area {\r\n            width: 15rem;\r\n            margin: 0.3rem;\r\n            border-radius: 0.5rem;\r\n            background-color: #f9f9f9;\r\n            padding: 1rem;\r\n\r\n            .filters {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 1.5rem;\r\n            }\r\n\r\n            .form-group {\r\n              display: flex;\r\n              flex-direction: column;\r\n              label {\r\n                font-weight: bold;\r\n                margin-bottom: 0.5rem;\r\n                text-align: left;\r\n              }\r\n            }\r\n\r\n            .checkbox-group label {\r\n              display: flex;\r\n              align-items: center;\r\n              font-weight: normal;\r\n              margin-bottom: 0.5rem;\r\n              input { margin-right: 0.5rem; }\r\n            }\r\n        }\r\n\r\n        .data-area {\r\n            flex: 1;\r\n            margin: 0.3rem;\r\n            overflow-x: auto;\r\n\r\n            .v-table{\r\n                background-color: rgb(243, 243, 243) !important;\r\n            }\r\n\r\n            .elevation-1{\r\n                height: calc(100vh - 7.8rem);\r\n                background-color: white;\r\n                color: black;\r\n\r\n                \r\n            }\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n.checkbox-group {\r\n  label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n\r\n.multiselect-item label {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.product-group-teleport span {\r\n    user-select: none;\r\n    cursor: default;\r\n    \r\n}\r\n\r\n.product-group-teleport li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n  \r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"purchase-window\" @click.stop style=\"width: 70rem; max-width: 95vw;\">\r\n      <div class=\"window-header\">\r\n        <span class=\"window-title\">\r\n          <span class=\"no-select\">{{ item && item.id ? 'Chnh sa n nhp hng: ' + item.code : 'To n nhp hng mi' }}</span>\r\n        </span>\r\n        <div class=\"window-actions no-select\">\r\n          <button @click=\"$emit('close')\" class=\"close-btn\">\r\n            <span></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"window-content\">\r\n        <div class=\"tabs-nav no-select\">\r\n          <ul>\r\n            <li class=\"active\">\r\n              <a href=\"#\">Thng tin chung</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"form-body\">\r\n          <div class=\"tab-pane\">\r\n            <div class=\"form-layout\" style=\"display: flex; flex-direction: column; height: 100%;\">\r\n              <div class=\"row-general\" style=\"display: flex; gap: 1rem; margin-bottom: 0.5rem;\">\r\n                  <div class=\"form-group\" style=\"flex: 1;\">\r\n                    <label for=\"supplier\">Nh cung cp</label>\r\n                    <select id=\"supplier\" v-model=\"supplier\" required>\r\n                        <option v-for=\"s in suppliers\" :key=\"s.id\" :value=\"s.name\">{{ s.name }}</option>\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"form-group\" style=\"flex: 1;\">\r\n                    <label for=\"date\">Ngy nhp</label>\r\n                    <input id=\"date\" ref=\"dateInput\" v-model=\"date\" type=\"date\" required @click=\"openDatePicker\" :min=\"minDate\" :max=\"maxDate\" :disabled=\"isDateOutsideAllowedRange\" />\r\n                  </div>\r\n                  <div class=\"form-group\" style=\"flex-direction: row; align-items: center;\">\r\n                    <label for=\"is_active\" style=\"width: auto; margin-right: 0.5rem;\">Kch hot</label>\r\n                    <input id=\"is_active\" v-model=\"isActive\" type=\"checkbox\" :disabled=\"!isActive || (!store.getters.userAdmin && !store.getters.userSuperadmin)\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"row-search\" style=\"display: flex; gap: 1rem; align-items: flex-start; margin-bottom: 0.5rem; \">\r\n                  <div style=\"position: relative; flex: 1;\">\r\n                      <input \r\n                        type=\"text\" \r\n                        v-model=\"productSearchTerm\" \r\n                        placeholder=\"Tm hng ha theo m hoc tn\" \r\n                        class=\"product-search-input\"\r\n                        @focus=\"showProductDropdown = true\"\r\n                        @blur=\"hideDropdown\"\r\n                      />\r\n                      <div v-if=\"showProductDropdown && filteredProducts.length > 0\" class=\"search-dropdown\">\r\n                          <div \r\n                            v-for=\"p in filteredProducts\" \r\n                            :key=\"p.id\" \r\n                            class=\"search-item\"\r\n                            @click=\"addProduct(p)\"\r\n                          >\r\n                            <div class=\"item-name\">{{ p.name }}</div>\r\n                            <div class=\"item-code\">{{ p.code }}</div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                  <div class=\"import-excel-wrapper\">\r\n                        <button class=\"btn btn-outline\" @click=\"downloadTemplate\" title=\"Download Template\" style=\"margin-right: 1rem;\">\r\n                          Ti template Excel\r\n                      </button>\r\n                      <button v-if=\"showImportButton && !(item && item.id)\" class=\"btn btn-outline\" @click=\"triggerImport\" title=\"Import Excel\">\r\n                          Nhp t Excel\r\n                      </button>\r\n                      <input type=\"file\" ref=\"fileInput\" style=\"display: none\" @change=\"handleFileUpload\" accept=\".xlsx, .xls\" />\r\n                  </div>\r\n              </div>\r\n              <div class=\"row-search\" style=\"display: flex; gap: 1rem; justify-content: space-between;\">\r\n                \r\n\r\n   \r\n              </div>\r\n                          \r\n              \r\n\r\n              <div class=\"row-items\">\r\n                  <div class=\"div-table\">\r\n                      <div class=\"div-table-header\">\r\n                          <div class=\"div-cell col-code\">M hng</div>\r\n                          <div class=\"div-cell col-name\">Tn hng</div>\r\n                          <div class=\"div-cell col-qty\">S lng</div>\r\n                          <div class=\"div-cell col-action\">{{ totalQuantity }}</div>\r\n                      </div>\r\n                      <div class=\"div-table-body\">\r\n                          <div v-for=\"(item, index) in items\" :key=\"index\" class=\"div-table-row\">\r\n                              <div class=\"div-cell col-code\">{{ item.code }}</div>\r\n                              <div class=\"div-cell col-name\">{{ item.name }}</div>\r\n                              <div class=\"div-cell col-qty\">\r\n                                  <input type=\"number\" v-model.number=\"item.quantity\" class=\"qty-input\" min=\"1\" @focus=\"selectAll\" @change=\"handleQuantityChange(item)\" />\r\n                              </div>\r\n                              <div class=\"div-cell col-action\">\r\n                                  <button @click=\"removeItem(index)\" class=\"btn-remove\"></button>\r\n                              </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n\r\n             \r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"window-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline\" @click=\"$emit('close')\">ng</button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSubmit\">\r\n            {{ item && item.id ? 'Lu' : 'To mi' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, toRefs, computed, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\n// import store from '@/store';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n  name: 'AddEditPurchase',\r\n  props: {\r\n    item: {\r\n      type: Object,\r\n      default: null\r\n    }, \r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  emits: ['close', 'saved'],\r\n  setup(props, { emit }) {\r\n    const getLocalDateISO = (date) => {\r\n      const tzOffset = date.getTimezoneOffset() * 60000; // offset in milliseconds\r\n      const localISOTime = new Date(date - tzOffset).toISOString().slice(0, 10);\r\n      return localISOTime;\r\n    };\r\n\r\n    const store = useStore();\r\n    const maxDate = computed(() => {\r\n      return getLocalDateISO(new Date());\r\n    });\r\n\r\n    const minDate = computed(() => {\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return ''; // No minimum date for admins\r\n      }\r\n      const today = new Date();\r\n      const minDay = new Date();\r\n      minDay.setDate(today.getDate() - (props.d_edit_days || 3));\r\n      return getLocalDateISO(minDay);\r\n    });\r\n\r\n    const isDateOutsideAllowedRange = computed(() => {\r\n      // If admin, date is never disabled by range\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return false;\r\n      }\r\n\r\n      const currentDate = new Date(date.value);\r\n      const minAllowed = minDate.value ? new Date(minDate.value) : null;\r\n      const maxAllowed = maxDate.value ? new Date(maxDate.value) : null;\r\n\r\n      // Check if current date is before minAllowed\r\n      if (minAllowed && currentDate < minAllowed) {\r\n        return true;\r\n      }\r\n      // Check if current date is after maxAllowed\r\n      return maxAllowed && currentDate > maxAllowed;\r\n    });\r\n\r\n    const { item } = toRefs(props);\r\n    const dateInput = ref(null);\r\n    const fileInput = ref(null);\r\n\r\n    const code = ref(item.value ? item.value.code : '');\r\n    const supplier = ref(item.value && item.value.supplier ? item.value.supplier : 'Sn xut');\r\n    const date = ref(item.value && item.value.date ? item.value.date : new Date().toISOString().slice(0, 10));\r\n    // const total_amount = ref(item.value ? item.value.total_amount : 0);\r\n    const isActive = ref(item.value && item.value.is_active !== undefined ? item.value.is_active : true);\r\n    \r\n    const items = ref(item.value && item.value.items ? JSON.parse(JSON.stringify(item.value.items)) : []);\r\n    const suppliers = ref([]);\r\n    const products = ref([]);\r\n    const productSearchTerm = ref('');\r\n    const showProductDropdown = ref(false);\r\n    const showImportButton = ref(true);\r\n\r\n    const totalQuantity = computed(() => {\r\n        return items.value.reduce((sum, i) => sum + (Number(i.quantity) || 0), 0);\r\n    });\r\n\r\n    watch(item, (newVal) => {\r\n      code.value = newVal ? newVal.code : '';\r\n      supplier.value = newVal && newVal.supplier ? newVal.supplier : 'Sn xut';\r\n      date.value = newVal && newVal.date ? newVal.date : new Date().toISOString().slice(0, 10);\r\n      // total_amount.value = newVal ? newVal.total_amount : 0;\r\n      isActive.value = newVal && newVal.is_active !== undefined ? newVal.is_active : true;\r\n      items.value = newVal && newVal.items ? JSON.parse(JSON.stringify(newVal.items)) : [];\r\n    });\r\n\r\n    const filteredProducts = computed(() => {\r\n        if (!productSearchTerm.value) return [];\r\n        const lower = productSearchTerm.value.toLowerCase();\r\n        return products.value.filter(p => \r\n            p.is_active && \r\n            p.product_type === 'normal' &&\r\n            ((p.name && p.name.toLowerCase().includes(lower)) || \r\n            (p.code && p.code.toLowerCase().includes(lower)))\r\n        ).slice(0, 6);\r\n    });\r\n\r\n    const fetchSuppliers = async () => {\r\n        try {\r\n            const response = await axios.get('/logicconfigs/');\r\n            const config = response.data.find(c => c.key === 'suppliers');\r\n            if (config) {\r\n                suppliers.value = JSON.parse(config.value);\r\n            }\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const response = await axios.get('/products/');\r\n            products.value = response.data;\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    function addProduct(p) {\r\n        const existing = items.value.find(i => i.code === p.code);\r\n        if (existing) {\r\n            existing.quantity++;\r\n        } else {\r\n            items.value.push({\r\n                code: p.code,\r\n                name: p.name,\r\n                quantity: 1,\r\n                price: p.price || 0 // Default to price, user can edit\r\n            });\r\n        }\r\n        productSearchTerm.value = '';\r\n        showProductDropdown.value = false;\r\n    }\r\n\r\n    function removeItem(index) {\r\n        items.value.splice(index, 1);\r\n    }\r\n\r\n    function formatPrice(value) {\r\n        return new Intl.NumberFormat('vi-VN').format(value);\r\n    }\r\n\r\n    function hideDropdown() {\r\n        setTimeout(() => {\r\n            showProductDropdown.value = false;\r\n        }, 200);\r\n    }\r\n\r\n    async function downloadTemplate() {\r\n        try {\r\n            const response = await axios.get('/download_purchase_template/', { responseType: 'blob' });\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', 'MauFileNhapHang.xlsx');\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        } catch (error) {\r\n            console.error(\"Error downloading template:\", error);\r\n        }\r\n    }\r\n\r\n    function triggerImport() {\r\n        if (fileInput.value) {\r\n            fileInput.value.click();\r\n        }\r\n    }\r\n\r\n    async function handleFileUpload(event) {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const data = new Uint8Array(e.target.result);\r\n            const workbook = XLSX.read(data, { type: 'array' });\r\n            const firstSheetName = workbook.SheetNames[0];\r\n            const worksheet = workbook.Sheets[firstSheetName];\r\n            const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n            \r\n            const invalidQuantityRows = [];\r\n            jsonData.forEach((row, index) => {\r\n                const quantity = Number(row['S lng'] || row['Quantity']);\r\n                if (isNaN(quantity) || quantity < 1) {\r\n                    invalidQuantityRows.push(`Dng ${index + 2} (M hng: ${row['M hng'] || row['Code'] || 'N/A'}, S lng: ${row['S lng'] || row['Quantity'] || 'N/A'})`);\r\n                }\r\n            });\r\n            if (invalidQuantityRows.length > 0) {\r\n                window.alert(`Li: Cc dng sau c s lng khng hp l (nh hn 1 hoc khng phi s):\\n${invalidQuantityRows.join('\\n')}`);\r\n                return;\r\n            }\r\n\r\n            const validProductsMap = new Map();\r\n            products.value.forEach(p => {\r\n                if (p.product_type === 'normal' && p.is_active) {\r\n                    validProductsMap.set(p.code, p);\r\n                }\r\n            });\r\n\r\n            const newItems = [];\r\n            const invalidCodes = [];\r\n\r\n            jsonData.forEach(row => {\r\n                const rawCode = row['M hng'] || row['Code'];\r\n                if (!rawCode) return;\r\n                const code = String(rawCode).trim();\r\n\r\n                if (validProductsMap.has(code)) {\r\n                    const product = validProductsMap.get(code);\r\n                    newItems.push({\r\n                        code: code,\r\n                        name: product.name,\r\n                        quantity: Number(row['S lng'] || row['Quantity']) || 1,\r\n                        price: Number(row['n gi'] || row['Price']) || product.price || 0\r\n                    });\r\n                } else {\r\n                    invalidCodes.push(code);\r\n                }\r\n            });\r\n\r\n            if (invalidCodes.length > 0) {\r\n                window.alert(`Li: Cc m hng sau khng tn ti hoc khng phi l sn phm thng hoc  b v hiu ha:\\n${invalidCodes.join(', ')}`);\r\n                event.target.value = null;\r\n                return;\r\n            }\r\n\r\n            items.value = [...items.value, ...newItems];\r\n            showImportButton.value = false;\r\n        };\r\n        reader.readAsArrayBuffer(file);\r\n        event.target.value = null;\r\n    }\r\n\r\n    function handleQuantityChange(item) {\r\n      const qty = Number(item.quantity);\r\n      if (isNaN(qty) || qty < 1) {\r\n        item.quantity = 1;\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n        fetchSuppliers();\r\n        fetchProducts();\r\n    });\r\n\r\n    function openDatePicker() {\r\n      if (dateInput.value) {\r\n        if (typeof dateInput.value.showPicker === 'function') {\r\n          try {\r\n            dateInput.value.showPicker();\r\n          } catch (e) {\r\n            dateInput.value.focus();\r\n          }\r\n        } else {\r\n          dateInput.value.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    function selectAll(event) {\r\n      event.target.select();\r\n    }\r\n\r\n    async function handleSubmit() {\r\n      const payload = {\r\n        code: code.value,\r\n        supplier: supplier.value,\r\n        date: date.value,\r\n        is_active: isActive.value,\r\n        items: items.value\r\n      };\r\n\r\n      if (payload.items.reduce((sum, item) => sum + (Number(item.quantity) || 0), 0) === 0) {\r\n        window.alert(\"Vui lng thm t nht mt sn phm vi s lng ln hn 0.\");\r\n        return;\r\n      }\r\n\r\n      if (item.value && item.value.id) {\r\n        // Update\r\n        await axios.put(`/purchases/${item.value.id}/`, payload)\r\n          .then(response => {\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error updating purchase:', error);\r\n            window.alert(\"Li khi cp nht n nhp hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      } else {\r\n        // Create\r\n        await axios.post('/purchases/', payload)\r\n          .then(response => {\r\n            emit('saved', response.data);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error creating purchase:', error);\r\n            window.alert(\"Li khi to n nhp hng: \" + (error.response && error.response.data ? JSON.stringify(error.response.data) : error.message));\r\n          });\r\n      }\r\n    }\r\n\r\n    return {\r\n      code,\r\n      supplier,\r\n      date,\r\n      totalQuantity,\r\n      isActive,\r\n      item,\r\n      items,\r\n      suppliers,\r\n      productSearchTerm,\r\n      filteredProducts,\r\n      showProductDropdown,\r\n      dateInput,\r\n      openDatePicker,\r\n      selectAll,\r\n      handleSubmit,\r\n      addProduct,\r\n      removeItem,\r\n      formatPrice,\r\n      hideDropdown,\r\n      fileInput,\r\n      triggerImport,\r\n      handleFileUpload,\r\n      downloadTemplate,\r\n      showImportButton,\r\n      handleQuantityChange,\r\n      maxDate,\r\n      minDate,\r\n      isDateOutsideAllowedRange,\r\n      store // Make store available in the template\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary: #0070F4;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n  text-align: left;\r\n}\r\n\r\ninput, select, textarea {\r\n  background-color: white;\r\n  color: black;\r\n  border-radius: 0.3rem;\r\n  width: 100%;\r\n  border: 1px solid #ccc;\r\n  padding: 6px 10px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\ninput:focus, select:focus, textarea:focus {\r\n  border-color: $kv-primary;\r\n  outline: none;\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  width: auto;\r\n  flex-grow: 0;\r\n}\r\n\r\n.div-table-body {\r\n    overflow-y: auto;\r\n    max-height: 40vh;\r\n    padding-bottom: 1rem;\r\n    &::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding-top: 3rem;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n.purchase-window {\r\n    margin-top: 5rem;\r\n  background: #fff;\r\n  width: 35rem;\r\n  max-width: 95vw;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.2);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.window-header {\r\n  background-color: $kv-primary;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.window-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  line-height: 1;\r\n}\r\n\r\n.tabs-nav {\r\n  background: #f0f0f0;\r\n  border-bottom: 1px solid #ddd;\r\n  padding: 0 10px;\r\n}\r\n\r\n.tabs-nav ul { list-style: none; padding: 0; margin: 0; display: flex; }\r\n.tabs-nav li.active a { background: #fff; border-color: #ddd; border-bottom-color: #fff; color: #000; font-weight: 600; margin-bottom: -1px; }\r\n.tabs-nav a { display: block; padding: 10px 15px; text-decoration: none; color: #333; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; }\r\n\r\n.window-content { display: flex; flex-direction: column; }\r\n\r\n.form-body { \r\n    padding: 1rem; \r\n    background: #fff; \r\n    height: 60vh; \r\n    overflow-y: hidden;\r\n    display: flex; \r\n    flex-direction: column; \r\n}\r\n.tab-pane {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex: 1;\r\n    overflow: hidden;\r\n}\r\n.form-layout { display: flex; flex-direction: column; }\r\n.col-left, .col-right { flex: 1; }\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.form-group label {\r\n  width: 9rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n  flex-shrink: 0;\r\n  padding-right: 1em;\r\n}\r\n\r\n.window-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid #ddd;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.btn { padding: 8px 16px; border-radius: 3px; cursor: pointer; font-weight: 500; border: 1px solid transparent; display: inline-flex; align-items: center; gap: 5px; }\r\n.btn-outline { background: white; border-color: $kv-primary; color: $kv-primary; }\r\n.btn-primary { background: $kv-primary; color: white; }\r\n.btn-primary:hover { background: #0056b3; }\r\n.no-select { user-select: none; }\r\n\r\n.product-search-input {\r\n    width: 100%;\r\n    padding: 8px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n}\r\n\r\n.search-dropdown {\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 0;\r\n    right: 0;\r\n    background: white;\r\n    border: 1px solid #ccc;\r\n    // max-height: 200px;\r\n    overflow-y: auto;\r\n    z-index: 100;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\n.search-item {\r\n    padding: 8px;\r\n    cursor: pointer;\r\n    border-bottom: 1px solid #eee;\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n.search-item:hover {\r\n    background-color: #f0f0f0;\r\n}\r\n.item-name { font-weight: bold; }\r\n.item-code { color: #666; font-size: 0.9em; }\r\n\r\n.div-table {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    // border: 1px solid #ddd;\r\n}\r\n.div-table-header {\r\n    display: flex;\r\n    background-color: #f2f2f2;\r\n    font-weight: bold;\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 1;\r\n    border: 1px solid #ddd;\r\n}\r\n.div-table-row {\r\n    display: flex;\r\n    border: 1px solid #ddd;\r\n    background-color: white;\r\n}\r\n.div-cell {\r\n    padding: 0.4rem;\r\n    border-right: 1px solid #ddd;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.div-cell:last-child {\r\n    border-right: none;\r\n}\r\n.col-code { flex: 0 0 120px; }\r\n.col-name { flex: 1; }\r\n.col-qty { flex: 0 0 100px; justify-content: flex-end; }\r\n.col-action { flex: 0 0 80px; justify-content: center; }\r\n\r\n.qty-input, .price-input {\r\n    width: 80px;\r\n    text-align: right;\r\n    padding: 4px;\r\n    &::-webkit-outer-spin-button,\r\n    &::-webkit-inner-spin-button {\r\n        -webkit-appearance: none;\r\n        margin: 0;\r\n    }\r\n    -moz-appearance: textfield;\r\n}\r\n.btn-remove {\r\n    background: none; border: none; color: red; font-size: 1.2rem; cursor: pointer;\r\n}\r\n.row-items {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    margin-top: 1rem;\r\n}\r\n</style>\r\n","import { render } from \"./AddEditPurchase.vue?vue&type=template&id=ffb95cca&scoped=true\"\nimport script from \"./AddEditPurchase.vue?vue&type=script&lang=js\"\nexport * from \"./AddEditPurchase.vue?vue&type=script&lang=js\"\n\nimport \"./AddEditPurchase.vue?vue&type=style&index=0&id=ffb95cca&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ffb95cca\"]])\n\nexport default __exports__","import { render } from \"./Purchases.vue?vue&type=template&id=1829265b&scoped=true\"\nimport script from \"./Purchases.vue?vue&type=script&lang=js\"\nexport * from \"./Purchases.vue?vue&type=script&lang=js\"\n\nimport \"./Purchases.vue?vue&type=style&index=0&id=1829265b&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1829265b\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"work-area\">\r\n    <div class=\"top-area\">\r\n      <div class=\"page-name-area\">Cht kho </div>\r\n      <div class=\"action-area\">\r\n        <div class=\"page-actions\">\r\n          <div class=\"pr-3\"> t ngy <b>{{ previousDate }}</b> n ngy </div>\r\n          <input type=\"date\" v-model=\"chosenDate\" class=\"date-picker\" @click=\"$event.target.showPicker()\" style=\"background-color: white; color: black;\" :max=\"maxDate\" :min=\"minDate\"/>\r\n          <div class=\"pl-2\">  cht lc: {{ created_at }}</div>\r\n          \r\n          <button @click=\"copyClosingToActual\" class=\"btn btn-primary\" style=\"margin-left: 1rem;\">\r\n            Copy Tn cui -> Thc t\r\n          </button>\r\n          <button @click=\"openEditChanges\" class=\"btn btn-info\" style=\"margin-left: 1rem;\">\r\n            Sa i hng\r\n          </button>\r\n          <button @click=\"createDateEndInventory\" class=\"btn btn-primary\" style=\"margin-left: 1rem;\">\r\n            CHT HNG\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <div class=\"data-area\">\r\n          <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"tableRows\"\r\n            class=\"elevation-1\"\r\n            fixed-header\r\n            :items-per-page=\"-1\"\r\n            height=\"calc(100vh - 10rem)\"\r\n            style=\"background-color: white;\"\r\n            density=\"compact\"\r\n            hide-default-footer\r\n          >\r\n            <template v-slot:item.diff=\"{ item }\">\r\n              <span :class=\"{'text-red': item.diff !== 0}\">{{ item.diff }}</span>\r\n            </template>\r\n            <template v-slot:item.closing=\"{ item }\">\r\n              <span class=\"font-bold\">{{ item.closing }}</span>\r\n            </template>\r\n            <template v-slot:item.check_actual=\"{ item }\">\r\n              <input type=\"number\" v-model.number=\"item.check_actual\" class=\"qty-input\" @focus=\"$event.target.select()\">\r\n            </template>\r\n          </v-data-table>\r\n\r\n        \r\n      </div>\r\n      <div class=\"info-area pl-3\">\r\n        <div class=\"filters\">\r\n          <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Tm kim m hng, tn hng\" />\r\n          <input type=\"text\" v-model=\"searchQueryInvoice\" placeholder=\"Tm kim ha n\" />\r\n          <button @click=\"exportToExcel\" class=\"btn btn-secondary\">Export Excel</button>\r\n        </div>\r\n        <div style=\"padding: 0.5rem; text-align: left;\">\r\n          Lu : Hin th ti a 10 ha n, xut excel s xut ton b ha n.\r\n        </div>\r\n        <div class=\"data-table-holder\">\r\n          <v-data-table\r\n            :headers=\"infoHeaders\"\r\n            :items=\"infoTableRows\"\r\n            class=\"elevation-1 bordered-table\"\r\n            fixed-header\r\n            :items-per-page=\"-1\"\r\n            style=\"background-color: white; width: max-content; min-width: 100%;\"\r\n            density=\"compact\"\r\n            height=\"65vh\"\r\n            hide-default-footer\r\n          >\r\n          </v-data-table>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n    <EditChangesItems\r\n      v-if=\"showEditChanges\"\r\n      :initial-items=\"currentChangesItems\"\r\n      :products=\"products\"\r\n      @close=\"showEditChanges = false\"\r\n      @save=\"handleSaveChanges\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, nextTick, onBeforeUnmount, watch} from 'vue';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\nimport { useStore } from 'vuex';\r\nimport EditChangesItems from './EditChangesItems.vue';\r\n\r\nexport default {\r\n  name: 'DateEndInventory',\r\n  components: {\r\n    EditChangesItems,\r\n  },\r\n  props: {\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3,\r\n    },\r\n  },\r\n  \r\n  setup(props) {\r\n    const store = useStore();\r\n\r\n    const getLocalDateISO = (date) => {\r\n      return new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);\r\n    };\r\n\r\n    const DateEndInventorys = ref([]);\r\n    // default to today -1 day\r\n    const created_at = ref('cha cht');\r\n    // const chosenDate = ref(getLocalDateISO(new Date(Date.now())));\r\n    const chosenDate = ref(getLocalDateISO(new Date(Date.now())));\r\n    const searchQuery = ref('');\r\n    const searchQueryInvoice = ref('');\r\n    const showEditChanges = ref(false);\r\n    const currentChangesItems = ref([]);\r\n    const previousDate = ref(null);\r\n\r\n    const products = ref([]);\r\n\r\n    const maxDate = computed(() => {\r\n      return getLocalDateISO(new Date());\r\n    });\r\n\r\n    const minDate = computed(() => {\r\n      if (store.getters.userAdmin || store.getters.userSuperadmin) {\r\n        return ''; // No minimum date for admins\r\n      }\r\n      const today = new Date();\r\n      const minDay = new Date();\r\n      minDay.setDate(today.getDate() - (props.d_edit_days || 3));\r\n      return getLocalDateISO(minDay);\r\n    });\r\n\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await axios.get('/products/');\r\n        products.value = response.data;\r\n        // console.log('Fetched products:', products.value);\r\n      } catch (error) {\r\n        console.error('Error fetching products:', error);\r\n      }\r\n    };\r\n\r\n    const fetchDateEndInventorys = async () => {\r\n      store.commit('setLoading', true);\r\n      try {\r\n        const response = await axios.get('/dateendinventories/', {\r\n          params: {\r\n            dayend: true,\r\n            date: chosenDate.value\r\n          }\r\n        });\r\n        DateEndInventorys.value = response.data;\r\n        previousDate.value = DateEndInventorys.value[0].previous_date?.date || null;\r\n        created_at.value = DateEndInventorys.value[0].created_at ? DateEndInventorys.value[0].created_at.slice(0, 16): 'cha cht';\r\n      } catch (error) {\r\n        console.error('Error fetching date end inventories:', error);\r\n      }\r\n      store.commit('setLoading', false);\r\n    };\r\n\r\n    const createDateEndInventory = async () => {\r\n      if (!chosenDate.value) return;\r\n      store.commit('setLoading', true);\r\n\r\n      try {\r\n        const itemsPayload = tableRows.value.map(row => ({\r\n          code: row.code,\r\n          quantity: row.check_actual\r\n        }));\r\n        await axios.post('/dateendinventories/', {\r\n          date: chosenDate.value,\r\n          items: itemsPayload\r\n        });\r\n        await fetchDateEndInventorys();\r\n        alert(\" to phiu cht kho thnh cng.\");\r\n      } catch (error) {\r\n        console.error('Error creating date end inventory:', error);\r\n        alert(\"Li khi to phiu cht kho: \" + (error.response?.data?.detail || error.message));\r\n      }\r\n      store.commit('setLoading', false);\r\n    };\r\n\r\n    const headers = [\r\n      { title: 'Nhm hng', key: 'group', headerProps: { class: 'my-custom-header-class' } , align: 'start' , cellProps: { class: 'text-left back-ground-white' } },\r\n      { title: 'M hng', key: 'code', headerProps: { class: 'my-custom-header-class' } , align: 'start' , cellProps: { class: 'text-left back-ground-white' } },\r\n      { title: 'Tn hng', key: 'name', headerProps: { class: 'my-custom-header-class' } , align: 'start' , cellProps: { class: 'text-left back-ground-white' } },\r\n      { title: 'Tn u', key: 'prev', align: 'end', headerProps: { class: 'my-custom-header-class ', style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right back-ground-white' }},\r\n      { title: 'Nhp', key: 'purchaseSum', align: 'end', headerProps: { class: 'my-custom-header-class ', style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right back-ground-white ' } },\r\n      { title: 'Xut', key: 'invoiceSum', align: 'end', headerProps: { class: 'my-custom-header-class ', style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right  back-ground-white' } },\r\n      { title: 'i hng', key: 'changeSum', align: 'end', headerProps: { class: 'my-custom-header-class ', style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right  back-ground-white' } },\r\n      { title: 'Tn cui (LT)', key: 'closing', align: 'end', headerProps: { class: 'my-custom-header-class ' , style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right  back-ground-white' } },\r\n      { title: 'Thc t', key: 'actual', align: 'end', headerProps: { class: 'my-custom-header-class ' , style: 'text-align: right;'} , align: 'end', cellProps: { class: 'text-right back-ground-white ' } },\r\n      { title: 'Chnh lch', key: 'diff', align: 'end', headerProps: { class: 'my-custom-header-class  pr-3' , style: 'text-align: right;' } , align: 'end', cellProps: { class: 'text-right  back-ground-white pr-3' } },\r\n      { title: 'Kim k', key: 'check_actual', align: 'end', headerProps: { class: 'my-custom-header-class pr-3' , style: 'text-align: right;'} , align: 'end', cellProps: { class: 'text-right back-ground-white pr-3' } },\r\n    ];\r\n\r\n    const tableRows = ref([]);\r\n    const updateTableRows = () => {\r\n      if (!DateEndInventorys.value || DateEndInventorys.value.length === 0) {\r\n        tableRows.value = [];\r\n        return;\r\n      }\r\n      const data = DateEndInventorys.value[0];\r\n      \r\n      const prevItems = data.previous_date?.items || [];\r\n      const currentItems = data.items || [];\r\n      const purchases = data.purchases || [];\r\n      const invoices = data.invoices || [];\r\n      const changes = data.changes_items || [];\r\n\r\n      const allCodes = new Set();\r\n\r\n      const collectCodes = (items) => {\r\n        if (Array.isArray(items)) {\r\n          items.forEach(i => {\r\n            if (i.code) {\r\n              allCodes.add(i.code);\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n      collectCodes(prevItems);\r\n      collectCodes(currentItems);\r\n      purchases.forEach(p => collectCodes(p.items));\r\n      invoices.forEach(i => {\r\n        collectCodes(i.expanded_items);\r\n      });\r\n      changes.forEach(c => {\r\n        if (c.deduction_product_code) allCodes.add(c.deduction_product_code);\r\n        if (c.replace_product_code) allCodes.add(c.replace_product_code);\r\n      });\r\n\r\n      const productInfoMap = {};\r\n      products.value.forEach(p => {\r\n        productInfoMap[p.code] = { name: p.name, group: p.productGroup };\r\n      });\r\n\r\n      \r\n      const rows = [];\r\n      allCodes.forEach(code => {\r\n        const info = productInfoMap[code] || {};\r\n        const row = {\r\n          code: code,\r\n          name: info.name || '',\r\n          group: info.group || '',\r\n          prev: 0,\r\n          purchaseSum: 0,\r\n          invoiceSum: 0,\r\n          changeSum: 0,\r\n          closing: 0,\r\n          actual: '',\r\n          diff: 0,\r\n          check_actual: 0\r\n        };\r\n\r\n        // Previous Quantity\r\n        const prevItem = prevItems.find(i => i.code === code);\r\n        row.prev = prevItem ? (Number(prevItem.quantity) || 0) : 0;\r\n\r\n        // Purchases\r\n        let purchaseSum = 0;\r\n        purchases.forEach(p => {\r\n          const pItem = p.items ? p.items.find(i => i.code === code) : null;\r\n          const qty = pItem ? (Number(pItem.quantity) || 0) : 0;\r\n          purchaseSum += qty;\r\n        });\r\n        row.purchaseSum = purchaseSum === 0 ? '' : purchaseSum;\r\n\r\n        // Invoices\r\n        let invoiceSum = 0;\r\n        invoices.forEach(inv => {\r\n          inv.expanded_items?.forEach(i => {\r\n            if (i.code === code) {\r\n              invoiceSum += (Number(i.quantity) || 0);\r\n            }\r\n          });\r\n        });\r\n        row.invoiceSum = invoiceSum === 0 ? '' : invoiceSum;\r\n\r\n        // Changes (Global)\r\n        let changeSum = 0;\r\n        changes.forEach(c => {\r\n          const qty = Number(c.quantity) || 0;\r\n          if (c.deduction_product_code === code) {\r\n            changeSum -= qty; // Deduction reduces outflow (returns to stock)\r\n          }\r\n          if (c.replace_product_code === code) {\r\n            changeSum += qty; // Replacement increases outflow (leaves stock)\r\n          }\r\n        });\r\n        row.changeSum = changeSum === 0 ? '' : changeSum;\r\n\r\n        // Closing (Calculated)\r\n        row.closing = row.prev + purchaseSum - invoiceSum;\r\n        row.closing = row.prev + purchaseSum - invoiceSum - changeSum;\r\n\r\n        // Actual (Checked)\r\n        const currItem = currentItems.find(i => i.code === code);\r\n        row.actual = currItem ? (Number(currItem.quantity) || 0) : '';\r\n\r\n        // Diff\r\n        row.diff = row.closing - row.actual;\r\n\r\n        rows.push(row);\r\n      });\r\n\r\n      tableRows.value = rows.sort((a, b) => a.code.localeCompare(b.code));\r\n\r\n      // remove all codes that are combo products\r\n      tableRows.value = tableRows.value.filter(row => {\r\n        const prod = products.value.find(p => p.code === row.code);\r\n        return prod && prod.product_type !== 'combo';\r\n      });\r\n\r\n      // remove all codes that have open purchase invoiceSum and zero closing and zero actual\r\n      tableRows.value = tableRows.value.filter(row => {\r\n        const prod = products.value.find(p => p.code === row.code);\r\n        return !(prod && row.prev === 0 && (row.purchaseSum === 0 || row.purchaseSum === '' ) && (row.invoiceSum === 0 || row.invoiceSum === '') \r\n        && (row.changeSum === 0 || row.changeSum === '') && row.closing === 0 && row.actual === 0);\r\n      });\r\n\r\n\r\n\r\n      console.log('Updated table rows:', tableRows.value);\r\n    };\r\n\r\n    const filteredInvoices = computed(() => {\r\n      if (!DateEndInventorys.value || DateEndInventorys.value.length === 0) return [];\r\n      let invoices = DateEndInventorys.value[0].invoices || [];\r\n      if (searchQueryInvoice.value) {\r\n        const lower = searchQueryInvoice.value.toLowerCase();\r\n        invoices = invoices.filter(inv => \r\n          (inv.code && inv.code.toLowerCase().includes(lower)) ||\r\n          (inv.channel && inv.channel.toLowerCase().includes(lower))\r\n        );\r\n      }\r\n      // return invoices;\r\n      return invoices.slice(0, 10);\r\n    });\r\n\r\n    const infoTableRows = computed(() => {\r\n      if (!DateEndInventorys.value || DateEndInventorys.value.length === 0) return [];\r\n      const invoices = filteredInvoices.value;\r\n      \r\n      const productMap = {};\r\n\r\n      invoices.forEach(inv => {\r\n        const items = inv.expanded_items || [];\r\n        items.forEach(item => {\r\n          if (item.type === 'combo_item' || item.type === 'normal') {\r\n             if (!productMap[item.code]) {\r\n               const p = products.value.find(prod => prod.code === item.code);\r\n               productMap[item.code] = {\r\n                 code: item.code,\r\n                 name: p ? p.name : '',\r\n               };\r\n             }\r\n             \r\n             const key = `invoice_${inv.id}`;\r\n             productMap[item.code][key] = (productMap[item.code][key] || 0) + (Number(item.quantity) || 0);\r\n          }\r\n        });\r\n      });\r\n\r\n      let result = Object.values(productMap);\r\n      if (searchQuery.value) {\r\n        const lower = searchQuery.value.toLowerCase();\r\n        result = result.filter(item => \r\n          (item.code && item.code.toLowerCase().includes(lower)) ||\r\n          (item.name && item.name.toLowerCase().includes(lower))\r\n        );\r\n      }\r\n      return result.sort((a, b) => a.code.localeCompare(b.code));\r\n    });\r\n\r\n    const infoHeaders = computed(() => {\r\n      if (!DateEndInventorys.value || DateEndInventorys.value.length === 0) return [];\r\n      const invoices = filteredInvoices.value;\r\n      const visibleRows = infoTableRows.value;\r\n      \r\n      const headers = [\r\n        { title: 'M hng', key: 'code', fixed: true, align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'Tn hng', key: 'name',fixed: true, align: 'start', headerProps: { class: 'my-custom-header-class' , style: 'min-width: 10rem;' }, cellProps: { class: 'text-left back-ground-white' } },\r\n      ];\r\n\r\n      invoices.forEach(inv => {\r\n        const invKey = `invoice_${inv.id}`;\r\n        \r\n        const hasMainData = searchQuery.value ? visibleRows.some(r => r[invKey]) : true;\r\n\r\n        if (hasMainData) {\r\n          headers.push({\r\n            title: inv.code,\r\n            key: invKey,\r\n            align: 'end',\r\n            headerProps: { class: 'my-custom-header-class vertical-header' },\r\n            cellProps: { class: 'text-right back-ground-white pr-2' }\r\n          });\r\n        }\r\n      });\r\n      \r\n      return headers;\r\n    });\r\n\r\n    const exportToExcel = () => {\r\n      if (!DateEndInventorys.value || DateEndInventorys.value.length === 0) return;\r\n      const invoices = DateEndInventorys.value[0].invoices || [];\r\n      \r\n      const productMap = {};\r\n\r\n      invoices.forEach(inv => {\r\n        const items = inv.expanded_items || [];\r\n        items.forEach(item => {\r\n          if (item.type === 'combo_item' || item.type === 'normal') {\r\n             if (!productMap[item.code]) {\r\n               const p = products.value.find(prod => prod.code === item.code);\r\n               productMap[item.code] = {\r\n                 code: item.code,\r\n                 name: p ? p.name : '',\r\n               };\r\n             }\r\n             \r\n             const key = `invoice_${inv.id}`;\r\n             productMap[item.code][key] = (productMap[item.code][key] || 0) + (Number(item.quantity) || 0);\r\n          }\r\n        });\r\n      });\r\n\r\n      const rows = Object.values(productMap).sort((a, b) => a.code.localeCompare(b.code));\r\n\r\n      const headerRow = ['M hng', 'Tn hng'];\r\n      const keys = ['code', 'name'];\r\n\r\n      invoices.forEach(inv => {\r\n        headerRow.push(inv.code);\r\n        keys.push(`invoice_${inv.id}`);\r\n      });\r\n\r\n      const wsData = [headerRow];\r\n      rows.forEach(row => {\r\n        const rowData = keys.map(k => row[k] || '');\r\n        wsData.push(rowData);\r\n      });\r\n\r\n      const ws = XLSX.utils.aoa_to_sheet(wsData);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, \"InfoData\");\r\n      XLSX.writeFile(wb, `InfoData_${chosenDate.value}.xlsx`);\r\n    };\r\n\r\n    watch([DateEndInventorys, products], updateTableRows);\r\n\r\n    const onDiffChange = (item) => {\r\n      item.diff = item.closing - item.actual;\r\n    };\r\n\r\n    const copyClosingToActual = () => {\r\n      tableRows.value.forEach(row => {\r\n        let val = row.closing;\r\n        row.check_actual = val;\r\n      });\r\n    };\r\n\r\n    const openEditChanges = () => {\r\n      if (DateEndInventorys.value.length > 0) {\r\n        currentChangesItems.value = JSON.parse(JSON.stringify(DateEndInventorys.value[0].changes_items || []));\r\n        showEditChanges.value = true;\r\n      } else {\r\n        alert(\"Khng c d liu cht kho cho ngy ny.\");\r\n      }\r\n    };\r\n\r\n    const handleSaveChanges = async (updatedItems) => {\r\n      if (DateEndInventorys.value.length > 0) {\r\n        const date = DateEndInventorys.value[0].date;\r\n        if (!date) {\r\n            alert(\"Khng th lu, khng tm thy ngy.\");\r\n            return;\r\n        }\r\n        try {\r\n          store.commit('setLoading', true);\r\n          await axios.post(`/changeitems/`, {\r\n            date: date,\r\n            items: updatedItems\r\n          });\r\n          showEditChanges.value = false;\r\n          await fetchDateEndInventorys(); // Refresh data\r\n        } catch (error) {\r\n          alert(\"Li khi lu i hng: \" + (error.response?.data?.detail || error.message));\r\n        } finally {\r\n          store.commit('setLoading', false);\r\n        }\r\n      }\r\n    };\r\n\r\n    const formatPrice = (value) => {\r\n      const numericValue = Number(value);\r\n      if (isNaN(numericValue)) return '0 ';\r\n      return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(numericValue);\r\n    };\r\n\r\n\r\n    const formatDateTime = (dateString) => { // format YYYY-MM-DD HH:mm:ss\r\n      if (!dateString) return '';\r\n      const date = new Date(dateString);\r\n      \r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      const hours = String(date.getHours()).padStart(2, '0');\r\n      const minutes = String(date.getMinutes()).padStart(2, '0');\r\n      const seconds = String(date.getSeconds()).padStart(2, '0');\r\n\r\n      return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchDateEndInventorys();\r\n      fetchProducts();\r\n    });\r\n\r\n    watch(chosenDate, fetchDateEndInventorys);\r\n\r\n    return {\r\n      getLocalDateISO,\r\n      DateEndInventorys,\r\n      fetchDateEndInventorys,\r\n      chosenDate,\r\n      searchQuery,\r\n      searchQueryInvoice,\r\n      // surcharges,\r\n      formatPrice,\r\n      formatDateTime,\r\n      tableRows,\r\n      headers,\r\n      onDiffChange,\r\n      copyClosingToActual,\r\n      infoHeaders,\r\n      infoTableRows,\r\n      exportToExcel,\r\n      showEditChanges,\r\n      openEditChanges,\r\n      handleSaveChanges,\r\n      currentChangesItems,\r\n      products,\r\n      previousDate,\r\n      createDateEndInventory,\r\n      created_at,\r\n      minDate,\r\n      maxDate,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$kv-primary-color: #0070F4;\r\n$border-color: #aaaaaa;\r\n.work-area {\r\n  padding: 1rem 5rem;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n\r\n  .top-area {\r\n    // height: calc(100% - 5rem);\r\n    display: flex;\r\n    padding: 0.5rem;\r\n    align-items: center;\r\n\r\n    .page-name-area {\r\n      font-size: 1.2rem;\r\n      font-weight: bold;\r\n      margin-right: 1rem;\r\n    }\r\n    .date-picker {\r\n      padding: 5px;\r\n      border: 1px solid $border-color;\r\n      border-radius: 4px;\r\n    }\r\n  }\r\n\r\n  .bottom-area {\r\n    display: flex;\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .data-area {\r\n      height: 100%;\r\n      width: 60%;\r\n      overflow: auto;\r\n      background: white;\r\n  }\r\n}\r\n\r\n.info-area {\r\n    margin-left: 3rem;\r\n    height: 100%;\r\n    width: 40%;\r\n    overflow: auto;\r\n    background: white;\r\n    // border-left: 1px solid #aaaaaa;\r\n    border-radius: 0.5rem;\r\n}\r\n\r\n.page-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n}\r\n\r\n.btn-primary {\r\n  background: $kv-primary-color;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-info {\r\n  background: #17a2b8;\r\n  color: white;\r\n}\r\n\r\n.font-bold {\r\n    font-weight: bold;\r\n}\r\n\r\n.text-red {\r\n    color: red;\r\n    font-weight: bold;\r\n}\r\n::v-deep .back-ground-white {\r\n    background-color: white;\r\n    color: black;\r\n}\r\n\r\n::v-deep .qty-input {\r\n    width: 100%;\r\n    text-align: right;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    padding: 4px;\r\n    background-color: white;\r\n    color: black;\r\n    -moz-appearance: textfield;\r\n}\r\n\r\n::v-deep .qty-input::-webkit-outer-spin-button,\r\n::v-deep .qty-input::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n\r\n::v-deep .qty-input:focus {\r\n    outline: 2px solid #0070F4;\r\n    border-color: transparent;\r\n}\r\n\r\n::v-deep .vertical-header {\r\n  writing-mode: vertical-lr;\r\n  transform: rotate(180deg);\r\n  max-height: 12rem;\r\n  min-height: 12rem;\r\n  text-align: left;\r\n}\r\n\r\n.data-table-holder {\r\n    margin-top: 1rem;\r\n    height: 70vh;\r\n    max-width: 47vw;\r\n    overflow: auto;\r\n}\r\n\r\n::v-deep .bordered-table .v-table__wrapper > table {\r\n  border-collapse: collapse;\r\n}\r\n::v-deep .bordered-table th,\r\n::v-deep .bordered-table td {\r\n  border: 1px solid #000000 !important;\r\n}\r\n\r\n.filters {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem;\r\n\r\n  input {\r\n    background-color: white;\r\n    color: black;\r\n    border-radius: 0.3rem;\r\n    width: 100%;\r\n    border: 1px solid #ccc;\r\n    padding: 6px 10px;\r\n    font-size: 1rem;\r\n    transition: border-color 0.2s;\r\n  }\r\n\r\n  input:focus {\r\n    border-color: #0070F4;\r\n    outline: none;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"modal-overlay\" @mousedown.self=\"$emit('close')\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h3>Chnh sa i hng</h3>\r\n        <button @click=\"$emit('close')\" class=\"close-btn\">&times;</button>\r\n      </div>\r\n\r\n      <div class=\"modal-body\">\r\n        <div class=\"table-header\">\r\n          <div class=\"col-deduct\">Hng tr (Deduction)</div>\r\n          <div class=\"col-replace\">Hng i (Replacement)</div>\r\n          <div class=\"col-description\">M t</div>\r\n          <div class=\"col-qty\">S lng</div>\r\n          <div class=\"col-action\"></div>\r\n        </div>\r\n\r\n        <div v-for=\"(item, index) in items\" :key=\"index\" class=\"table-row\">\r\n          <!-- Deduction Input -->\r\n          <div class=\"col-deduct search-container\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"item.deductSearchTerm\"\r\n              @focus=\"handleFocus($event, item, 'deduction')\"\r\n              @blur=\"onBlur(item, 'deduction')\"\r\n              @input=\"onInputChange(item, 'deduction')\"\r\n              placeholder=\"Tm hng tr\"\r\n              class=\"search-input\"\r\n            />\r\n          </div>\r\n          <!-- Replacement Input -->\r\n          <div class=\"col-replace search-container\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"item.replaceSearchTerm\"\r\n              @focus=\"handleFocus($event, item, 'replace')\"\r\n              @blur=\"onBlur(item, 'replace')\"\r\n              @input=\"onInputChange(item, 'replace')\"\r\n              placeholder=\"Tm hng i\"\r\n              class=\"search-input\"\r\n            />\r\n          </div>\r\n          <!-- Description Input -->\r\n          <div class=\"col-description\">\r\n            <input type=\"text\" v-model=\"item.description\" placeholder=\"M t\" class=\"description-input\" />\r\n          </div>\r\n          <!-- Quantity Input -->\r\n          <div class=\"col-qty\">\r\n            <input type=\"number\" v-model.number=\"item.quantity\" class=\"qty-input\" min=\"1\" @change=\"handleQuantityChange(item)\" />\r\n          </div>\r\n          <div class=\"col-action\">\r\n            <button @click=\"removeItem(index)\" class=\"btn-remove\">&times;</button>\r\n          </div>\r\n        </div>\r\n        <button @click=\"addItem\" class=\"btn-add-row\">+ Thm dng</button>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button @click=\"$emit('close')\" class=\"btn btn-secondary\">Hy</button>\r\n          <button @click=\"saveChanges\" class=\"btn btn-primary new-button\" :disabled=\"items.length === 0 || items.every(item => !item.deduction_product_code || !item.replace_product_code || item.quantity <= 0)\">Lu</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Teleport to=\"body\">\r\n    <div v-if=\"activeDropdown.item && currentDropdownList.length\" class=\"dropdown-teleport\" :style=\"dropdownStyle\">\r\n      <div\r\n        v-for=\"product in currentDropdownList\"\r\n        :key=\"product.id\"\r\n        class=\"dropdown-item\"\r\n        @mousedown.prevent=\"selectProduct(activeDropdown.item, product, activeDropdown.type)\"\r\n      >\r\n        {{ product.name }} ({{ product.code }})\r\n      </div>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watch } from 'vue';\r\n\r\nexport default {\r\n  name: 'EditChangesItems',\r\n  props: {\r\n    initialItems: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    products: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  emits: ['close', 'save'],\r\n  setup(props, { emit }) {\r\n    const getInitialSearchTerm = (code) => {\r\n      if (!code) return '';\r\n      const p = props.products.find(prod => prod.code === code);\r\n      return p ? `${p.name} - ${p.code}` : code;\r\n    };\r\n\r\n    const items = ref(props.initialItems.map(i => ({\r\n      ...i,\r\n      deductSearchTerm: getInitialSearchTerm(i.deduction_product_code),\r\n      replaceSearchTerm: getInitialSearchTerm(i.replace_product_code),\r\n      description: i.description || '',\r\n      showDeductDropdown: false,\r\n      showReplaceDropdown: false,\r\n    })));\r\n\r\n    const activeDropdown = ref({ item: null, type: null });\r\n    const dropdownStyle = ref({});\r\n\r\n    const normalProducts = computed(() => \r\n      props.products.filter(p => p.product_type === 'normal')\r\n    );\r\n    \r\n    \r\n\r\n    const filteredProducts = (term) => {\r\n      if (!term) return normalProducts.value.slice(0, 10);\r\n      const lowerTerm = term.toLowerCase();\r\n      return normalProducts.value.filter(p => {\r\n        const name = p.name.toLowerCase();\r\n        const code = p.code.toLowerCase();\r\n        const combined = `${name} - ${code}`;\r\n        return name.includes(lowerTerm) || code.includes(lowerTerm) || combined.includes(lowerTerm);\r\n      }).slice(0, 10);\r\n    };\r\n\r\n    const currentDropdownList = computed(() => {\r\n      const { item, type } = activeDropdown.value;\r\n      if (!item) return [];\r\n      const term = type === 'deduction' ? item.deductSearchTerm : item.replaceSearchTerm;\r\n      return filteredProducts(term);\r\n    });\r\n\r\n    const handleFocus = (event, item, type) => {\r\n      const rect = event.target.getBoundingClientRect();\r\n      dropdownStyle.value = {\r\n        top: `${rect.bottom}px`,\r\n        left: `${rect.left}px`,\r\n        width: `${rect.width}px`\r\n      };\r\n      activeDropdown.value = { item, type };\r\n    };\r\n\r\n    const onInputChange = (item, type) => {\r\n      if (type === 'deduction') {\r\n        item.deduction_product_code = '';\r\n      } else {\r\n        item.replace_product_code = '';\r\n      }\r\n    };\r\n\r\n    const onBlur = (item, type) => {\r\n      setTimeout(() => {\r\n        if (activeDropdown.value.item === item && activeDropdown.value.type === type) {\r\n          activeDropdown.value = { item: null, type: null };\r\n        }\r\n        if (type === 'deduction') item.showDeductDropdown = false;\r\n        else item.showReplaceDropdown = false;\r\n      }, 200);\r\n    };\r\n\r\n    const selectProduct = (item, product, type) => {\r\n      if (type === 'deduction') {\r\n        item.deduction_product_code = product.code;\r\n        item.deductSearchTerm = `${product.name} - ${product.code}`;\r\n        item.showDeductDropdown = false;\r\n        activeDropdown.value = { item: null, type: null };\r\n      } else {\r\n        item.replace_product_code = product.code;\r\n        item.replaceSearchTerm = `${product.name} - ${product.code}`;\r\n        item.showReplaceDropdown = false;\r\n        activeDropdown.value = { item: null, type: null };\r\n      }\r\n    };\r\n\r\n    const addItem = () => {\r\n      items.value.push({\r\n        deduction_product_code: '',\r\n        replace_product_code: '',\r\n        quantity: 1,\r\n        description: '',\r\n        deductSearchTerm: '',\r\n        replaceSearchTerm: '',\r\n        showDeductDropdown: false,\r\n        showReplaceDropdown: false,\r\n      });\r\n    };\r\n\r\n    const removeItem = (index) => {\r\n      items.value.splice(index, 1);\r\n    };\r\n\r\n    const handleQuantityChange = (item) => {\r\n      const qty = Number(item.quantity);\r\n      if (isNaN(qty) || qty < 1) {\r\n        item.quantity = 1;\r\n      }\r\n    };\r\n\r\n    const saveChanges = () => {\r\n      const validItems = items.value\r\n        .filter(item => \r\n          (item.deduction_product_code || item.replace_product_code) && item.quantity > 0\r\n        )\r\n        .map(item => ({ // clean up internal state properties\r\n          deduction_product_code: item.deduction_product_code,\r\n          replace_product_code: item.replace_product_code,\r\n          quantity: item.quantity,\r\n          description: item.description || ''\r\n        }));\r\n      emit('save', validItems);\r\n    };\r\n\r\n    return {\r\n      items,\r\n      filteredProducts,\r\n      activeDropdown,\r\n      dropdownStyle,\r\n      currentDropdownList,\r\n      handleFocus,\r\n      onInputChange,\r\n      onBlur,\r\n      selectProduct,\r\n      addItem,\r\n      removeItem,\r\n      saveChanges,\r\n      handleQuantityChange\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.new-button {\r\n  &:disabled {\r\n    background-color: #a0c4ff !important;\r\n    border-color: #a0c4ff !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n/* Modal styles */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0; left: 0;\r\n  width: 100vw; height: 100vh;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n.modal-content {\r\n  background: white;\r\n  padding: 1.5rem;\r\n  border-radius: 5px;\r\n  width: 80%;\r\n  max-width: 900px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid #eee;\r\n  padding-bottom: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n}\r\n.modal-body {\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n.modal-footer {\r\n  border-top: 1px solid #eee;\r\n  padding-top: 1rem;\r\n  margin-top: 1rem;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/* Table styles */\r\n.table-header, .table-row {\r\n  display: flex;\r\n  gap: 1rem;\r\n  align-items: center;\r\n  padding: 0.5rem 0;\r\n  position: relative; /* For dropdown positioning */\r\n}\r\n.table-header {\r\n  font-weight: bold;\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n.col-deduct, .col-replace { flex: 3; }\r\n.col-qty { flex: 1; }\r\n.col-description { flex: 2; } /* Added description column */\r\n.col-action { flex: 0.5; text-align: center; }\r\n\r\n.search-container {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n.search-input {\r\n  width: 100%;\r\n  padding: 6px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.description-input {\r\n  width: 100%;\r\n  padding: 6px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  box-sizing: border-box;\r\n}\r\n.dropdown {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  top: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  z-index: 1001;\r\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n}\r\n.dropdown-teleport {\r\n  position: fixed;\r\n  background: white;\r\n  border: 1px solid #ccc;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  z-index: 9999;\r\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n  border-radius: 0 0 4px 4px;\r\n}\r\n.dropdown-item {\r\n  padding: 8px;\r\n  cursor: pointer;\r\n}\r\n.dropdown-item:hover {\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.qty-input {\r\n  width: 100%;\r\n  padding: 6px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n}\r\n.btn-remove {\r\n  color: red;\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.2rem;\r\n  cursor: pointer;\r\n}\r\n.btn-add-row {\r\n  margin-top: 1rem;\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px dashed #ccc;\r\n  background: #f9f9f9;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Reusing button styles from parent */\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n}\r\n.btn-primary {\r\n  background: #0070F4;\r\n  color: white;\r\n}\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n</style>","import { render } from \"./EditChangesItems.vue?vue&type=template&id=6f829926&scoped=true\"\nimport script from \"./EditChangesItems.vue?vue&type=script&lang=js\"\nexport * from \"./EditChangesItems.vue?vue&type=script&lang=js\"\n\nimport \"./EditChangesItems.vue?vue&type=style&index=0&id=6f829926&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f829926\"]])\n\nexport default __exports__","import { render } from \"./DateEndInventory.vue?vue&type=template&id=657dfc4a&scoped=true\"\nimport script from \"./DateEndInventory.vue?vue&type=script&lang=js\"\nexport * from \"./DateEndInventory.vue?vue&type=script&lang=js\"\n\nimport \"./DateEndInventory.vue?vue&type=style&index=0&id=657dfc4a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-657dfc4a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"p-2 max-w-7xl mx-auto\">\r\n    <!-- Date Selection -->\r\n    <div class=\"flex items-center gap-4 mb-8 bg-white p-4 rounded-lg shadow-sm border \" style=\"display: flex; flex-direction: row ; justify-content: center; align-items: center; \">\r\n      <div class=\"font-medium text-gray-700 pr-3\"><b> Cht Tin </b>t ngy <b>{{ previousDate }}</b> n ngy</div>\r\n      <input \r\n        type=\"date\" \r\n        id=\"date\" \r\n        v-model=\"selectedDate\" \r\n        @change=\"fetchData\"\r\n        @click=\"$event.target.showPicker()\"\r\n        :max=\"maxDate\"\r\n        :min=\"minDate\"\r\n        class=\"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        style=\"background-color: white; color: black; border: 1px solid gray;\"\r\n      />\r\n      <div class=\"text-gray-700 pl-3\"> cht lc: {{ createdAt }}</div>\r\n      <button \r\n        @click=\"fetchData\" \r\n        class=\"btn ml-2\"\r\n      >\r\n        Refresh\r\n      </button>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"text-center py-10 text-gray-500\">Loading data...</div>\r\n\r\n    <div v-else-if=\"balanceData\" class=\"space-y-6\">\r\n      \r\n      <!-- Summary Cards -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <!-- Beginning Balance -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n          <h3 class=\"text-gray-500 text-sm font-medium uppercase\">S d u k</h3>\r\n          <p class=\"text-2xl font-bold text-gray-800 mt-2\">{{ formatCurrency(beginningBalance) }}</p>\r\n          <p class=\"text-xs text-gray-400 mt-1\" v-if=\"balanceData.previous_date\">\r\n            From {{ balanceData.previous_date.date }}\r\n          </p>\r\n        </div>\r\n        \r\n        <!-- Total In (DR) -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n          <h3 class=\"text-gray-500 text-sm font-medium uppercase\">Tng Thu (DR)</h3>\r\n          <p class=\"text-2xl font-bold text-green-600 mt-2\">+{{ formatCurrency(totalIn) }}</p>\r\n        </div>\r\n\r\n        <!-- Total Out (CR) -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n          <h3 class=\"text-gray-500 text-sm font-medium uppercase\">Tng Chi (CR)</h3>\r\n          <p class=\"text-2xl font-bold text-red-600 mt-2\">-{{ formatCurrency(totalOut) }}</p>\r\n        </div>\r\n\r\n        <!-- Expected Ending -->\r\n        <div class=\"bg-blue-50 p-2 rounded-lg shadow border border-blue-200\">\r\n          <h3 class=\"text-blue-800 text-sm font-medium uppercase\">S d cui k</h3>\r\n          <p class=\"text-2xl font-bold text-blue-700 mt-2\">{{ formatCurrency(expectedEnding) }}</p>\r\n        </div>\r\n\r\n        <!-- finalised Ending -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n          <h3 class=\"text-blue-800 text-sm font-medium uppercase\">S d  cht</h3>\r\n          <p class=\"text-2xl font-bold text-blue-700 mt-2\">{{ balanceData.created_at ? formatCurrency(finalisedEnding) : '...' }}</p>\r\n        </div>\r\n\r\n         <!-- finalised Ending -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n          <h3 class=\"text-blue-800 text-sm font-medium uppercase\">Chnh lch</h3>\r\n          <p class=\"text-2xl font-bold text-blue-700 mt-2\">{{ formatCurrency(difference) }}</p>\r\n        </div>\r\n\r\n        <!-- Finalize Input Section -->\r\n        <div class=\"bg-white p-2 rounded-lg shadow border border-gray-200\">\r\n            <div class=\"\">\r\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Tin mt thc t</label>\r\n                <input \r\n                style=\"background-color: white; color: black; border: 1px solid gray; width: 100%;\"\r\n                type=\"text\" \r\n                v-model=\"actualCashInHandDisplay\" \r\n                class=\" rounded px-3 py-2 \"\r\n                @focus=\"$event.target.select()\"\r\n                />\r\n            </div>\r\n        </div>\r\n        <div class=\" p-2 rounded-lg shadow border border-gray-200\">\r\n            <button \r\n              @click=\"saveBalance\" \r\n              :disabled=\"saving\"\r\n              class=\"btn btn-secondary\"\r\n            >\r\n              {{ saving ? 'ang lu...' : 'Lu s d' }}\r\n            </button>\r\n          </div>\r\n      </div>\r\n\r\n      <!-- Transactions Table -->\r\n      <div class=\"bg-white rounded-lg shadow border border-gray-200 overflow-hidden\">\r\n        <div class=\"\" style=\"display: flex; flex-direction: row ; justify-content: space-between; align-items: center; padding: 0.5rem;\">\r\n          <h2 class=\"text-lg font-semibold text-gray-800\"> <b>Giao dch</b></h2>\r\n          <button @click=\"exportToCSV\" class=\"btn btn-secondary\" style=\"font-size: 0.8rem;\">Export CSV</button>\r\n          \r\n        </div>\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"transactions\"\r\n          class=\"elevation-1\"\r\n          density=\"compact\"\r\n          :items-per-page=\"-1\"\r\n          hide-default-footer\r\n          height=\"calc(100vh - 22rem)\"\r\n          style=\"background-color: white; color: black;\"\r\n          fixed-header\r\n        >\r\n          <template v-slot:item.transaction_type_name=\"{ item }\">\r\n            {{ item.transaction_type_name }}\r\n            <span \r\n              class=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full\"\r\n              :class=\"item.debit_or_credit === 'DR' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\"\r\n            >\r\n              {{ item.debit_or_credit }}\r\n            </span>\r\n          </template>\r\n          <template v-slot:item.amount=\"{ item }\">\r\n            <span :class=\"item.debit_or_credit === 'DR' ? 'text-green-600 font-medium' : 'text-red-600 font-medium'\">\r\n              {{ formatCurrency(item.amount) }}\r\n            </span>\r\n          </template>\r\n          <template v-slot:no-data>\r\n            <div class=\"px-6 py-8 text-center text-sm text-gray-500\" style=\"background-color: white; color: black;\">Khng tm thy giao dch cho ngy ny.</div>\r\n          </template>\r\n        </v-data-table>\r\n      </div>\r\n\r\n      \r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'DateEndCashBalance',\r\n  props: {\r\n    d_edit_days: {\r\n      type: Number,\r\n      default: 3,\r\n    },\r\n  },\r\n  data(props) {\r\n    return {\r\n      // d_edit_days: props.d_edit_days,\r\n      selectedDate: this.getLocalDateISO(new Date(Date.now())),\r\n      loading: false,\r\n      saving: false,\r\n      balanceData: null,\r\n      actualCashInHand: 0,\r\n      headers: [\r\n        { title: 'ID', key: 'id', align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'Loi', key: 'transaction_type_name', align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'M t', key: 'description', align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'M ha n', key: 'invoice_code', align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'Ti khon', key: 'bank_account_name', align: 'start', headerProps: { class: 'my-custom-header-class' }, cellProps: { class: 'text-left back-ground-white' } },\r\n        { title: 'S tin', key: 'amount', align: 'end', headerProps: { class: 'my-custom-header-class pr-3' }, cellProps: { class: 'text-right pr-3 back-ground-white' } },\r\n        \r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    maxDate() {\r\n      return this.getLocalDateISO(new Date());\r\n    },\r\n    minDate() {\r\n      if (this.$store.getters.userAdmin || this.$store.getters.userSuperadmin) {\r\n        return ''; // No minimum date for admins\r\n      }\r\n      const today = new Date();\r\n      const minDay = new Date();\r\n      minDay.setDate(today.getDate() - (this.d_edit_days || 3));\r\n      return this.getLocalDateISO(minDay);\r\n    },\r\n\r\n    transactions() {\r\n      return (this.balanceData?.transactions || []).filter(t => t.account === 1);\r\n    },\r\n    beginningBalance() {\r\n      if (this.balanceData?.previous_date) {\r\n        return parseFloat(this.balanceData.previous_date.cash_in_hand) || 0;\r\n      }\r\n      return 0;\r\n    },\r\n    totalIn() {\r\n      return this.transactions\r\n        .filter(t => t.debit_or_credit === 'DR')\r\n        .reduce((sum, t) => sum + parseFloat(t.amount), 0);\r\n    },\r\n    totalOut() {\r\n      return this.transactions\r\n        .filter(t => t.debit_or_credit === 'CR')\r\n        .reduce((sum, t) => sum + parseFloat(t.amount), 0);\r\n    },\r\n    expectedEnding() {\r\n      return this.beginningBalance + this.totalIn - this.totalOut;\r\n    },\r\n    finalisedEnding() {\r\n      return this.balanceData ? parseFloat(this.balanceData.cash_in_hand) : '';\r\n    }\r\n    ,\r\n    difference() {\r\n      return this.finalisedEnding - this.expectedEnding;\r\n    },\r\n    previousDate() {\r\n      return this.balanceData?.previous_date?.date || '...';\r\n    },\r\n    createdAt() {\r\n      return this.balanceData?.created_at ? this.balanceData.created_at.slice(0, 16).replace('T', ' ') : 'cha cht';\r\n    },\r\n    actualCashInHandDisplay: {\r\n      get() {\r\n        return this.actualCashInHand.toLocaleString('en-US');\r\n      },\r\n      set(value) {\r\n        const num = parseFloat(value.replace(/,/g, ''));\r\n        this.actualCashInHand = isNaN(num) ? 0 : num;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    \r\n    getLocalDateISO(date) {\r\n      return new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().slice(0, 10);\r\n    },\r\n\r\n    async fetchData() {\r\n      if (!this.selectedDate) return;\r\n      \r\n      this.loading = true;\r\n      try {\r\n        const response = await axios.get(`/dateendcashbalances/?date=${this.selectedDate}&dateend=true`);\r\n        \r\n        // API returns a list, we take the first item\r\n        if (Array.isArray(response.data) && response.data.length > 0) {\r\n          this.balanceData = response.data[0];\r\n          \r\n          // If the record exists (has an ID), use its saved cash_in_hand\r\n          // Otherwise, default to the expected ending balance\r\n          if (this.balanceData.id) {\r\n            this.actualCashInHand = parseFloat(this.balanceData.cash_in_hand);\r\n          } else {\r\n            // Use nextTick to ensure computed properties are ready if needed, \r\n            // though here we can just use the logic directly or wait.\r\n            this.$nextTick(() => {\r\n               this.actualCashInHand = this.expectedEnding;\r\n            });\r\n          }\r\n        } else {\r\n          this.balanceData = null;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching balance data:', error);\r\n        alert('Failed to load data.');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async saveBalance() {\r\n      this.saving = true;\r\n      try {\r\n        const payload = {\r\n          date: this.selectedDate,\r\n          cash_in_hand: this.actualCashInHand\r\n        };\r\n\r\n        if (this.balanceData.id) {\r\n          // Update existing record\r\n          await axios.put(`/dateendcashbalances/${this.balanceData.id}/`, payload);\r\n        } else {\r\n          // Create new record\r\n          await axios.post('/dateendcashbalances/', payload);\r\n        }\r\n        \r\n        alert('Balance saved successfully!');\r\n        await this.fetchData(); // Reload to get updated state (e.g. ID)\r\n      } catch (error) {\r\n        console.error('Error saving balance:', error);\r\n        alert('Failed to save balance.');\r\n      } finally {\r\n        this.saving = false;\r\n      }\r\n    },\r\n    formatCurrency(value) {\r\n      return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value);\r\n    },\r\n    exportToCSV() {\r\n      if (!this.balanceData || !this.balanceData.transactions || this.balanceData.transactions.length === 0) {\r\n        alert(\"Khng c d liu  xut.\");\r\n        return;\r\n      }\r\n      \r\n      const data = this.balanceData.transactions;\r\n      const headers = ['ID', 'Ngy', 'Loi', 'M t', 'M ha n', 'Ti khon', 'S tin', 'Thu/Chi'];\r\n      \r\n      const csvContent = [\r\n        headers.join(','),\r\n        ...data.map(t => {\r\n          return [\r\n            t.id,\r\n            t.date,\r\n            `\"${t.transaction_type_name || ''}\"`,\r\n            `\"${(t.description || '').replace(/\"/g, '\"\"')}\"`,\r\n            `\"${t.invoice_code || ''}\"`,\r\n            `\"${t.bank_account_name || ''}\"`,\r\n            t.amount,\r\n            t.debit_or_credit\r\n          ].join(',');\r\n        })\r\n      ].join('\\n');\r\n      \r\n      const blob = new Blob([\"\\uFEFF\" + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const link = document.createElement('a');\r\n      if (link.download !== undefined) {\r\n        const url = URL.createObjectURL(blob);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `transactions_${this.selectedDate}.csv`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .max-w-7xl {\r\n      max-width: 90rem;\r\n      width: 75vw;\r\n    }\r\n\r\n::v-deep .back-ground-white {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n\r\n::v-deep .text-red-600 {\r\n  color: red;\r\n}\r\n\r\n::v-deep .text-green-600 {\r\n  color: green;\r\n}\r\n\r\n::v-deep .table__wrapper{\r\n    background-color: white;\r\n    color: black\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  border: 1px solid transparent;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 0.875rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.0892857143em;\r\n  background-color: #7dabe7;\r\n}\r\n\r\n\r\n</style>","import { render } from \"./DateEndCashBalance.vue?vue&type=template&id=04518798&scoped=true\"\nimport script from \"./DateEndCashBalance.vue?vue&type=script&lang=js\"\nexport * from \"./DateEndCashBalance.vue?vue&type=script&lang=js\"\n\nimport \"./DateEndCashBalance.vue?vue&type=style&index=0&id=04518798&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04518798\"]])\n\nexport default __exports__","import { render } from \"./Manage.vue?vue&type=template&id=73c61ab6&scoped=true\"\nimport script from \"./Manage.vue?vue&type=script&lang=js\"\nexport * from \"./Manage.vue?vue&type=script&lang=js\"\n\nimport \"./Manage.vue?vue&type=style&index=0&id=73c61ab6&lang=scss&scoped=true\"\nimport \"./Manage.vue?vue&type=style&index=1&id=73c61ab6&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-73c61ab6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"sign-in\">\r\n    <form @submit.prevent=\"handleSignIn\">\r\n      <h1>Sign In</h1>\r\n      <div v-if=\"errors.length\" class=\"error-messages\">\r\n        <ul>\r\n          <li v-for=\"(error, index) in errors\" :key=\"index\" class=\"error\">{{ error }}</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"user\">User</label>\r\n        <input\r\n          id=\"user\"\r\n          v-model=\"user\"\r\n          placeholder=\"Enter your user\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Password</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          v-model=\"password\"\r\n          placeholder=\"Enter your password\"\r\n          required\r\n        />\r\n      </div>\r\n      <button type=\"submit\" class=\"btn\">Sign In</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"SignIn\",\r\n  data() {\r\n    return {\r\n      user: \"\",\r\n      password: \"\",\r\n      errors: [],\r\n    };\r\n  },\r\n  methods: {\r\n    async handleSignIn() {\r\n      this.errors = []; // Clear previous errors\r\n      const formData = {\r\n        username: this.user,\r\n        password: this.password,\r\n      };\r\n\r\n      // remove old token\r\n      this.$store.dispatch('setToken', null);\r\n      axios.defaults.headers.common['Authorization'] = '';\r\n\r\n      // await axios.post('/token/login', formData)\r\n      await axios.post('/jwt/create/', formData)\r\n        .then(response => {\r\n          const token = response.data.access;\r\n          this.$store.dispatch('setToken', token);\r\n          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n\r\n\r\n          axios.get('/who_i_am/')\r\n            .then(res => {\r\n              const userGroups_ = res.data.usergroups || [];\r\n              const isAdmin = userGroups_.includes('admin');\r\n              this.$store.dispatch('setUserAdmin', isAdmin);\r\n              this.$store.dispatch('setUserName', res.data.username || '');\r\n            })\r\n            .catch(err => {\r\n              console.error('Error fetching user info after sign-in:', err);\r\n            });\r\n\r\n          this.$router.push('/manage'); // Redirect to manage page after sign-in\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Sign-in failed:\", error);\r\n          if (error.response && error.response.data) {\r\n            // Display server-provided error messages\r\n            this.errors.push(...Object.values(error.response.data));\r\n          } else {\r\n            this.errors.push(\"Sign-in failed. Please check your credentials.\");\r\n          }\r\n        });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    // If already authenticated, redirect to manage page\r\n    if (this.$store.getters.isAuthenticated) {\r\n      this.$router.push('/manage');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\ninput {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n\r\n.sign-in {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\nform {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  width: 100%;\r\n  max-width: 400px;\r\n}\r\n\r\nh1 {\r\n  margin-bottom: 1.5rem;\r\n  font-size: 1.5rem;\r\n  text-align: center;\r\n}\r\n\r\n.error-messages {\r\n  margin-bottom: 1rem;\r\n  color: red;\r\n}\r\n\r\n.error {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: bold;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n</style>","import { render } from \"./SignIn.vue?vue&type=template&id=47555536&scoped=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&lang=js\"\n\nimport \"./SignIn.vue?vue&type=style&index=0&id=47555536&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-47555536\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport Sale from '@/views/Sale.vue'\r\nimport Manage from '@/views/Manage.vue'\r\nimport SignIn from '@/views/SignIn.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: '/sale'\r\n  },\r\n  {\r\n    path: '/sale',\r\n    name: 'sale',\r\n    component: Sale\r\n  },\r\n  {\r\n    path: '/manage',\r\n    name: 'manage',\r\n    component: Manage\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\r\n  },\r\n  {\r\n    path: '/signin',\r\n    name: 'signin',\r\n    component: SignIn\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue';\r\nimport App from './App.vue';\r\nimport { createVuetify } from 'vuetify';\r\nimport 'vuetify/styles';\r\nimport * as components from 'vuetify/components';\r\nimport * as directives from 'vuetify/directives';\r\nimport router from './router';\r\nimport store from './store';\r\n\r\nconst vuetify = createVuetify({\r\n  components,\r\n  directives,\r\n});\r\n\r\nconst app = createApp(App)\r\n  .use(store)\r\n  .use(router)\r\n  .use(vuetify);\r\n\r\napp.mount('#app');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"about\" + \".\" + \"87d251bb\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"fppos_vue:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfppos_vue\"] = self[\"webpackChunkfppos_vue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6669); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["$setup","store","getters","isLoading","_createBlock","_component_LoadingOverlay","key","_createVNode","_component_router_view","class","_ctx","_createElementBlock","_hoisted_1","_cache","_createElementVNode","name","computed","mapGetters","__exports__","axios","defaults","baseURL","components","LoadingOverlay","setup","useStore","router","useRouter","checkTokenValidity","async","response","get","userGroups_","data","usergroups","isAdmin","includes","dispatch","isSuperadmin","username","error","console","push","then","isAuthenticated","token","getToken","headers","common","commit","render","style","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","placeholder","onFocus","args","$options","search_input_focus","onBlur","search_input_blur","onInput","search_input_change","_hoisted_7","_Fragment","_renderList","$data","filteredProducts","product","id","onMousedown","$event","add_product","_hoisted_9","_toDisplayString","_hoisted_10","formatPrice","price","_hoisted_11","code","_hoisted_12","_hoisted_13","localPendingSales","sale","index","_normalizeClass","onClick","select_pending_invoice","remove_pending_sale","add_new_pending_sale","_hoisted_15","_hoisted_16","branch","_hoisted_17","user","_hoisted_18","_component_menu_toggle","onMenuAction","handleMenuAction","_hoisted_19","_hoisted_20","_component_Carts","focus_invoice","onUpdateInvoice","handleUpdateItem","_hoisted_21","_hoisted_22","_hoisted_23","customer","search_input_cust_blur","search_input_change_cust","editOrNew","isCustomerModalOpen","_hoisted_24","filteredCust","select_focus_customer","_hoisted_26","_hoisted_27","_hoisted_28","phone_number","_hoisted_29","remove_focus_customer","isFilterModalOpen","_hoisted_30","_hoisted_31","_hoisted_32","products","is_active","productGroupFilter","length","productGroup","searchQuery","toLowerCase","_hoisted_34","_hoisted_35","limit_text","_hoisted_36","_hoisted_37","disabled","totalItems","openPaymentModal","_hoisted_38","_component_AddCust","regionList","provinces","wardList","wards","type","onClose","onSave","handleCustomerSave","_component_ProfuctFilterCate","dataSource","productGroups","onApply","applyProductFilter","isPaymentModalOpen","_component_Payment","visible","channels","defaultSurcharges","bankAccounts","transportCompanies","onUpdateCartData","onCompletePayment","handleCompletePayment","showAddEditTrans","_component_AddEditTrans","item","selectedTransItem","accounts","allAccounts","transactionTypes","onSaved","onTransSaved","role","isOpen","menuItems","text","href","_withModifiers","handleAction","action","icon","logout","closeMenu","props","msg","String","emits","methods","this","log","$emit","$store","$router","activeTab","ref","emit","__emit","__props","defaultForm","address","location","locationName","ward","ward_name","province","province_name","birthdate","gender","email","facebook","comments","handlePhoneNumberInput","event","value","target","form","replace","reactive","showLocationList","showWardList","locationInputRef","wardInputRef","dropdownStyle","top","left","width","display","updateDropdownPosition","inputElement","rect","getBoundingClientRect","bottom","window","scrollY","scrollX","openDropdown","nextTick","filteredRegions","query","filter","r","selectLocation","region","handleChangeLocation","ward_id","filteredWards","queryWard","wardsToFilter","w","selectWard","handleBlur","setTimeout","saveCustomer","customerData","put","catch","alert","JSON","stringify","message","post","closeForm","onMounted","Object","assign","find","currentBranch","active","_hoisted_8","_hoisted_14","rows","onChange","_Teleport","to","_normalizeStyle","_hoisted_25","trim","displayOptions","numberOrder","total","duplicateCartItem","usingSortProduct","isOnlineMode","saleScreenMode","isWarrantyCart","useTotalQuantity","cartItems","items","isRefund","update_total_and_quantity","forEach","quantity","finalTotal","discount","vClickOutside","mounted","el","binding","clickOutsideEvent","contains","document","addEventListener","unmounted","removeEventListener","removeProduct","indexOf","splice","val","Intl","NumberFormat","format","updateQuantity","delta","currentQty","Number","newVal","onQuantityChange","isNaN","unitChanged","selectedUnit","togglePopover","i","isOpenPopover","closePopover","toggleNote","hasNote","note","addSerial","serials","removeSerial","uuid","title","units","u","number","_hoisted_33","isSerial","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","serial","idx","_hoisted_43","onKeydown","_withKeys","_hoisted_45","_hoisted_46","maxlength","tabindex","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","searchParam","isExpanded","selectedIds","watch","modelValue","filteredList","lowerSearch","isAllSelected","isIndeterminate","toggleAll","e","checked","map","onToggleAllClick","toggleSelection","itemName","clearFilter","close","applyFilter","_Transition","indeterminate","for","overlayRef","modalRef","onOverlayClick","selectAll","select","surchargeList","parse","chosenSurcharges","chosen","match","s","selected","amount","newItems","immediate","totalAmount","reduce","sum","formatCurrency","colspan","description","currency","formatDate","dateString","date","Date","year","getFullYear","month","getMonth","padStart","day","getDate","calculatedTotal","subtotal","order","surchargeTotal","surcharges","acc","curr","src","_unref","logoUrl","alt","customer_name","customer_phone_number","delivery_address","surcharge","amount_paid_by_customer","maxDate","today","setDate","toISOString","split","toPrint","onlyNumbersandPer","input","char","fromCharCode","which","keyCode","test","preventDefault","selectionStart","handleUpdateSurcharges","surchargesOpen","totalSurcharge","cartData","onlyNumbers","charCode","checkAndUpdateDiscount","discountMethodValueDisplay","endsWith","percentStr","slice","percentValue","parseFloat","discountMethodValue","Math","round","fixedValue","parseInt","chosenDiscountMethod","handlePaymentMethodChange","paymentMethod","amountPaidByCustomer","confirm_miss_payment","paymentAccount","nonCashAccount","bank_name","handleUpdatePaymentAccount","amountPaidDisplay","set","newValue","sanitized","handleUpdateAmountPaidCustomer","amountPaidTransportCompanyDisplay","amountPaidTransportCompany","selectedSeller","selectedChannel","getTodayDateStr","d","toString","getNowTimeStr","hours","getHours","minutes","getMinutes","purchaseDate","purchaseTime","dateInputRef","timeInputRef","openTimePicker","showPicker","focus","openDatePicker","transportCompany","paymentMethods","label","changeDue","channel","printInvoice","print","handlePayment","payload","amount_paid_transport_company","total_surcharge","final_total","payment_method","payment_account","transport_company","time","paymentConfirmation","c","userAdmin","max","debt","points","onKeypress","method","account","default","account_number","abs","company","Surcharge","PrintInvoice","timer","duration","clearTimeout","onUnmounted","debit_or_credit","required","min","minDate","amountDisplay","account_id","account_holder_name","transaction_type_id","filteredTransactionTypes","tt","isActive","userSuperadmin","handleSubmit","Array","d_edit_days","toRefs","dateInput","getLocalDateISO","tzOffset","getTimezoneOffset","localISOTime","minDay","ref_field","undefined","transaction_type","isEditing","menu_toggle","AddCust","Carts","ProfuctFilterCate","Payment","AlertModule","AddEditTrans","sampleInvoice","chosenBankAccount","userName","triggerAlert","alertContainer","createElement","body","appendChild","alertApp","createApp","mount","unmount","removeChild","$nextTick","localStorage","setItem","mess_","maxLength","querySelector","filterCriteria","classList","add","fetchSurcharges","remove","params","exclude","querySelectorAll","targetItem","stopPropagation","from","currentTarget","parentNode","children","removeItem","newId","newInvoice","updatedInvoice","findIndex","isArray","existingItem","product_type","package_details","fetchProducts","sort","a","b","created_at","fetchProductGroups","fetchLogicConfigs","config","fetchProvincesWards","provincesResponse","wardsResponse","Promise","all","fetchBankAccounts","fetchTransactionTypes","created","pendingSales","getItem","localSelectedInvoiceId","menus","m","Id","activeView","require_admin","setActiveView","handleSignOut","_component_Products","isVisible","_component_Customers","_component_Invoices","_component_Settings","_component_Trans","_component_Users","_component_Purchases","_component_DateEndInventory","_component_DateEndCashBalance","filterText","pageSize","size","createNewProduct","toggleGroupList","showGroupList","position","maxHeight","overflow","groupListPosition","zIndex","background","border","borderRadius","boxShadow","padding","minWidth","group","openAddEditProductGroup","exportToCSV","isActiveFilter","toggleProductGroupFilterDropdown","selectedGroupNames","showProductGroupFilterDropdown","allGroupsSelected","_component_v_data_table","page","currentPage","search","_withCtx","openEditProduct","showAddEdit","_component_AddEditProduct","productData","selectedProduct","onProductSaved","showAddEditProductGroupModal","_component_AddEditProductGroup","editingProductGroup","onProductGroupSaved","createStore","state","user_admin","user_name","user_superadmin","mutations","setAuthentication","status","setToken","clearToken","setLoading","setUserAdmin","setUserName","setUserSuperadmin","actions","checkAuthentication","removeToken","modules","product_group","comboItems","activeComboDropdown","priceDisplay","normalProducts","p","addComboItem","searchText","removeComboItem","filterProducts","filtered","lower","some","comboItem","selectComboProduct","handleComboFocus","handleComboBlur","saveProduct","keys","found","deep","onBeforeinput","g","AddEditProduct","AddEditProductGroup","groupListRef","productGroupFilterDropdownRef","handleClickOutside","groupListEl","sortable","headerProps","cellProps","align","result","groupId","toLocaleString","csvRows","h","join","row","csvString","blob","Blob","url","URL","createObjectURL","download","click","revokeObjectURL","openAddProduct","productGroupTrue","pg","updateGroupListPosition","btn","onBeforeUnmount","createNewCustomer","customers","totalCustomers","openEditCustomer","_component_AddEditCustomer","selectedCustomer","onCustomerSaved","AddEditCustomer","fetchCustomers","page_size","results","count","openAddCustomer","triggerImportShopee","showSurchargeList","openAddEditSurcharge","handleFileUploadShopee","dateFrom","dateTo","toggleSellerFilterDropdown","selectedSellerNames","showSellerFilterDropdown","allSellersSelected","uniqueSellers","seller","sellerFilter","toggleChannelFilterDropdown","selectedChannelNames","showChannelFilterDropdown","allChannelsSelected","uniqueChannels","channelFilter","filteredInvoices","isEditable","openEditInvoice","formatDateTime","_component_AddEditInvoice","selectedInvoice","onInvoiceSaved","showAddEditSurchargeModal","_component_AddEditSurcharge","editingSurcharge","showPrintView","_component_PrintInvoice","$props","readonly","startsWith","handlePrint","numericValue","patch","AddEditInvoice","AddEditSurcharge","invoices","sellerFilterDropdownRef","channelFilterDropdownRef","fileInputShopee","file","files","formData","FormData","append","fetchInvoices","getTime","now","surchargeTrue","invoice","seconds","getSeconds","createNewInvoice","export","responseType","itemDate","setHours","diffDays","newInvoices","sellers","inv","Boolean","Set","channelsData","createNewItem","filteredItems","openEditItem","showAddEditItem","_component_AddEditSettings","selectedItem","onItemSaved","AddEditSettings","fetchItems","openAddItem","toggleSubList","showSubList","subListPosition","subList","openAddEditSub","toggleSubList2","showSubList2","subListPosition2","subList2","openAddEditSub2","exportToExcel","debitCreditFilter","toggleTransactionTypeFilterDropdown","selectedTransactionTypeNames","showTransactionTypeFilterDropdown","allTransactionTypesSelected","filteredTransactionTypesForFilter","transactionTypeFilter","toggleBankAccountFilterDropdown","selectedBankAccountNames","showBankAccountFilterDropdown","allBankAccountsSelected","bankAccountFilter","showAddEditSub","_component_AddEditAccounts","selectedSubItem","onSubItemSaved","showAddEditSub2","_component_AddEditTransactionType","selectedSubItem2","onSubItemSaved2","AddEditAccounts","AddEditTransactionType","subListRef","bankAccountFilterDropdownRef","transactionTypeFilterDropdownRef","t","visibleIDs","every","newSelection","fetchSubList","subListEl","subListRef2","fetchSubList2","updateGroupListPosition2","handleClickOutside2","link","filename","setAttribute","_component_AddEditUsers","password","autocomplete","last_name","first_name","userGroups","groups","initForm","AddEditUsers","total_quantity","_component_AddEditPurchase","supplier","suppliers","isDateOutsideAllowedRange","productSearchTerm","showProductDropdown","hideDropdown","addProduct","downloadTemplate","showImportButton","triggerImport","handleFileUpload","accept","totalQuantity","handleQuantityChange","currentDate","minAllowed","maxAllowed","fileInput","fetchSuppliers","existing","reader","FileReader","onload","Uint8Array","workbook","XLSX","firstSheetName","SheetNames","worksheet","Sheets","jsonData","sheet_to_json","invalidQuantityRows","validProductsMap","Map","invalidCodes","rawCode","has","readAsArrayBuffer","qty","AddEditPurchase","minimumFractionDigits","toLocaleDateString","previousDate","chosenDate","copyClosingToActual","openEditChanges","createDateEndInventory","tableRows","height","density","diff","closing","check_actual","searchQueryInvoice","infoHeaders","infoTableRows","showEditChanges","_component_EditChangesItems","currentChangesItems","handleSaveChanges","deductSearchTerm","handleFocus","onInputChange","replaceSearchTerm","addItem","saveChanges","deduction_product_code","replace_product_code","activeDropdown","currentDropdownList","selectProduct","initialItems","getInitialSearchTerm","prod","showDeductDropdown","showReplaceDropdown","term","lowerTerm","combined","validItems","EditChangesItems","DateEndInventorys","fetchDateEndInventorys","dayend","previous_date","itemsPayload","detail","updateTableRows","prevItems","currentItems","purchases","changes","changes_items","allCodes","collectCodes","expanded_items","productInfoMap","info","prev","purchaseSum","invoiceSum","changeSum","actual","prevItem","pItem","currItem","localeCompare","productMap","values","visibleRows","fixed","invKey","hasMainData","headerRow","wsData","rowData","k","ws","aoa_to_sheet","wb","book_new","book_append_sheet","onDiffChange","updatedItems","selectedDate","fetchData","createdAt","loading","balanceData","beginningBalance","totalIn","totalOut","expectedEnding","finalisedEnding","difference","actualCashInHandDisplay","saveBalance","saving","transactions","transaction_type_name","actualCashInHand","cash_in_hand","num","csvContent","invoice_code","bank_account_name","visibility","Products","Customers","Invoices","Settings","Trans","Users","Purchases","DateEndInventory","DateEndCashBalance","query_params","menu","view","$route","fetchLogicConfig","channelConfig","editDaysConfig","showReportPopup","condition","onSubmit","handleSignIn","errors","access","res","err","beforeMount","routes","path","redirect","component","Sale","Manage","SignIn","createRouter","history","createWebHistory","process","vuetify","createVuetify","directives","app","App","use","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","n","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","promises","miniCssF","globalThis","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","onScriptComplete","onerror","timeout","doneFns","bind","head","Symbol","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","Error","loadingEnded","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}